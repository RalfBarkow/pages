{
  "title": "Read Write Grep",
  "story": [
    {
      "type": "html",
      "text": "In the spirit of [[Once And Only Once]], I've lately been noticing repetitive tasks and writing shell scripts for them.  One of the things I've caught myself doing many times is doing one-line perl invocations that are what I call \"read/write grep\"'s -- that is, search and replace with greppish semantics.",
      "id": "f707f2bef17cf60f27a21753e67f59ee"
    },
    {
      "type": "html",
      "text": "<i>(Download [[Cvs Tools]] for source)</i>",
      "id": "7087dc794fbb492e2c3be867eb1bd91a"
    },
    {
      "type": "html",
      "text": "\nNotice that it just passes whatever you send it directly into the perl command -- in other words you can use full perl RE's.  Specifically, you might want to use \\b's.",
      "id": "23de65373ce0d196a1aad649bade2078"
    },
    {
      "type": "html",
      "text": "\nExample invocation (if the above is put in a script named \"rwgrep\"):",
      "id": "021755d1311f830728af0cd1df697d41"
    },
    {
      "type": "code",
      "text": " rwgrep '\\bcustidreg\\b' 'registeredCustomerId' *.java",
      "id": "1a2374b361b3326f647d43047b2c2149"
    },
    {
      "type": "html",
      "text": "\nYou will then be asked if you want to keep your changes for every file (even if there are no changes, though I'm going to eventually make it so it only prompts if there were changes).",
      "id": "420d4b0b9e30fd07ada7e5931949e30f"
    },
    {
      "type": "html",
      "text": "<i>Compare:</i>",
      "id": "972f8453079d5200f600c1b58697323e"
    },
    {
      "type": "code",
      "text": " ''perl -i~ -pe 's/\\bcustidreg/registeredCustomerId/g' *.java''",
      "id": "7f99dba61435882977cfec7c455cd969"
    },
    {
      "type": "html",
      "text": "\nWhat happened to the link? It does not seem to work.",
      "id": "ba7b4e5b6f85c30d33e316b8000fa49e"
    },
    {
      "type": "html",
      "text": "\nDoh, ever heard of shell aliases?",
      "id": "41069d42bbbaa56cfa4911227fd3eb3b"
    },
    {
      "type": "code",
      "text": "  alias rwgrep='perl -i~ -pe'",
      "id": "5351bd0a87de7ad9089b67dc7dc1a0b0"
    },
    {
      "type": "html",
      "text": "\nNow you just type",
      "id": "9ba2b46aef1b14e4f6b9f5af547c1a14"
    },
    {
      "type": "code",
      "text": "  rwgrep s/this/that/ *.java",
      "id": "4c7375f9a5362bd1e20af24b31539280"
    },
    {
      "type": "html",
      "text": "<i>Congratulations, this has just reinvented <b>sed</b> :-)</i>",
      "id": "4bd300aae1b5210b9297d7dea7b09946"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "ff4146928891c047b0d1d56aed058b08"
    },
    {
      "type": "html",
      "text": "\nSee [[Sed Language]]",
      "id": "596807cdd7b4536f487829d822327ef9"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "ff4146928891c047b0d1d56aed058b08"
    },
    {
      "type": "html",
      "text": "People who do not use vi, or never learned its ex mode, can skip this:",
      "id": "b9deaca69589f1807a3a29aa4968071d"
    },
    {
      "type": "html",
      "text": "\nThe \"ex\" mode of vi is an excellent tool for editing files via a static script. That's what editors are for, after all!",
      "id": "b018d9b8fed57e4be130a1e0efa1e2f4"
    },
    {
      "type": "html",
      "text": "\nPut the ex commands in a script file, remembering to end with :wq to write and quit (otherwise the changes aren't saved on exit, of course), and you can then interactively try out the script with \":source scriptfile\" or run it on the command line with \"ex - file < scriptfile\" (the \"-\" is the anti-verbose flag).",
      "id": "26ce8fc3dbb2fe27a019ce908bb6787a"
    },
    {
      "type": "html",
      "text": "\nIt supports a few very, very powerful things that would be quite difficult to do as simply with any other tool, even perl, such as mixing line ranges with global and using the \";\" separator, moving backwards with ? to find a previous line after each // match, etc.",
      "id": "05f088047e2791467ea9130c8793333e"
    },
    {
      "type": "html",
      "text": "\nEven if you're not familiar with those lesser-known features, it still is often more direct to use a simple edit script than to debug a program in another language.",
      "id": "05023f110c76727738bec9e644fdfd9e"
    },
    {
      "type": "html",
      "text": "\nThis may not be suitable for production use if one is concerned that maintainers will be incapable of learning (or unwilling to learn) ex commands; to avoid holy wars it's probably better just to use perl, even if its more complicated and error prone for certain tasks.",
      "id": "a7641f2178874e717c8b68102f32dbd5"
    },
    {
      "type": "html",
      "text": "\nThe counter-argument to that is that holy wars don't start over using sed, yet ex and sed are both standard tools that use similar syntax derived from exactly the same source (ed), so what's the big deal? -- dm",
      "id": "0a2dcfae21ea1db1b637a79c46e851f7"
    },
    {
      "type": "html",
      "text": "<i>Yeah, using ex as a replacement for perl [[One Liners]] is a good idea, if you already master the [[Vi Fu]].</i>",
      "id": "8c937f36b20a4ade910d1b85cf27e13e"
    },
    {
      "type": "html",
      "text": "See original on  [http://c2.com/cgi/wiki?ReadWriteGrep c2.com]",
      "id": "bd4580f56090113062ed68bcec5e1da8"
    }
  ],
  "journal": [
    {
      "date": 1166712167000,
      "id": "d2ed1f927dbfc2ff2809b29630707072",
      "type": "create",
      "item": {
        "title": "Read Write Grep",
        "story": [
          {
            "type": "html",
            "text": "In the spirit of [[Once And Only Once]], I've lately been noticing repetitive tasks and writing shell scripts for them.  One of the things I've caught myself doing many times is doing one-line perl invocations that are what I call \"read/write grep\"'s -- that is, search and replace with greppish semantics.",
            "id": "f707f2bef17cf60f27a21753e67f59ee"
          },
          {
            "type": "html",
            "text": "<i>(Download [[Cvs Tools]] for source)</i>",
            "id": "7087dc794fbb492e2c3be867eb1bd91a"
          },
          {
            "type": "html",
            "text": "\nNotice that it just passes whatever you send it directly into the perl command -- in other words you can use full perl RE's.  Specifically, you might want to use \\b's.",
            "id": "23de65373ce0d196a1aad649bade2078"
          },
          {
            "type": "html",
            "text": "\nExample invocation (if the above is put in a script named \"rwgrep\"):",
            "id": "021755d1311f830728af0cd1df697d41"
          },
          {
            "type": "code",
            "text": " rwgrep '\\bcustidreg\\b' 'registeredCustomerId' *.java",
            "id": "1a2374b361b3326f647d43047b2c2149"
          },
          {
            "type": "html",
            "text": "\nYou will then be asked if you want to keep your changes for every file (even if there are no changes, though I'm going to eventually make it so it only prompts if there were changes).",
            "id": "420d4b0b9e30fd07ada7e5931949e30f"
          },
          {
            "type": "html",
            "text": "<i>Compare:</i>",
            "id": "972f8453079d5200f600c1b58697323e"
          },
          {
            "type": "code",
            "text": " ''perl -i~ -pe 's/\\bcustidreg/registeredCustomerId/g' *.java''",
            "id": "7f99dba61435882977cfec7c455cd969"
          },
          {
            "type": "html",
            "text": "\nWhat happened to the link? It does not seem to work.",
            "id": "ba7b4e5b6f85c30d33e316b8000fa49e"
          },
          {
            "type": "html",
            "text": "\nDoh, ever heard of shell aliases?",
            "id": "41069d42bbbaa56cfa4911227fd3eb3b"
          },
          {
            "type": "code",
            "text": "  alias rwgrep='perl -i~ -pe'",
            "id": "5351bd0a87de7ad9089b67dc7dc1a0b0"
          },
          {
            "type": "html",
            "text": "\nNow you just type",
            "id": "9ba2b46aef1b14e4f6b9f5af547c1a14"
          },
          {
            "type": "code",
            "text": "  rwgrep s/this/that/ *.java",
            "id": "4c7375f9a5362bd1e20af24b31539280"
          },
          {
            "type": "html",
            "text": "<i>Congratulations, this has just reinvented <b>sed</b> :-)</i>",
            "id": "4bd300aae1b5210b9297d7dea7b09946"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "ff4146928891c047b0d1d56aed058b08"
          },
          {
            "type": "html",
            "text": "\nSee [[Sed Language]]",
            "id": "596807cdd7b4536f487829d822327ef9"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "ff4146928891c047b0d1d56aed058b08"
          },
          {
            "type": "html",
            "text": "People who do not use vi, or never learned its ex mode, can skip this:",
            "id": "b9deaca69589f1807a3a29aa4968071d"
          },
          {
            "type": "html",
            "text": "\nThe \"ex\" mode of vi is an excellent tool for editing files via a static script. That's what editors are for, after all!",
            "id": "b018d9b8fed57e4be130a1e0efa1e2f4"
          },
          {
            "type": "html",
            "text": "\nPut the ex commands in a script file, remembering to end with :wq to write and quit (otherwise the changes aren't saved on exit, of course), and you can then interactively try out the script with \":source scriptfile\" or run it on the command line with \"ex - file < scriptfile\" (the \"-\" is the anti-verbose flag).",
            "id": "26ce8fc3dbb2fe27a019ce908bb6787a"
          },
          {
            "type": "html",
            "text": "\nIt supports a few very, very powerful things that would be quite difficult to do as simply with any other tool, even perl, such as mixing line ranges with global and using the \";\" separator, moving backwards with ? to find a previous line after each // match, etc.",
            "id": "05f088047e2791467ea9130c8793333e"
          },
          {
            "type": "html",
            "text": "\nEven if you're not familiar with those lesser-known features, it still is often more direct to use a simple edit script than to debug a program in another language.",
            "id": "05023f110c76727738bec9e644fdfd9e"
          },
          {
            "type": "html",
            "text": "\nThis may not be suitable for production use if one is concerned that maintainers will be incapable of learning (or unwilling to learn) ex commands; to avoid holy wars it's probably better just to use perl, even if its more complicated and error prone for certain tasks.",
            "id": "a7641f2178874e717c8b68102f32dbd5"
          },
          {
            "type": "html",
            "text": "\nThe counter-argument to that is that holy wars don't start over using sed, yet ex and sed are both standard tools that use similar syntax derived from exactly the same source (ed), so what's the big deal? -- dm",
            "id": "0a2dcfae21ea1db1b637a79c46e851f7"
          },
          {
            "type": "html",
            "text": "<i>Yeah, using ex as a replacement for perl [[One Liners]] is a good idea, if you already master the [[Vi Fu]].</i>",
            "id": "8c937f36b20a4ade910d1b85cf27e13e"
          },
          {
            "type": "html",
            "text": "See original on  [http://c2.com/cgi/wiki?ReadWriteGrep c2.com]",
            "id": "bd4580f56090113062ed68bcec5e1da8"
          }
        ]
      }
    },
    {
      "type": "fork",
      "site": "sfw.c2.com",
      "date": 1653815912156
    }
  ]
}