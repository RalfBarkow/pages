{
  "title": "Wiki Sitemap",
  "story": [
    {
      "type": "markdown",
      "id": "84babdb74c6aeac8",
      "text": "is a [[Sitemap]] (or site map), that software in the federation (like the wiki-client) uses to find pages."
    },
    {
      "type": "markdown",
      "id": "5beb9fcec61d16f1",
      "text": "It is used for things like [[Wiki Find]], and displaying [[Recent Changes]] and [[Twins]] of the current page. Federated wiki uses [[JSON]] rather than [[XML]] to make it fast to load and utilise in the browser."
    },
    {
      "type": "image",
      "id": "dc6b4e0315c97036",
      "text": "a Sitemap view",
      "size": "wide",
      "width": 430,
      "height": 268,
      "url": "/assets/plugins/image/bf2b2915ba3994bde1388af9cd396a00.jpg"
    },
    {
      "type": "markdown",
      "id": "489136259d2742b7",
      "text": "# Schema"
    },
    {
      "type": "paragraph",
      "id": "315f2d23a08504dd",
      "text": "The wiki server creates a [[sitemap.json]] file by scanning pages on startup and occasionally thereafter. This json file is a indexed array with the following structure:"
    },
    {
      "type": "code",
      "id": "07ed13e82ead131e",
      "text": "[1]\n slug\n title\n date\n synopsis\n[2]\n ..."
    },
    {
      "type": "paragraph",
      "id": "216440b9a175d4c3",
      "text": "If you delete the sitemap the server will recreate it when asked."
    },
    {
      "type": "paragraph",
      "id": "724146605fec5348",
      "text": "The sitemap includes the first paragraph of each page which the client uses for its search."
    },
    {
      "type": "paragraph",
      "id": "5da464e501d71076",
      "text": "Try text editing the first paragraph of the welcome page."
    },
    {
      "type": "paragraph",
      "id": "e67bd7d004223056",
      "text": "The client can see the new text, but not search."
    },
    {
      "type": "paragraph",
      "id": "5f0c76a3554f75e3",
      "text": "Try deleting ~/.wiki/status/sitemap.json"
    },
    {
      "type": "paragraph",
      "id": "b8d506a1bc0e706b",
      "text": "The client search will see the new text on reload."
    },
    {
      "type": "markdown",
      "id": "4a2a2b2b-c6bd-4149-9bf8-74d767a69c06",
      "text": "# See also\n"
    },
    {
      "type": "markdown",
      "id": "d0c2a501697dbc37",
      "text": "- [[Federation Directory]]\n- [[Current Sitemaps]]\n- [[Sitemap Scrape Statistics]]\n- [[Ruby Sitemap Scrape]]\n- [[Sitemap Scrape Improvements]]\n- [[Crawl Errors]]\n- [[Wiki Scrape]]\n- [[Fedwiki Search]]\n- [[Future Search]]\n- [[Dependencies Map]]"
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "Wiki Sitemap",
        "story": []
      },
      "date": 1546782289682
    },
    {
      "item": {
        "type": "factory",
        "id": "84babdb74c6aeac8"
      },
      "id": "84babdb74c6aeac8",
      "type": "add",
      "date": 1546782727310
    },
    {
      "type": "add",
      "item": {
        "id": "b4949c872e5888ec",
        "type": "reference",
        "site": "www.fedwiki.org",
        "slug": "current-sitemaps",
        "title": "Current Sitemaps",
        "text": "We should get sitemaps quickly and keep up with their changes. This is especially true of our own."
      },
      "after": "84babdb74c6aeac8",
      "id": "b4949c872e5888ec",
      "date": 1546782731929
    },
    {
      "type": "add",
      "item": {
        "id": "7f51782ed228f6cb",
        "type": "reference",
        "site": "future.fedwiki.org",
        "slug": "sitemap-scrape-statistics",
        "title": "Sitemap Scrape Statistics",
        "text": "We collect various counts while scraping sitemaps and report them as a text file. Here we plot the most recent counts available."
      },
      "after": "b4949c872e5888ec",
      "id": "7f51782ed228f6cb",
      "date": 1546782734242
    },
    {
      "type": "add",
      "item": {
        "id": "ede66a9f534703af",
        "type": "reference",
        "site": "www.fedwiki.org",
        "slug": "federation-directory",
        "title": "Federation Directory",
        "text": "Here we maintain a Roster of federation directories. Directories will have a well groomed sitemap optimized for finding sites by keyword search."
      },
      "after": "84babdb74c6aeac8",
      "id": "ede66a9f534703af",
      "date": 1546782765648
    },
    {
      "type": "add",
      "item": {
        "id": "775b8652aa145d41",
        "type": "reference",
        "site": "search.fedwiki.org",
        "slug": "sitemap-scrape-improvements",
        "title": "Sitemap Scrape Improvements",
        "text": "The [[Ruby Sitemap Scrape]] provides the first full text search of the visible federation. We've learned a lot by building this ourselves from grep-like utilities. Here we list todos that have surfaced and been completed."
      },
      "after": "7f51782ed228f6cb",
      "id": "775b8652aa145d41",
      "date": 1546782782683
    },
    {
      "type": "add",
      "item": {
        "id": "913d66fd15ea053b",
        "type": "reference",
        "site": "search.fedwiki.org",
        "slug": "ruby-sitemap-scrape",
        "title": "Ruby Sitemap Scrape",
        "text": "This is a rewrite of the first ruby scraper that saves text files useful for searching instead of whole sites in export format. It incrementally refetches pages that have changed based on dates in the sitemaps. [https://github.com/WardCunningham/search github]"
      },
      "after": "7f51782ed228f6cb",
      "id": "913d66fd15ea053b",
      "date": 1546782786375
    },
    {
      "type": "add",
      "item": {
        "id": "b0c1d6d249a7bde8",
        "type": "reference",
        "site": "search.fedwiki.org",
        "slug": "crawl-errors",
        "title": "Crawl Errors",
        "text": "The [[Sitemaps Testing Tool]] allows you to examine different types of crawl errors that Google finds on your site. You can examine these here - [https://www.google.com/webmasters/tools/crawl-errors?hl=en&siteUrl=http://www.himalayanacademy.com/ google.com]"
      },
      "after": "775b8652aa145d41",
      "id": "b0c1d6d249a7bde8",
      "date": 1546782800029
    },
    {
      "type": "edit",
      "id": "84babdb74c6aeac8",
      "item": {
        "type": "markdown",
        "id": "84babdb74c6aeac8",
        "text": "A wiki-sitemap is a [[site map]] that we use for federated wiki that uses [[JSON]] rather than [[XML]] to make it fast to load and utilise in the browser. It is used for things like [[Wiki Find]], and displaying [[Recent Changes]] and [[Twins]] of the current page."
      },
      "date": 1546783013024
    },
    {
      "item": {
        "type": "factory",
        "id": "456c6526a0779797"
      },
      "id": "456c6526a0779797",
      "type": "add",
      "after": "b0c1d6d249a7bde8",
      "date": 1546783442834
    },
    {
      "type": "edit",
      "id": "456c6526a0779797",
      "item": {
        "type": "reference",
        "id": "456c6526a0779797",
        "site": "www.fedwiki.org",
        "slug": "wiki-scrape",
        "title": "Wiki Scrape",
        "text": "We make available the [[search index downloads]] available files in several formats including json objects designed for network graphing."
      },
      "date": 1546783445948
    },
    {
      "item": {
        "type": "factory",
        "id": "f0d3c883d9907219"
      },
      "id": "f0d3c883d9907219",
      "type": "add",
      "after": "456c6526a0779797",
      "date": 1546783447321
    },
    {
      "type": "edit",
      "id": "f0d3c883d9907219",
      "item": {
        "type": "reference",
        "id": "f0d3c883d9907219",
        "site": "www.fedwiki.org",
        "slug": "fedwiki-search",
        "title": "Fedwiki Search",
        "text": "Here we look at the most sustainable way to integrate robust cross-federation search into wiki. This is currently experimental - see [[Future Search]]"
      },
      "date": 1546783450809
    },
    {
      "item": {
        "type": "factory",
        "id": "318a2d4ca72742e2"
      },
      "id": "318a2d4ca72742e2",
      "type": "add",
      "after": "f0d3c883d9907219",
      "date": 1546783452158
    },
    {
      "type": "edit",
      "id": "318a2d4ca72742e2",
      "item": {
        "type": "reference",
        "id": "318a2d4ca72742e2",
        "site": "search.fedwiki.org",
        "slug": "future-search",
        "title": "Future Search",
        "text": "In the future we look to experiment with speeding up search. With the [[Search Plugin]] (below) we can see the effect of manipulating the results of searching the [[search index downloads]]:"
      },
      "date": 1546783455554
    },
    {
      "item": {
        "type": "factory",
        "id": "9ed9478d55c74d9f"
      },
      "id": "9ed9478d55c74d9f",
      "type": "add",
      "after": "318a2d4ca72742e2",
      "date": 1546783730826
    },
    {
      "type": "fork",
      "site": "fedwiki.org",
      "date": 1547299281510
    },
    {
      "type": "remove",
      "id": "9ed9478d55c74d9f",
      "date": 1547299549339
    },
    {
      "type": "edit",
      "id": "84babdb74c6aeac8",
      "item": {
        "type": "markdown",
        "id": "84babdb74c6aeac8",
        "text": "A wiki-sitemap is a [[sitemap]] (or [[site map]]) in json format, that we use for federated wiki that uses [[JSON]] rather than [[XML]] to make it fast to load and utilise in the browser. It is used for things like [[Wiki Find]], and displaying [[Recent Changes]] and [[Twins]] of the current page."
      },
      "date": 1547299598862
    },
    {
      "type": "edit",
      "id": "84babdb74c6aeac8",
      "item": {
        "type": "markdown",
        "id": "84babdb74c6aeac8",
        "text": "A wiki-sitemap is a [[sitemap]] (or [[site map]]), that software int he federation (like the wiki-client) uses to find pages. It is used for things like [[Wiki Find]], and displaying [[Recent Changes]] and [[Twins]] of the current page. Federated wiki uses [[JSON]] rather than [[XML]] to make it fast to load and utilise in the browser. "
      },
      "date": 1547299730202
    },
    {
      "type": "add",
      "item": {
        "type": "markdown",
        "id": "4a2a2b2b-c6bd-4149-9bf8-74d767a69c06",
        "text": "# See also\n\n- [[Federation Directory]]\n- [[Current Sitemaps]]\n- [[Sitemap Scrape Statistics]]\n- [[Ruby Sitemap Scrape]]\n- [[Sitemap Scrape Improvements]]\n- [[Crawl Errors]]\n- [[Wiki Scrape]]\n- [[Fedwiki Search]]\n- [[Future Search]]"
      },
      "after": "84babdb74c6aeac8",
      "id": "4a2a2b2b-c6bd-4149-9bf8-74d767a69c06",
      "date": 1547299860215
    },
    {
      "type": "remove",
      "id": "ede66a9f534703af",
      "date": 1547299892410
    },
    {
      "type": "remove",
      "id": "b4949c872e5888ec",
      "date": 1547299894794
    },
    {
      "type": "remove",
      "id": "7f51782ed228f6cb",
      "date": 1547299896913
    },
    {
      "type": "remove",
      "id": "913d66fd15ea053b",
      "date": 1547299898845
    },
    {
      "type": "remove",
      "id": "775b8652aa145d41",
      "date": 1547299900722
    },
    {
      "type": "remove",
      "id": "b0c1d6d249a7bde8",
      "date": 1547299902860
    },
    {
      "type": "remove",
      "id": "456c6526a0779797",
      "date": 1547299904634
    },
    {
      "type": "remove",
      "id": "f0d3c883d9907219",
      "date": 1547299906501
    },
    {
      "type": "remove",
      "id": "318a2d4ca72742e2",
      "date": 1547299908500
    },
    {
      "type": "edit",
      "id": "4a2a2b2b-c6bd-4149-9bf8-74d767a69c06",
      "item": {
        "type": "markdown",
        "id": "4a2a2b2b-c6bd-4149-9bf8-74d767a69c06",
        "text": "# See also\n"
      },
      "date": 1547299920352
    },
    {
      "type": "add",
      "id": "d0c2a501697dbc37",
      "item": {
        "type": "markdown",
        "id": "d0c2a501697dbc37",
        "text": "- [[Federation Directory]]\n- [[Current Sitemaps]]\n- [[Sitemap Scrape Statistics]]\n- [[Ruby Sitemap Scrape]]\n- [[Sitemap Scrape Improvements]]\n- [[Crawl Errors]]\n- [[Wiki Scrape]]\n- [[Fedwiki Search]]\n- [[Future Search]]"
      },
      "after": "4a2a2b2b-c6bd-4149-9bf8-74d767a69c06",
      "date": 1547299922663
    },
    {
      "type": "add",
      "item": {
        "type": "markdown",
        "id": "489136259d2742b7",
        "text": "# Schema"
      },
      "after": "84babdb74c6aeac8",
      "id": "489136259d2742b7",
      "date": 1547300630277
    },
    {
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "315f2d23a08504dd",
        "text": "The wiki server creates a sitemap.json file by scanning pages on startup and occasionally thereafter. If you delete the sitemap the server will recreate it when asked."
      },
      "after": "489136259d2742b7",
      "id": "315f2d23a08504dd",
      "date": 1547300635285
    },
    {
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "724146605fec5348",
        "text": "The sitemap includes the first paragraph of each page which the client uses for its search."
      },
      "after": "315f2d23a08504dd",
      "id": "724146605fec5348",
      "date": 1547300637747
    },
    {
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "5da464e501d71076",
        "text": "Try text editing the first paragraph of the welcome page."
      },
      "after": "724146605fec5348",
      "id": "5da464e501d71076",
      "date": 1547300640226
    },
    {
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "e67bd7d004223056",
        "text": "The client can see the new text, but not search."
      },
      "after": "5da464e501d71076",
      "id": "e67bd7d004223056",
      "date": 1547300643542
    },
    {
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "5f0c76a3554f75e3",
        "text": "Try deleting ~/.wiki/status/sitemap.json"
      },
      "after": "e67bd7d004223056",
      "id": "5f0c76a3554f75e3",
      "date": 1547300646512
    },
    {
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "b8d506a1bc0e706b",
        "text": "The client search will see the new text on reload."
      },
      "after": "5f0c76a3554f75e3",
      "id": "b8d506a1bc0e706b",
      "date": 1547300648953
    },
    {
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "c443f2b554d65eed",
        "text": "Find the sitemaps as stored in the client. Open the inspector, view the javascript console, and examine the wiki neighborhood global."
      },
      "after": "b8d506a1bc0e706b",
      "id": "c443f2b554d65eed",
      "date": 1547300652781
    },
    {
      "type": "add",
      "id": "d3d5a4f784141509",
      "item": {
        "type": "paragraph",
        "id": "d3d5a4f784141509",
        "text": "- http://fedwiki.org/sitemap.json"
      },
      "after": "315f2d23a08504dd",
      "date": 1547300755313
    },
    {
      "type": "edit",
      "id": "d3d5a4f784141509",
      "item": {
        "type": "markdown",
        "id": "d3d5a4f784141509",
        "text": "- http://fedwiki.org/sitemap.json"
      },
      "date": 1547300756542
    },
    {
      "type": "edit",
      "id": "d3d5a4f784141509",
      "item": {
        "type": "markdown",
        "id": "d3d5a4f784141509",
        "text": "- http://fedwiki.org/system/sitemap.json"
      },
      "date": 1547300975302
    },
    {
      "type": "edit",
      "id": "315f2d23a08504dd",
      "item": {
        "type": "paragraph",
        "id": "315f2d23a08504dd",
        "text": "The wiki server creates a sitemap.json file by scanning pages on startup and occasionally thereafter. "
      },
      "date": 1547301047024
    },
    {
      "type": "add",
      "id": "216440b9a175d4c3",
      "item": {
        "type": "paragraph",
        "id": "216440b9a175d4c3",
        "text": "If you delete the sitemap the server will recreate it when asked."
      },
      "after": "315f2d23a08504dd",
      "date": 1547301047226
    },
    {
      "type": "edit",
      "id": "315f2d23a08504dd",
      "item": {
        "type": "paragraph",
        "id": "315f2d23a08504dd",
        "text": "The wiki server creates a sitemap.json file by scanning pages on startup and occasionally thereafter. This json file is a indexed array with the following structure:"
      },
      "date": 1547301094773
    },
    {
      "type": "edit",
      "id": "315f2d23a08504dd",
      "item": {
        "type": "paragraph",
        "id": "315f2d23a08504dd",
        "text": "The wiki server creates a [[sitemap.json]] file by scanning pages on startup and occasionally thereafter. This json file is a indexed array with the following structure:"
      },
      "date": 1547301110070
    },
    {
      "item": {
        "type": "factory",
        "id": "07ed13e82ead131e"
      },
      "id": "07ed13e82ead131e",
      "type": "add",
      "after": "d0c2a501697dbc37",
      "date": 1547301152111
    },
    {
      "type": "move",
      "order": [
        "84babdb74c6aeac8",
        "489136259d2742b7",
        "315f2d23a08504dd",
        "07ed13e82ead131e",
        "216440b9a175d4c3",
        "d3d5a4f784141509",
        "724146605fec5348",
        "5da464e501d71076",
        "e67bd7d004223056",
        "5f0c76a3554f75e3",
        "b8d506a1bc0e706b",
        "c443f2b554d65eed",
        "4a2a2b2b-c6bd-4149-9bf8-74d767a69c06",
        "d0c2a501697dbc37"
      ],
      "id": "07ed13e82ead131e",
      "date": 1547301158561
    },
    {
      "type": "edit",
      "id": "07ed13e82ead131e",
      "item": {
        "type": "code",
        "id": "07ed13e82ead131e",
        "text": "[1]\n slug\n title\n date\n synopsis\n[2]\n ..."
      },
      "date": 1547301202554
    },
    {
      "type": "edit",
      "id": "84babdb74c6aeac8",
      "item": {
        "type": "markdown",
        "id": "84babdb74c6aeac8",
        "text": "A wiki-sitemap is a [[sitemap]] (or [[site map]]), that software int he federation (like the wiki-client) uses to find pages. It is used for things like [[Wiki Find]], and displaying [[Recent Changes]] and [[Twins]] of the current page. Federated wiki uses [[JSON]] rather than [[XML]] to make it fast to load and utilise in the browser. \n"
      },
      "date": 1547302200277
    },
    {
      "type": "add",
      "id": "bb876840f037a239",
      "item": {
        "type": "markdown",
        "id": "bb876840f037a239",
        "text": "- [[sitemap.json]]"
      },
      "after": "84babdb74c6aeac8",
      "date": 1547302204934
    },
    {
      "type": "remove",
      "id": "c443f2b554d65eed",
      "date": 1547302459798
    },
    {
      "type": "fork",
      "site": "search.fedwiki.org",
      "date": 1548548956193
    },
    {
      "type": "fork",
      "site": "fedwiki.org",
      "date": 1627578025264
    },
    {
      "type": "edit",
      "id": "84babdb74c6aeac8",
      "item": {
        "type": "markdown",
        "id": "84babdb74c6aeac8",
        "text": "A wiki-sitemap is a [[sitemap]] (or [[site map]]), that software in the federation (like the wiki-client) uses to find pages. It is used for things like [[Wiki Find]], and displaying [[Recent Changes]] and [[Twins]] of the current page. Federated wiki uses [[JSON]] rather than [[XML]] to make it fast to load and utilise in the browser. \n"
      },
      "date": 1640535038820
    },
    {
      "type": "edit",
      "id": "84babdb74c6aeac8",
      "item": {
        "type": "markdown",
        "id": "84babdb74c6aeac8",
        "text": "A wiki-sitemap is a [[Sitemap]] (or [[site map]]), that software in the federation (like the wiki-client) uses to find pages. It is used for things like [[Wiki Find]], and displaying [[Recent Changes]] and [[Twins]] of the current page. Federated wiki uses [[JSON]] rather than [[XML]] to make it fast to load and utilise in the browser. \n"
      },
      "date": 1678871375160
    },
    {
      "type": "edit",
      "id": "84babdb74c6aeac8",
      "item": {
        "type": "markdown",
        "id": "84babdb74c6aeac8",
        "text": "is a [[Sitemap]] (or site map), that software in the federation (like the wiki-client) uses to find pages. It is used for things like [[Wiki Find]], and displaying [[Recent Changes]] and [[Twins]] of the current page. Federated wiki uses [[JSON]] rather than [[XML]] to make it fast to load and utilise in the browser. \n"
      },
      "date": 1702050952283
    },
    {
      "id": "dc6b4e0315c97036",
      "type": "add",
      "item": {
        "type": "image",
        "id": "dc6b4e0315c97036",
        "text": "a Sitemap view",
        "size": "wide",
        "width": 430,
        "height": 268,
        "url": "/assets/plugins/image/bf2b2915ba3994bde1388af9cd396a00.jpg"
      },
      "after": "bb876840f037a239",
      "attribution": {
        "page": "2023-12-06"
      },
      "date": 1702051119094
    },
    {
      "type": "remove",
      "id": "bb876840f037a239",
      "date": 1702051146092
    },
    {
      "type": "remove",
      "id": "d3d5a4f784141509",
      "date": 1702051190571
    },
    {
      "type": "edit",
      "id": "84babdb74c6aeac8",
      "item": {
        "type": "markdown",
        "id": "84babdb74c6aeac8",
        "text": "is a [[Sitemap]] (or site map), that software in the federation (like the wiki-client) uses to find pages."
      },
      "date": 1702051330298
    },
    {
      "type": "add",
      "id": "5beb9fcec61d16f1",
      "item": {
        "type": "markdown",
        "id": "5beb9fcec61d16f1",
        "text": "It is used for things like [[Wiki Find]], and displaying [[Recent Changes]] and [[Twins]] of the current page. Federated wiki uses [[JSON]] rather than [[XML]] to make it fast to load and utilise in the browser."
      },
      "after": "84babdb74c6aeac8",
      "date": 1702051331660
    },
    {
      "type": "fork",
      "site": "wiki.ralfbarkow.ch",
      "date": 1702051359528
    },
    {
      "type": "edit",
      "id": "d0c2a501697dbc37",
      "item": {
        "type": "markdown",
        "id": "d0c2a501697dbc37",
        "text": "- [[Federation Directory]]\n- [[Current Sitemaps]]\n- [[Sitemap Scrape Statistics]]\n- [[Ruby Sitemap Scrape]]\n- [[Sitemap Scrape Improvements]]\n- [[Crawl Errors]]\n- [[Wiki Scrape]]\n- [[Fedwiki Search]]\n- [[Future Search]]\n- [[Dependencies Map]]"
      },
      "date": 1702051804828
    }
  ]
}