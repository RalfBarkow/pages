{
  "title": "ContractVersion",
  "story": [
    {
      "type": "code",
      "id": "4f7530e126b4d54a",
      "text": "ContractVersion\n Superclass: Object\n Instance variables: pay date"
    },
    {
      "type": "paragraph",
      "id": "89ac3fd305aceb91",
      "text": "Using [[Time Travel]], we can refactor the naïve test case [⇒ [[testNaivePayToday]]] into one that can remember changing pay rates [⇒ [[testPayToday]] ⇒ [[testPayLastMonth]]]."
    },
    {
      "type": "paragraph",
      "id": "eb26c8b5616040b7",
      "text": "For now we can use simple Dates as the lookup key.\n"
    },
    {
      "type": "code",
      "id": "5ab5bbc30ff71a6b",
      "text": "NavigationTest>>testPayToday\n| contract version |\ncontract := Contract new.\nversion := ContractVersion pay: 1000.\ncontract versionAt: '2/1/99' asDate put: version.\nself assert: (contract versionAt: '2/1/99' asDate) pay = 1000\n"
    },
    {
      "type": "paragraph",
      "id": "073d2b3d7a8ef3a6",
      "text": "To make this test case run, first we create [[Contract]] (the History part of our Time Travel):"
    },
    {
      "type": "code",
      "id": "5880907b3d942c48",
      "text": "Contract\nSuperclass: Object\nInstance variables: versions\n"
    },
    {
      "type": "markdown",
      "id": "55a2483fa63cada8",
      "text": "Now we can define the [[ContractVersion]] (we omit the Constructor Method #pay:)"
    },
    {
      "type": "code",
      "id": "a1e61f94ed2d8f7b",
      "text": "ContractVersion\nSuperclass: Object\nInstance variables: pay date"
    },
    {
      "type": "markdown",
      "id": "178c8aae245854d2",
      "text": "With this in place, we can implement the two visible methods in Contract- #versionAt:put: and #[[versionAt:]]. \n"
    },
    {
      "type": "markdown",
      "id": "3d7db165bc8a9ddc",
      "text": "⇒ [[versionAt:]]"
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "ContractVersion",
        "story": []
      },
      "date": 1654322139127
    },
    {
      "item": {
        "type": "factory",
        "id": "2c15c809ee15734d"
      },
      "id": "2c15c809ee15734d",
      "type": "add",
      "date": 1654322140555
    },
    {
      "type": "edit",
      "id": "2c15c809ee15734d",
      "item": {
        "type": "paragraph",
        "id": "2c15c809ee15734d",
        "text": "[[testPayLastMonth]]"
      },
      "date": 1654322144448
    },
    {
      "item": {
        "type": "paragraph",
        "id": "89ac3fd305aceb91",
        "text": "Using [[Time Travel]], we can refactor the naïve test case into one that can remember changing pay rates."
      },
      "id": "89ac3fd305aceb91",
      "type": "add",
      "after": "2c15c809ee15734d",
      "date": 1654322983322
    },
    {
      "type": "edit",
      "id": "89ac3fd305aceb91",
      "item": {
        "type": "paragraph",
        "id": "89ac3fd305aceb91",
        "text": "Using [[Time Travel]], we can refactor the naïve test case into one that can remember changing pay rates."
      },
      "date": 1654322987373
    },
    {
      "type": "edit",
      "id": "89ac3fd305aceb91",
      "item": {
        "type": "paragraph",
        "id": "89ac3fd305aceb91",
        "text": "Using [[Time Travel]], we can refactor the naïve test case into one that can remember changing pay rates."
      },
      "date": 1654323003198
    },
    {
      "type": "edit",
      "id": "89ac3fd305aceb91",
      "item": {
        "type": "paragraph",
        "id": "89ac3fd305aceb91",
        "text": "Using [[Time Travel]], we can refactor the naïve test case into one that can remember changing pay rates."
      },
      "date": 1654323008224
    },
    {
      "type": "add",
      "id": "eb26c8b5616040b7",
      "item": {
        "type": "paragraph",
        "id": "eb26c8b5616040b7",
        "text": "For now we can use simple Dates as the lookup key.\n"
      },
      "after": "89ac3fd305aceb91",
      "date": 1654323009989
    },
    {
      "type": "add",
      "id": "85ba03c18c041b3e",
      "item": {
        "type": "paragraph",
        "id": "85ba03c18c041b3e",
        "text": ""
      },
      "after": "eb26c8b5616040b7",
      "date": 1654323011951
    },
    {
      "item": {
        "type": "code",
        "id": "5ab5bbc30ff71a6b",
        "text": "NavigationTest>>testPayToday\n| contract version |\ncontract := Contract new.\nversion := ContractVersion pay: 1000.\ncontract versionAt: '2/1/99' asDate put: version.\nself assert: (contract versionAt: '2/1/99' asDate) pay = 1000\n"
      },
      "id": "5ab5bbc30ff71a6b",
      "type": "add",
      "after": "073d2b3d7a8ef3a6",
      "date": 1654323015306
    },
    {
      "id": "5ab5bbc30ff71a6b",
      "type": "move",
      "order": [
        "2c15c809ee15734d",
        "89ac3fd305aceb91",
        "eb26c8b5616040b7",
        "5ab5bbc30ff71a6b",
        "85ba03c18c041b3e",
        "073d2b3d7a8ef3a6"
      ],
      "date": 1654323017516,
      "error": {
        "type": "error",
        "msg": "Internal Server Error",
        "response": "Server Ignoring move. Try reload."
      }
    },
    {
      "type": "add",
      "id": "073d2b3d7a8ef3a6",
      "item": {
        "type": "paragraph",
        "id": "073d2b3d7a8ef3a6",
        "text": "To make this test case run, first we create Contract (the History part of our Time Travel):\nContract\nSuperclass: Object\nInstance variables: versions\nNow we can define the ContractVersion (we omit the Constructor Method #pay:)\nContractVersion\nSuperclass: Object\nInstance variables: pay date\nWith this in place, we can implement the two visible methods in Contract- #versionAt:put: and\n#versionAt:. (In some cases you will want to make a Safe Copy of the Version before you store it, but\nwe are just careful not to modify a Version after we have stored it in a History.)\nContract>>versionAt: aDate put: aVersion\naVersion date: aDate.\nself versions add: aVersion"
      },
      "after": "85ba03c18c041b3e",
      "date": 1654323018534
    },
    {
      "type": "remove",
      "id": "85ba03c18c041b3e",
      "date": 1654323022092
    },
    {
      "type": "edit",
      "id": "5ab5bbc30ff71a6b",
      "item": {
        "type": "code",
        "id": "5ab5bbc30ff71a6b",
        "text": "NavigationTest>>testPayToday\n| contract version |\ncontract := Contract new.\nversion := ContractVersion pay: 1000.\ncontract versionAt: '2/1/99' asDate put: version.\nself assert: (contract versionAt: '2/1/99' asDate) pay = 1000\n"
      },
      "date": 1654323023201
    },
    {
      "type": "fork",
      "date": 1654323025985
    },
    {
      "type": "edit",
      "id": "073d2b3d7a8ef3a6",
      "item": {
        "type": "paragraph",
        "id": "073d2b3d7a8ef3a6",
        "text": "To make this test case run, first we create Contract (the History part of our Time Travel):"
      },
      "date": 1654323056807
    },
    {
      "type": "add",
      "id": "5657ee12abba355b",
      "item": {
        "type": "paragraph",
        "id": "5657ee12abba355b",
        "text": "Contract\nSuperclass: Object\nInstance variables: versions\n"
      },
      "after": "073d2b3d7a8ef3a6",
      "date": 1654323058389
    },
    {
      "item": {
        "type": "factory",
        "id": "a37bf7856419cff8"
      },
      "id": "a37bf7856419cff8",
      "type": "add",
      "after": "55a2483fa63cada8",
      "date": 1654323062173
    },
    {
      "type": "add",
      "id": "55a2483fa63cada8",
      "item": {
        "type": "paragraph",
        "id": "55a2483fa63cada8",
        "text": "Now we can define the ContractVersion (we omit the Constructor Method #pay:)\nContractVersion\nSuperclass: Object\nInstance variables: pay date\nWith this in place, we can implement the two visible methods in Contract- #versionAt:put: and\n#versionAt:. (In some cases you will want to make a Safe Copy of the Version before you store it, but\nwe are just careful not to modify a Version after we have stored it in a History.)\nContract>>versionAt: aDate put: aVersion\naVersion date: aDate.\nself versions add: aVersion"
      },
      "after": "5657ee12abba355b",
      "date": 1654323063688
    },
    {
      "type": "remove",
      "id": "a37bf7856419cff8",
      "date": 1654323065783
    },
    {
      "item": {
        "type": "factory",
        "id": "5880907b3d942c48"
      },
      "id": "5880907b3d942c48",
      "type": "add",
      "after": "55a2483fa63cada8",
      "date": 1654323067226
    },
    {
      "id": "5880907b3d942c48",
      "type": "move",
      "order": [
        "2c15c809ee15734d",
        "89ac3fd305aceb91",
        "eb26c8b5616040b7",
        "5ab5bbc30ff71a6b",
        "073d2b3d7a8ef3a6",
        "5657ee12abba355b",
        "5880907b3d942c48",
        "55a2483fa63cada8"
      ],
      "date": 1654323070197
    },
    {
      "type": "remove",
      "id": "5657ee12abba355b",
      "date": 1654323075484
    },
    {
      "type": "edit",
      "id": "5880907b3d942c48",
      "item": {
        "type": "code",
        "id": "5880907b3d942c48",
        "text": "Contract\nSuperclass: Object\nInstance variables: versions\n"
      },
      "date": 1654323076660
    },
    {
      "type": "edit",
      "id": "073d2b3d7a8ef3a6",
      "item": {
        "type": "paragraph",
        "id": "073d2b3d7a8ef3a6",
        "text": "To make this test case run, first we create [[Contract]] (the History part of our Time Travel):"
      },
      "date": 1654323089477
    },
    {
      "type": "fork",
      "date": 1654323145268
    },
    {
      "id": "4f7530e126b4d54a",
      "type": "add",
      "item": {
        "type": "code",
        "id": "4f7530e126b4d54a",
        "text": "ContractVersion\n Superclass: Object\n Instance variables: pay date"
      },
      "date": 1654437044788
    },
    {
      "type": "edit",
      "id": "2c15c809ee15734d",
      "item": {
        "type": "paragraph",
        "id": "2c15c809ee15734d",
        "text": "⇒ [[testPayLastMonth]]"
      },
      "date": 1654612702821
    },
    {
      "type": "fork",
      "date": 1654612748445
    },
    {
      "type": "edit",
      "id": "55a2483fa63cada8",
      "item": {
        "type": "markdown",
        "id": "55a2483fa63cada8",
        "text": "Now we can define the ContractVersion (we omit the Constructor Method #pay:)"
      },
      "date": 1654612806896
    },
    {
      "item": {
        "type": "code",
        "id": "a1e61f94ed2d8f7b",
        "text": "ContractVersion\nSuperclass: Object\nInstance variables: pay date"
      },
      "id": "a1e61f94ed2d8f7b",
      "type": "add",
      "after": "55a2483fa63cada8",
      "date": 1654612872722
    },
    {
      "id": "a1e61f94ed2d8f7b",
      "type": "move",
      "order": [
        "4f7530e126b4d54a",
        "2c15c809ee15734d",
        "89ac3fd305aceb91",
        "eb26c8b5616040b7",
        "5ab5bbc30ff71a6b",
        "073d2b3d7a8ef3a6",
        "5880907b3d942c48",
        "a1e61f94ed2d8f7b",
        "55a2483fa63cada8"
      ],
      "date": 1654612875887
    },
    {
      "type": "edit",
      "id": "55a2483fa63cada8",
      "item": {
        "type": "markdown",
        "id": "55a2483fa63cada8",
        "text": "Now we can define the ContractVersion (we omit the Constructor Method #pay:)"
      },
      "date": 1654612883052
    },
    {
      "id": "a1e61f94ed2d8f7b",
      "type": "move",
      "order": [
        "4f7530e126b4d54a",
        "2c15c809ee15734d",
        "89ac3fd305aceb91",
        "eb26c8b5616040b7",
        "5ab5bbc30ff71a6b",
        "073d2b3d7a8ef3a6",
        "5880907b3d942c48",
        "55a2483fa63cada8",
        "a1e61f94ed2d8f7b",
        "178c8aae245854d2"
      ],
      "date": 1654612885371,
      "error": {
        "type": "error",
        "msg": "",
        "response": "Server Ignoring move. Try reload."
      }
    },
    {
      "type": "add",
      "id": "178c8aae245854d2",
      "item": {
        "type": "markdown",
        "id": "178c8aae245854d2",
        "text": "\n\nWith this in place, we can implement the two visible methods in Contract- #versionAt:put: and\n#versionAt:. (In some cases you will want to make a Safe Copy of the Version before you store it, but\nwe are just careful not to modify a Version after we have stored it in a History.)\nContract>>versionAt: aDate put: aVersion\naVersion date: aDate.\nself versions add: aVersion"
      },
      "after": "55a2483fa63cada8",
      "date": 1654612890976
    },
    {
      "type": "edit",
      "id": "a1e61f94ed2d8f7b",
      "item": {
        "type": "code",
        "id": "a1e61f94ed2d8f7b",
        "text": "ContractVersion\nSuperclass: Object\nInstance variables: pay date"
      },
      "date": 1654612891824
    },
    {
      "type": "fork",
      "date": 1654612903439
    },
    {
      "type": "edit",
      "id": "178c8aae245854d2",
      "item": {
        "type": "markdown",
        "id": "178c8aae245854d2",
        "text": "\nWith this in place, we can implement the two visible methods in Contract- #versionAt:put: and\n#[[versionAt:]]. (In some cases you will want to make a Safe Copy of the Version before you store it, but\nwe are just careful not to modify a Version after we have stored it in a History.)\nContract>>versionAt: aDate put: aVersion\naVersion date: aDate.\nself versions add: aVersion"
      },
      "date": 1654612914572
    },
    {
      "type": "edit",
      "id": "178c8aae245854d2",
      "item": {
        "type": "markdown",
        "id": "178c8aae245854d2",
        "text": "With this in place, we can implement the two visible methods in Contract- #versionAt:put: and #[[versionAt:]]. (In some cases you will want to make a Safe Copy of the Version before you store it, but\nwe are just careful not to modify a Version after we have stored it in a History.)\nContract>>versionAt: aDate put: aVersion\naVersion date: aDate.\nself versions add: aVersion"
      },
      "date": 1654612938195
    },
    {
      "type": "edit",
      "id": "178c8aae245854d2",
      "item": {
        "type": "markdown",
        "id": "178c8aae245854d2",
        "text": "With this in place, we can implement the two visible methods in Contract- #versionAt:put: and #[[versionAt:]]. "
      },
      "date": 1654612943988
    },
    {
      "type": "edit",
      "id": "178c8aae245854d2",
      "item": {
        "type": "markdown",
        "id": "178c8aae245854d2",
        "text": "With this in place, we can implement the two visible methods in Contract- #versionAt:put: and #[[versionAt:]]. \n"
      },
      "date": 1654612957144
    },
    {
      "type": "add",
      "id": "3d7db165bc8a9ddc",
      "item": {
        "type": "markdown",
        "id": "3d7db165bc8a9ddc",
        "text": "⇒ [[versionAt:]]"
      },
      "after": "178c8aae245854d2",
      "date": 1654612963182
    },
    {
      "type": "edit",
      "id": "89ac3fd305aceb91",
      "item": {
        "type": "paragraph",
        "id": "89ac3fd305aceb91",
        "text": "Using [[Time Travel]], we can refactor the naïve test case [⇒ [[testNaivePayToday]]] into one that can remember changing pay rates."
      },
      "date": 1654613049584
    },
    {
      "type": "remove",
      "id": "2c15c809ee15734d",
      "date": 1654613128266
    },
    {
      "type": "edit",
      "id": "89ac3fd305aceb91",
      "item": {
        "type": "paragraph",
        "id": "89ac3fd305aceb91",
        "text": "Using [[Time Travel]], we can refactor the naïve test case [⇒ [[testNaivePayToday]]] into one that can remember changing pay rates [⇒ [[testPayLastMonth]]]."
      },
      "date": 1654613140005
    },
    {
      "type": "edit",
      "id": "89ac3fd305aceb91",
      "item": {
        "type": "paragraph",
        "id": "89ac3fd305aceb91",
        "text": "Using [[Time Travel]], we can refactor the naïve test case [⇒ [[testNaivePayToday]]] into one that can remember changing pay rates [⇒ [[testPayToday]]]."
      },
      "date": 1654613266723
    },
    {
      "type": "edit",
      "id": "89ac3fd305aceb91",
      "item": {
        "type": "paragraph",
        "id": "89ac3fd305aceb91",
        "text": "Using [[Time Travel]], we can refactor the naïve test case [⇒ [[testNaivePayToday]]] into one that can remember changing pay rates [⇒ [[testPayToday]] ⇒ [[testPayLastMonth]]]."
      },
      "date": 1654613311877
    },
    {
      "type": "fork",
      "date": 1654613456113
    },
    {
      "type": "edit",
      "id": "55a2483fa63cada8",
      "item": {
        "type": "markdown",
        "id": "55a2483fa63cada8",
        "text": "Now we can define the [[ContractVersion]] (we omit the Constructor Method #pay:)"
      },
      "date": 1654613511867
    },
    {
      "id": "a1e61f94ed2d8f7b",
      "type": "move",
      "order": [
        "4f7530e126b4d54a",
        "89ac3fd305aceb91",
        "eb26c8b5616040b7",
        "5ab5bbc30ff71a6b",
        "073d2b3d7a8ef3a6",
        "5880907b3d942c48",
        "55a2483fa63cada8",
        "a1e61f94ed2d8f7b",
        "178c8aae245854d2",
        "3d7db165bc8a9ddc"
      ],
      "date": 1654613531942
    }
  ]
}