{
  "title": "ellipse-proximity",
  "story": [
    {
      "type": "paragraph",
      "id": "4b3caa8cc6a34cb9",
      "text": "⇒ [[Closest Points on Ellipses]]"
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "ellipse-proximity",
        "story": []
      },
      "date": 1678774192077
    },
    {
      "id": "49cbc9e1e10bd3a7",
      "type": "add",
      "item": {
        "type": "code",
        "id": "49cbc9e1e10bd3a7",
        "text": "import { closestPointEllipse } from \"@thi.ng/geom-closest-point\";\nimport { $compile } from \"@thi.ng/rdom\";\nimport { $canvas } from \"@thi.ng/rdom-canvas\";\nimport { merge, reactive } from \"@thi.ng/rstream\";\nimport { gestureStream } from \"@thi.ng/rstream-gestures\";\nimport { mapcat, repeatedly } from \"@thi.ng/transducers\";\nimport { add2, normalCCW, random2 } from \"@thi.ng/vectors\";\nconst W = 600;\n// define random ellipses ([origin, radius] tuples)\nconst ELLIPSES = [\n    ...repeatedly(() => [random2([], 50, W - 50), random2([], 10, W / 2)], 5),\n];\n// compile & mount reactive canvas component\n$compile($canvas(\n// stream merge\nmerge({\n    src: [\n        // #1 initial call to action...\n        reactive([\n            \"g\",\n            {},\n            [\n                \"text\",\n                { align: \"center\", fill: \"black\" },\n                [W / 2, W / 2],\n                \"Move your mouse / finger!\",\n            ],\n        ]),\n        // #2 stream of mouse/touch coordinates (main)\n        gestureStream(document.body).map((e) => [\n            \"g\",\n            // disable canvas clearing if no mouse buttons pressed\n            { fill: \"none\", __clear: !!e.buttons },\n            // semi-transparent white rect to fade previous frame\n            [\"rect\", { fill: [1, 1, 1, 0.2] }, [0, 0], W, W],\n            // declare ellipses, closest points and tangents\n            ...mapcat(([o, r]) => {\n                const p = closestPointEllipse(e.pos, o, r);\n                return [\n                    [\"ellipse\", { stroke: \"#ccc\" }, o, r],\n                    [\"circle\", { stroke: \"#f0f\" }, p, 5],\n                    [\"line\", { stroke: \"#666\" }, e.pos, p],\n                    [\n                        \"line\",\n                        { stroke: \"#6c0\" },\n                        p,\n                        add2(null, normalCCW([], p, e.pos, 100), p),\n                    ],\n                ];\n            }, ELLIPSES),\n        ]),\n    ],\n}), [W, W])).mount(document.getElementById(\"app\"));"
      },
      "attribution": {
        "page": "2023-03-14"
      },
      "date": 1678774195046
    },
    {
      "id": "5396a0b4e33715c0",
      "type": "add",
      "item": {
        "type": "frame",
        "id": "5396a0b4e33715c0",
        "text": "//wiki.ralfbarkow.ch/assets/pages/js-snippet-template/importjs.html\nHEIGHT 256"
      },
      "after": "49cbc9e1e10bd3a7",
      "attribution": {
        "page": "geom-fuzz-basics"
      },
      "date": 1678774236823
    },
    {
      "item": {
        "type": "factory",
        "id": "6e15ffd2751a2b1e"
      },
      "id": "6e15ffd2751a2b1e",
      "type": "add",
      "after": "5396a0b4e33715c0",
      "date": 1678774258630
    },
    {
      "type": "edit",
      "id": "49cbc9e1e10bd3a7",
      "item": {
        "type": "code",
        "id": "49cbc9e1e10bd3a7",
        "text": "import { closestPointEllipse } from \"@thi.ng/geom-closest-point\";\nimport { $compile } from \"@thi.ng/rdom\";\nimport { $canvas } from \"@thi.ng/rdom-canvas\";\nimport { merge, reactive } from \"@thi.ng/rstream\";\nimport { gestureStream } from \"@thi.ng/rstream-gestures\";\nimport { mapcat, repeatedly } from \"@thi.ng/transducers\";\nimport { add2, normalCCW, random2 } from \"@thi.ng/vectors\";\n"
      },
      "date": 1678774259853
    },
    {
      "type": "edit",
      "id": "6e15ffd2751a2b1e",
      "item": {
        "type": "code",
        "id": "6e15ffd2751a2b1e",
        "text": "const W = 600;\n// define random ellipses ([origin, radius] tuples)\nconst ELLIPSES = [\n    ...repeatedly(() => [random2([], 50, W - 50), random2([], 10, W / 2)], 5),\n];\n// compile & mount reactive canvas component\n$compile($canvas(\n// stream merge\nmerge({\n    src: [\n        // #1 initial call to action...\n        reactive([\n            \"g\",\n            {},\n            [\n                \"text\",\n                { align: \"center\", fill: \"black\" },\n                [W / 2, W / 2],\n                \"Move your mouse / finger!\",\n            ],\n        ]),\n        // #2 stream of mouse/touch coordinates (main)\n        gestureStream(document.body).map((e) => [\n            \"g\",\n            // disable canvas clearing if no mouse buttons pressed\n            { fill: \"none\", __clear: !!e.buttons },\n            // semi-transparent white rect to fade previous frame\n            [\"rect\", { fill: [1, 1, 1, 0.2] }, [0, 0], W, W],\n            // declare ellipses, closest points and tangents\n            ...mapcat(([o, r]) => {\n                const p = closestPointEllipse(e.pos, o, r);\n                return [\n                    [\"ellipse\", { stroke: \"#ccc\" }, o, r],\n                    [\"circle\", { stroke: \"#f0f\" }, p, 5],\n                    [\"line\", { stroke: \"#666\" }, e.pos, p],\n                    [\n                        \"line\",\n                        { stroke: \"#6c0\" },\n                        p,\n                        add2(null, normalCCW([], p, e.pos, 100), p),\n                    ],\n                ];\n            }, ELLIPSES),\n        ]),\n    ],\n}), [W, W])).mount(document.getElementById(\"app\"));"
      },
      "date": 1678774260759
    },
    {
      "type": "edit",
      "id": "49cbc9e1e10bd3a7",
      "item": {
        "type": "code",
        "id": "49cbc9e1e10bd3a7",
        "text": "import { closestPointEllipse } from \"https://cdn.skypack.dev/@thi.ng/geom-closest-point\";\nimport { $compile } from \"https://cdn.skypack.dev/@thi.ng/rdom\";\nimport { $canvas } from \"https://cdn.skypack.dev/@thi.ng/rdom-canvas\";\nimport { merge, reactive } from \"https://cdn.skypack.dev/@thi.ng/rstream\";\nimport { gestureStream } from \"https://cdn.skypack.dev/@thi.ng/rstream-gestures\";\nimport { mapcat, repeatedly } from \"https://cdn.skypack.dev/@thi.ng/transducers\";\nimport { add2, normalCCW, random2 } from \"https://cdn.skypack.dev/@thi.ng/vectors\";\n"
      },
      "date": 1678774290378
    },
    {
      "item": {
        "type": "factory",
        "id": "17d726d886f8e531"
      },
      "id": "17d726d886f8e531",
      "type": "add",
      "after": "6e15ffd2751a2b1e",
      "date": 1678774432414
    },
    {
      "type": "edit",
      "id": "17d726d886f8e531",
      "item": {
        "type": "paragraph",
        "id": "17d726d886f8e531",
        "text": "https://github.com/thi-ng/umbrella/tree/develop/examples/ellipse-proximity#ellipse-proximity github"
      },
      "date": 1678774436530
    },
    {
      "id": "17d726d886f8e531",
      "type": "move",
      "order": [
        "17d726d886f8e531",
        "49cbc9e1e10bd3a7",
        "5396a0b4e33715c0",
        "6e15ffd2751a2b1e"
      ],
      "date": 1678774442276
    },
    {
      "item": {
        "type": "factory",
        "id": "db3abc3cdb1e15a2"
      },
      "id": "db3abc3cdb1e15a2",
      "type": "add",
      "after": "6e15ffd2751a2b1e",
      "date": 1678774450034
    },
    {
      "id": "db3abc3cdb1e15a2",
      "type": "move",
      "order": [
        "17d726d886f8e531",
        "db3abc3cdb1e15a2",
        "49cbc9e1e10bd3a7",
        "5396a0b4e33715c0",
        "6e15ffd2751a2b1e"
      ],
      "date": 1678774456161
    },
    {
      "type": "edit",
      "id": "db3abc3cdb1e15a2",
      "item": {
        "type": "html",
        "id": "db3abc3cdb1e15a2",
        "text": "<img\n  src=\"https://raw.githubusercontent.com/thi-ng/umbrella/develop/assets/examples/ellipse-proximity.png\"\n  width=\"100%\"\n>"
      },
      "date": 1678774474138
    },
    {
      "type": "edit",
      "id": "17d726d886f8e531",
      "item": {
        "type": "paragraph",
        "id": "17d726d886f8e531",
        "text": "Interactive visualization of closest points on ellipses [https://github.com/thi-ng/umbrella/tree/develop/examples/ellipse-proximity#ellipse-proximity github]"
      },
      "date": 1678774513632
    },
    {
      "type": "edit",
      "id": "17d726d886f8e531",
      "item": {
        "type": "paragraph",
        "id": "17d726d886f8e531",
        "text": "Interactive visualization of closest points on ellipses [https://github.com/thi-ng/umbrella/tree/develop/examples/ellipse-proximity#ellipse-proximity github], [https://github.com/thi-ng/umbrella/blob/8ab2cbfe2f59b7ef672b6e1cf2a43368f8437ddf/packages/rdom/README.md#usage-examples github]"
      },
      "date": 1678775205313
    },
    {
      "type": "edit",
      "id": "6e15ffd2751a2b1e",
      "item": {
        "type": "code",
        "id": "6e15ffd2751a2b1e",
        "text": "const W = 600;\n// define random ellipses ([origin, radius] tuples)\nconst ELLIPSES = [\n    ...repeatedly(() => [random2([], 50, W - 50), random2([], 10, W / 2)], 5),\n];\n// compile & mount reactive canvas component\n$compile($canvas(\n// stream merge\nmerge({\n    src: [\n        // #1 initial call to action...\n        reactive([\n            \"g\",\n            {},\n            [\n                \"text\",\n                { align: \"center\", fill: \"black\" },\n                [W / 2, W / 2],\n                \"Move your mouse / finger!\",\n            ],\n        ]),\n        // #2 stream of mouse/touch coordinates (main)\n        gestureStream(document.body).map((e) => [\n            \"g\",\n            // disable canvas clearing if no mouse buttons pressed\n            { fill: \"none\", __clear: !!e.buttons },\n            // semi-transparent white rect to fade previous frame\n            [\"rect\", { fill: [1, 1, 1, 0.2] }, [0, 0], W, W],\n            // declare ellipses, closest points and tangents\n            ...mapcat(([o, r]) => {\n                const p = closestPointEllipse(e.pos, o, r);\n                return [\n                    [\"ellipse\", { stroke: \"#ccc\" }, o, r],\n                    [\"circle\", { stroke: \"#f0f\" }, p, 5],\n                    [\"line\", { stroke: \"#666\" }, e.pos, p],\n                    [\n                        \"line\",\n                        { stroke: \"#6c0\" },\n                        p,\n                        add2(null, normalCCW([], p, e.pos, 100), p),\n                    ],\n                ];\n            }, ELLIPSES),\n        ]),\n    ],\n}), [W, W])).mount(document.getElementById(\"output\"));"
      },
      "date": 1678776204982
    },
    {
      "type": "remove",
      "id": "db3abc3cdb1e15a2",
      "date": 1678776250381
    },
    {
      "item": {
        "type": "factory",
        "id": "a328b59029ece579"
      },
      "id": "a328b59029ece579",
      "type": "add",
      "after": "6e15ffd2751a2b1e",
      "date": 1678776631895
    },
    {
      "type": "edit",
      "id": "6e15ffd2751a2b1e",
      "item": {
        "type": "code",
        "id": "6e15ffd2751a2b1e",
        "text": "const W = 600;\n// define random ellipses ([origin, radius] tuples)\nconst ELLIPSES = [\n    ...repeatedly(() => [random2([], 50, W - 50), random2([], 10, W / 2)], 5),\n];\n"
      },
      "date": 1678776644066
    },
    {
      "type": "edit",
      "id": "a328b59029ece579",
      "item": {
        "type": "code",
        "id": "a328b59029ece579",
        "text": "// compile & mount reactive canvas component\n$compile($canvas(\n// stream merge\nmerge({\n    src: [\n        // #1 initial call to action...\n        reactive([\n            \"g\",\n            {},\n            [\n                \"text\",\n                { align: \"center\", fill: \"black\" },\n                [W / 2, W / 2],\n                \"Move your mouse / finger!\",\n            ],\n        ]),\n        // #2 stream of mouse/touch coordinates (main)\n        gestureStream(document.body).map((e) => [\n            \"g\",\n            // disable canvas clearing if no mouse buttons pressed\n            { fill: \"none\", __clear: !!e.buttons },\n            // semi-transparent white rect to fade previous frame\n            [\"rect\", { fill: [1, 1, 1, 0.2] }, [0, 0], W, W],\n            // declare ellipses, closest points and tangents\n            ...mapcat(([o, r]) => {\n                const p = closestPointEllipse(e.pos, o, r);\n                return [\n                    [\"ellipse\", { stroke: \"#ccc\" }, o, r],\n                    [\"circle\", { stroke: \"#f0f\" }, p, 5],\n                    [\"line\", { stroke: \"#666\" }, e.pos, p],\n                    [\n                        \"line\",\n                        { stroke: \"#6c0\" },\n                        p,\n                        add2(null, normalCCW([], p, e.pos, 100), p),\n                    ],\n                ];\n            }, ELLIPSES),\n        ]),\n    ],\n}), [W, W])).mount(document.getElementById(\"output\"));"
      },
      "date": 1678776645049
    },
    {
      "item": {
        "type": "factory",
        "id": "f73048d74de4e1b1"
      },
      "id": "f73048d74de4e1b1",
      "type": "add",
      "after": "a328b59029ece579",
      "date": 1678776975939
    },
    {
      "type": "edit",
      "id": "f73048d74de4e1b1",
      "item": {
        "type": "paragraph",
        "id": "f73048d74de4e1b1",
        "text": "compile & mount reactive canvas component\n$compile($canvas("
      },
      "date": 1678776978177
    },
    {
      "id": "f73048d74de4e1b1",
      "type": "move",
      "order": [
        "17d726d886f8e531",
        "49cbc9e1e10bd3a7",
        "5396a0b4e33715c0",
        "6e15ffd2751a2b1e",
        "f73048d74de4e1b1",
        "a328b59029ece579"
      ],
      "date": 1678776982208
    },
    {
      "type": "edit",
      "id": "f73048d74de4e1b1",
      "item": {
        "type": "paragraph",
        "id": "f73048d74de4e1b1",
        "text": "Compile & mount reactive canvas component:\n"
      },
      "date": 1678776999311
    },
    {
      "type": "edit",
      "id": "a328b59029ece579",
      "item": {
        "type": "code",
        "id": "a328b59029ece579",
        "text": "$compile($canvas(\n// stream merge\nmerge({\n    src: [\n        // #1 initial call to action...\n        reactive([\n            \"g\",\n            {},\n            [\n                \"text\",\n                { align: \"center\", fill: \"black\" },\n                [W / 2, W / 2],\n                \"Move your mouse / finger!\",\n            ],\n        ]),\n        // #2 stream of mouse/touch coordinates (main)\n        gestureStream(document.body).map((e) => [\n            \"g\",\n            // disable canvas clearing if no mouse buttons pressed\n            { fill: \"none\", __clear: !!e.buttons },\n            // semi-transparent white rect to fade previous frame\n            [\"rect\", { fill: [1, 1, 1, 0.2] }, [0, 0], W, W],\n            // declare ellipses, closest points and tangents\n            ...mapcat(([o, r]) => {\n                const p = closestPointEllipse(e.pos, o, r);\n                return [\n                    [\"ellipse\", { stroke: \"#ccc\" }, o, r],\n                    [\"circle\", { stroke: \"#f0f\" }, p, 5],\n                    [\"line\", { stroke: \"#666\" }, e.pos, p],\n                    [\n                        \"line\",\n                        { stroke: \"#6c0\" },\n                        p,\n                        add2(null, normalCCW([], p, e.pos, 100), p),\n                    ],\n                ];\n            }, ELLIPSES),\n        ]),\n    ],\n}), [W, W])).mount(document.getElementById(\"output\"));"
      },
      "date": 1678777003557
    },
    {
      "type": "add",
      "id": "fa1561eadf808a62",
      "item": {
        "type": "paragraph",
        "id": "fa1561eadf808a62",
        "text": "Wiki Javascript Snippet Runner:"
      },
      "after": "17d726d886f8e531",
      "date": 1678780176111
    },
    {
      "id": "fa1561eadf808a62",
      "type": "move",
      "order": [
        "17d726d886f8e531",
        "49cbc9e1e10bd3a7",
        "fa1561eadf808a62",
        "5396a0b4e33715c0",
        "6e15ffd2751a2b1e",
        "f73048d74de4e1b1",
        "a328b59029ece579"
      ],
      "date": 1678780178494
    },
    {
      "type": "add",
      "id": "eca6b531db04236f",
      "item": {
        "type": "paragraph",
        "id": "eca6b531db04236f",
        "text": "[[Static Import Snippet]]"
      },
      "after": "17d726d886f8e531",
      "date": 1678780250203
    },
    {
      "type": "remove",
      "id": "eca6b531db04236f",
      "date": 1678780255555
    },
    {
      "type": "edit",
      "id": "fa1561eadf808a62",
      "item": {
        "type": "paragraph",
        "id": "fa1561eadf808a62",
        "text": "Wiki Javascript Snippet Runner: [[[Static Import Snippet]]]"
      },
      "date": 1678780269379
    },
    {
      "type": "edit",
      "id": "fa1561eadf808a62",
      "item": {
        "type": "paragraph",
        "id": "fa1561eadf808a62",
        "text": "Wiki Javascript Snippet Runner: [⇒ [[Static Import Snippet]]]"
      },
      "date": 1678780284012
    },
    {
      "type": "edit",
      "id": "fa1561eadf808a62",
      "item": {
        "type": "paragraph",
        "id": "fa1561eadf808a62",
        "text": "Wiki [[JavaScript]] Snippet Runner: [⇒ [[Static Import Snippet]]]"
      },
      "date": 1678780682406
    },
    {
      "item": {
        "type": "factory",
        "id": "bdf54d76a84ff46a"
      },
      "id": "bdf54d76a84ff46a",
      "type": "add",
      "after": "a328b59029ece579",
      "date": 1678802081292
    },
    {
      "type": "edit",
      "id": "bdf54d76a84ff46a",
      "item": {
        "type": "paragraph",
        "id": "bdf54d76a84ff46a",
        "text": "Note: Changed the id property from \"app\" to \"output\"."
      },
      "date": 1678802105404
    },
    {
      "type": "edit",
      "id": "bdf54d76a84ff46a",
      "item": {
        "type": "paragraph",
        "id": "bdf54d76a84ff46a",
        "text": "Note: The id property has been changed from \"app\" to \"output\"."
      },
      "date": 1678802208836
    },
    {
      "type": "edit",
      "id": "17d726d886f8e531",
      "item": {
        "type": "paragraph",
        "id": "17d726d886f8e531",
        "text": "Interactive visualization of [[closest points on ellipses]] [https://github.com/thi-ng/umbrella/tree/develop/examples/ellipse-proximity#ellipse-proximity github], [https://github.com/thi-ng/umbrella/blob/8ab2cbfe2f59b7ef672b6e1cf2a43368f8437ddf/packages/rdom/README.md#usage-examples github]"
      },
      "date": 1678809115493
    },
    {
      "type": "edit",
      "id": "17d726d886f8e531",
      "item": {
        "type": "paragraph",
        "id": "17d726d886f8e531",
        "text": "Interactive visualization of [[Closest Points on Ellipses]] [https://github.com/thi-ng/umbrella/tree/develop/examples/ellipse-proximity#ellipse-proximity github], [https://github.com/thi-ng/umbrella/blob/8ab2cbfe2f59b7ef672b6e1cf2a43368f8437ddf/packages/rdom/README.md#usage-examples github]"
      },
      "date": 1678809151667
    },
    {
      "id": "17d726d886f8e531",
      "type": "remove",
      "removedTo": {
        "page": "Closest Points on Ellipses"
      },
      "date": 1678809163072
    },
    {
      "id": "49cbc9e1e10bd3a7",
      "type": "remove",
      "removedTo": {
        "page": "Closest Points on Ellipses"
      },
      "date": 1678809165671
    },
    {
      "id": "fa1561eadf808a62",
      "type": "remove",
      "removedTo": {
        "page": "Closest Points on Ellipses"
      },
      "date": 1678809168501
    },
    {
      "id": "5396a0b4e33715c0",
      "type": "remove",
      "removedTo": {
        "page": "Closest Points on Ellipses"
      },
      "date": 1678809171084
    },
    {
      "id": "6e15ffd2751a2b1e",
      "type": "remove",
      "removedTo": {
        "page": "Closest Points on Ellipses"
      },
      "date": 1678809174588
    },
    {
      "id": "f73048d74de4e1b1",
      "type": "remove",
      "removedTo": {
        "page": "Closest Points on Ellipses"
      },
      "date": 1678809176879
    },
    {
      "id": "a328b59029ece579",
      "type": "move",
      "order": [
        "bdf54d76a84ff46a",
        "a328b59029ece579"
      ],
      "date": 1678809204697
    },
    {
      "id": "a328b59029ece579",
      "type": "remove",
      "removedTo": {
        "page": "Closest Points on Ellipses"
      },
      "date": 1678809222311
    },
    {
      "id": "bdf54d76a84ff46a",
      "type": "remove",
      "removedTo": {
        "page": "Closest Points on Ellipses"
      },
      "date": 1678809231415
    },
    {
      "item": {
        "type": "factory",
        "id": "4b3caa8cc6a34cb9"
      },
      "id": "4b3caa8cc6a34cb9",
      "type": "add",
      "date": 1678809240989
    },
    {
      "type": "edit",
      "id": "4b3caa8cc6a34cb9",
      "item": {
        "type": "paragraph",
        "id": "4b3caa8cc6a34cb9",
        "text": "[[Closest Points on Ellipses]]"
      },
      "date": 1678809244455
    },
    {
      "type": "edit",
      "id": "4b3caa8cc6a34cb9",
      "item": {
        "type": "paragraph",
        "id": "4b3caa8cc6a34cb9",
        "text": "⇒ [[Closest Points on Ellipses]]"
      },
      "date": 1678809253848
    }
  ]
}