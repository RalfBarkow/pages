{
  "title": "Create Ghost Page from Frame",
  "story": [
    {
      "type": "paragraph",
      "id": "54a39b1ea079b8c4",
      "text": "We create json for a page then write a click handler that will open that page in the lineup."
    },
    {
      "type": "code",
      "id": "8206acff9467dce7",
      "text": "function latlon () {\n  return [\n    41.6 + Math.random()/2,\n    -88.14 + Math.random()/2]\n  .join(\",\")\n}\n\nfunction chicago () {\n  return {\n    title: \"Hello, Chicago\",\n    story: [{type:\"map\", text:latlon(), zoom:5},\n      {type:\"paragraph\", text:\"See [[Street Map]]\"}]\n  }\n}"
    },
    {
      "type": "code",
      "id": "c8963fb39e7da82f",
      "text": "function handler (event) {\n  let message = {\n    action: \"showResult\",\n    page: chicago(),\n    keepLineup: event.shiftKey\n  }\n  window.parent.postMessage(message, \"*\");\n}"
    },
    {
      "type": "code",
      "id": "7ab9b4cc4460a5bd",
      "text": "output.innerHTML = `<button>Open Page</button>`\noutput.addEventListener(\"click\", handler)\n"
    },
    {
      "type": "paragraph",
      "id": "1c6e2437c9b2056b",
      "text": "Try both click and shift-click of this button."
    },
    {
      "type": "frame",
      "id": "777ff878d8f1cc7e",
      "text": "//wiki.ralfbarkow.ch/assets/pages/snippet-template/basicjs.html?snippet-template\nHEIGHT 200"
    },
    {
      "type": "paragraph",
      "id": "7616347b5b480fc4",
      "text": "Shift-click [[Street Map]] to see all map markers together."
    },
    {
      "type": "paragraph",
      "id": "673f0657f7b66bb8",
      "text": "Why Chicago? I wanted to make pages that had some interest but were still easy to make algorithmically. I chose midwestern sprawl for the uniform but still historically interesting texture. I dropped two markers and then estimated the deltas in lat and lon."
    },
    {
      "type": "map",
      "id": "a712ef7b7de05195",
      "text": "41.6070798, -88.1432086\n41.9082178, -87.6393127\nBOUNDARY 41.4822594, -88.3953953\nBOUNDARY 42.0864553, -87.3614788"
    },
    {
      "type": "paragraph",
      "id": "ebaebd2611702f33",
      "text": "[[Create Items and Pages]] with more complete json."
    },
    {
      "type": "code",
      "id": "b2b1c2e7f5e3f4fe",
      "text": "  function open(page, keepLineup=false, forks=[]) {\n    const dup = obj => JSON.parse(JSON.stringify(obj))\n    let date = Date.now()\n    for (let item of page.story) item.id = (Math.random()*10**20).toFixed(0)\n    page.journal = [{type:'create', date, item:dup(page)}, ...forks.map(site => ({type:'fork',date,site}))]\n    let message = {action: \"showResult\", page, keepLineup}\n    window.parent.postMessage(message, \"*\");\n  }\n\n"
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "Create Ghost Page from Frame",
        "story": [
          {
            "type": "paragraph",
            "id": "54a39b1ea079b8c4",
            "text": "Explain what this code does."
          },
          {
            "type": "code",
            "id": "c8963fb39e7da82f",
            "text": "2 + 3"
          },
          {
            "type": "frame",
            "id": "777ff878d8f1cc7e",
            "text": "http://js.ward.asia.wiki.org/assets/pages/snippet-template/basicjs.html?snippet-template\nHEIGHT 200"
          }
        ]
      },
      "date": 1615923135202
    },
    {
      "type": "edit",
      "id": "c8963fb39e7da82f",
      "item": {
        "type": "code",
        "id": "c8963fb39e7da82f",
        "text": "document.querySelector(\"button\")\n  .addEventListener(\"click\", event => {\n    window.parent.postMessage({\n      action:\"showResult\",\n      page: {\n        title: \"Hello, World!\", story: [\n        {\n          type: \"paragraph\",\n          text: \"Greetings from frame content!\",\n          id: Math.abs(Math.random()*1e20|0)\n                .toString(16)\n        }\n      ]},\n      keepLineup: event.shiftKey\n    }, \"*\");\n  });"
      },
      "date": 1615923211699
    },
    {
      "item": {
        "type": "factory",
        "id": "7ab9b4cc4460a5bd"
      },
      "id": "7ab9b4cc4460a5bd",
      "type": "add",
      "after": "777ff878d8f1cc7e",
      "date": 1615923231971
    },
    {
      "type": "edit",
      "id": "c8963fb39e7da82f",
      "item": {
        "type": "code",
        "id": "c8963fb39e7da82f",
        "text": "window.parent.postMessage({\n      action:\"showResult\",\n      page: {\n        title: \"Hello, World!\", story: [\n        {\n          type: \"paragraph\",\n          text: \"Greetings from frame content!\",\n          id: Math.abs(Math.random()*1e20|0)\n                .toString(16)\n        }\n      ]},\n      keepLineup: false\n    }, \"*\")"
      },
      "date": 1615923323926
    },
    {
      "item": {
        "type": "factory",
        "id": "b8c35ba265e8d895"
      },
      "id": "b8c35ba265e8d895",
      "type": "add",
      "after": "7ab9b4cc4460a5bd",
      "date": 1615923348969
    },
    {
      "type": "edit",
      "id": "b8c35ba265e8d895",
      "item": {
        "type": "code",
        "id": "b8c35ba265e8d895",
        "text": "'done'"
      },
      "date": 1615923358614
    },
    {
      "id": "b8c35ba265e8d895",
      "type": "move",
      "order": [
        "54a39b1ea079b8c4",
        "c8963fb39e7da82f",
        "777ff878d8f1cc7e",
        "b8c35ba265e8d895",
        "7ab9b4cc4460a5bd"
      ],
      "date": 1615923361227
    },
    {
      "id": "b8c35ba265e8d895",
      "type": "move",
      "order": [
        "54a39b1ea079b8c4",
        "c8963fb39e7da82f",
        "b8c35ba265e8d895",
        "777ff878d8f1cc7e",
        "7ab9b4cc4460a5bd"
      ],
      "date": 1615923363680
    },
    {
      "item": {
        "type": "factory",
        "id": "d446b7a9663e6c13"
      },
      "id": "d446b7a9663e6c13",
      "type": "add",
      "after": "7ab9b4cc4460a5bd",
      "date": 1615923421941
    },
    {
      "type": "edit",
      "id": "d446b7a9663e6c13",
      "item": {
        "type": "html",
        "id": "d446b7a9663e6c13",
        "text": "<button>Open Page</button>"
      },
      "date": 1615923440784
    },
    {
      "id": "d446b7a9663e6c13",
      "type": "move",
      "order": [
        "54a39b1ea079b8c4",
        "c8963fb39e7da82f",
        "b8c35ba265e8d895",
        "d446b7a9663e6c13",
        "777ff878d8f1cc7e",
        "7ab9b4cc4460a5bd"
      ],
      "date": 1615923450946
    },
    {
      "id": "d446b7a9663e6c13",
      "type": "move",
      "order": [
        "54a39b1ea079b8c4",
        "c8963fb39e7da82f",
        "d446b7a9663e6c13",
        "b8c35ba265e8d895",
        "777ff878d8f1cc7e",
        "7ab9b4cc4460a5bd"
      ],
      "date": 1615923452621
    },
    {
      "type": "edit",
      "id": "b8c35ba265e8d895",
      "item": {
        "type": "code",
        "id": "b8c35ba265e8d895",
        "text": "'ready'"
      },
      "date": 1615923463539
    },
    {
      "item": {
        "type": "factory",
        "id": "993016e4fe822f08"
      },
      "id": "993016e4fe822f08",
      "type": "add",
      "after": "7ab9b4cc4460a5bd",
      "date": 1615923494513
    },
    {
      "type": "edit",
      "id": "7ab9b4cc4460a5bd",
      "item": {
        "type": "code",
        "id": "7ab9b4cc4460a5bd",
        "text": "output.innerHTML = `<button>Open Page</button>"
      },
      "date": 1615923555407
    },
    {
      "id": "7ab9b4cc4460a5bd",
      "type": "move",
      "order": [
        "54a39b1ea079b8c4",
        "7ab9b4cc4460a5bd",
        "c8963fb39e7da82f",
        "d446b7a9663e6c13",
        "b8c35ba265e8d895",
        "777ff878d8f1cc7e",
        "993016e4fe822f08"
      ],
      "date": 1615923559684
    },
    {
      "type": "edit",
      "id": "7ab9b4cc4460a5bd",
      "item": {
        "type": "code",
        "id": "7ab9b4cc4460a5bd",
        "text": "output.innerHTML = `<button>Open Page</button>`"
      },
      "date": 1615923568527
    },
    {
      "type": "remove",
      "id": "d446b7a9663e6c13",
      "date": 1615923579324
    },
    {
      "type": "edit",
      "id": "c8963fb39e7da82f",
      "item": {
        "type": "code",
        "id": "c8963fb39e7da82f",
        "text": "document.querySelector(\"button\")\n  .addEventListener(\"click\", event => {\n    window.parent.postMessage({\n      action:\"showResult\",\n      page: {\n        title: \"Hello, World!\", story: [\n        {\n          type: \"paragraph\",\n          text: \"Greetings from frame content!\",\n          id: Math.abs(Math.random()*1e20|0)\n                .toString(16)\n        }\n      ]},\n      keepLineup: event.shiftKey\n    }, \"*\");\n  });"
      },
      "date": 1615923633692
    },
    {
      "type": "edit",
      "id": "c8963fb39e7da82f",
      "item": {
        "type": "code",
        "id": "c8963fb39e7da82f",
        "text": "output.querySelector(\"button\")\n  .addEventListener(\"click\", event => {\n    window.parent.postMessage({\n      action:\"showResult\",\n      page: {\n        title: \"Hello, World!\", story: [\n        {\n          type: \"paragraph\",\n          text: \"Greetings from frame content!\",\n          id: Math.abs(Math.random()*1e20|0)\n                .toString(16)\n        }\n      ]},\n      keepLineup: event.shiftKey\n    }, \"*\");\n  });"
      },
      "date": 1615923721760
    },
    {
      "type": "edit",
      "id": "7ab9b4cc4460a5bd",
      "item": {
        "type": "code",
        "id": "7ab9b4cc4460a5bd",
        "text": "let button = document.createElement('button')\nbutton.innerText = `Open Page`"
      },
      "date": 1615923854846
    },
    {
      "type": "edit",
      "id": "c8963fb39e7da82f",
      "item": {
        "type": "code",
        "id": "c8963fb39e7da82f",
        "text": "button\n  .addEventListener(\"click\", event => {\n    window.parent.postMessage({\n      action:\"showResult\",\n      page: {\n        title: \"Hello, World!\", story: [\n        {\n          type: \"paragraph\",\n          text: \"Greetings from frame content!\",\n          id: Math.abs(Math.random()*1e20|0)\n                .toString(16)\n        }\n      ]},\n      keepLineup: event.shiftKey\n    }, \"*\");\n  });"
      },
      "date": 1615923864137
    },
    {
      "type": "edit",
      "id": "b8c35ba265e8d895",
      "item": {
        "type": "code",
        "id": "b8c35ba265e8d895",
        "text": "output.appendChild(button)\n'ready'"
      },
      "date": 1615923894567
    },
    {
      "type": "edit",
      "id": "c8963fb39e7da82f",
      "item": {
        "type": "code",
        "id": "c8963fb39e7da82f",
        "text": "button\n  .addEventListener(\"click\", event => {\n    console.log('click', event)\n    window.parent.postMessage({\n      action:\"showResult\",\n      page: {\n        title: \"Hello, World!\", story: [\n        {\n          type: \"paragraph\",\n          text: \"Greetings from frame content!\",\n          id: Math.abs(Math.random()*1e20|0)\n                .toString(16)\n        }\n      ]},\n      keepLineup: event.shiftKey\n    }, \"*\");\n  });"
      },
      "date": 1615923932831
    },
    {
      "type": "edit",
      "id": "c8963fb39e7da82f",
      "item": {
        "type": "code",
        "id": "c8963fb39e7da82f",
        "text": "console.log('button', button)\nbutton\n  .addEventListener(\"click\", event => {\n    console.log('click', event)\n    window.parent.postMessage({\n      action:\"showResult\",\n      page: {\n        title: \"Hello, World!\", story: [\n        {\n          type: \"paragraph\",\n          text: \"Greetings from frame content!\",\n          id: Math.abs(Math.random()*1e20|0)\n                .toString(16)\n        }\n      ]},\n      keepLineup: event.shiftKey\n    }, \"*\");\n  });"
      },
      "date": 1615924116380
    },
    {
      "id": "b8c35ba265e8d895",
      "type": "move",
      "order": [
        "54a39b1ea079b8c4",
        "7ab9b4cc4460a5bd",
        "b8c35ba265e8d895",
        "c8963fb39e7da82f",
        "777ff878d8f1cc7e",
        "993016e4fe822f08"
      ],
      "date": 1615924293282
    },
    {
      "type": "edit",
      "id": "b8c35ba265e8d895",
      "item": {
        "type": "code",
        "id": "b8c35ba265e8d895",
        "text": "\n'ready'"
      },
      "date": 1615924344373
    },
    {
      "type": "edit",
      "id": "7ab9b4cc4460a5bd",
      "item": {
        "type": "code",
        "id": "7ab9b4cc4460a5bd",
        "text": "let button = document.createElement('button')\nbutton.innerText = `Open Page`\noutput.appendChild(button)"
      },
      "date": 1615924350051
    },
    {
      "type": "fork",
      "date": 1615924467656
    },
    {
      "id": "b8c35ba265e8d895",
      "type": "move",
      "order": [
        "54a39b1ea079b8c4",
        "7ab9b4cc4460a5bd",
        "c8963fb39e7da82f",
        "b8c35ba265e8d895",
        "777ff878d8f1cc7e",
        "993016e4fe822f08"
      ],
      "date": 1615924510169
    },
    {
      "id": "b8c35ba265e8d895",
      "type": "move",
      "order": [
        "54a39b1ea079b8c4",
        "7ab9b4cc4460a5bd",
        "b8c35ba265e8d895",
        "c8963fb39e7da82f",
        "777ff878d8f1cc7e",
        "993016e4fe822f08"
      ],
      "date": 1615924554605
    },
    {
      "type": "edit",
      "id": "993016e4fe822f08",
      "item": {
        "type": "code",
        "id": "993016e4fe822f08",
        "text": "2 + 3"
      },
      "date": 1615924722592
    },
    {
      "id": "993016e4fe822f08",
      "type": "move",
      "order": [
        "54a39b1ea079b8c4",
        "7ab9b4cc4460a5bd",
        "b8c35ba265e8d895",
        "c8963fb39e7da82f",
        "993016e4fe822f08",
        "777ff878d8f1cc7e"
      ],
      "date": 1615924724999
    },
    {
      "type": "edit",
      "id": "993016e4fe822f08",
      "item": {
        "type": "code",
        "id": "993016e4fe822f08",
        "text": "let pi = 2 + 3"
      },
      "date": 1615924754197
    },
    {
      "type": "edit",
      "id": "993016e4fe822f08",
      "item": {
        "type": "code",
        "id": "993016e4fe822f08",
        "text": "let pi = 2 + 3\npi"
      },
      "date": 1615924769361
    },
    {
      "type": "edit",
      "id": "993016e4fe822f08",
      "item": {
        "type": "code",
        "id": "993016e4fe822f08",
        "text": "let pi = 2 + 3"
      },
      "date": 1615925051312
    },
    {
      "type": "remove",
      "id": "b8c35ba265e8d895",
      "date": 1615925069458
    },
    {
      "type": "remove",
      "id": "993016e4fe822f08",
      "date": 1615925240082
    },
    {
      "type": "edit",
      "id": "7ab9b4cc4460a5bd",
      "item": {
        "type": "code",
        "id": "7ab9b4cc4460a5bd",
        "text": "output.innerHTML = `<button>Open</button>\nlet button = document.createElement('button')\nbutton.innerText = `Open Page`\noutput.appendChild(button)"
      },
      "date": 1615925305122
    },
    {
      "type": "edit",
      "id": "7ab9b4cc4460a5bd",
      "item": {
        "type": "code",
        "id": "7ab9b4cc4460a5bd",
        "text": "output.innerHTML = `<button>Open</button>`\nlet button = document.createElement('button')\nbutton.innerText = `Open Page`\noutput.appendChild(button)"
      },
      "date": 1615925315126
    },
    {
      "type": "edit",
      "id": "c8963fb39e7da82f",
      "item": {
        "type": "code",
        "id": "c8963fb39e7da82f",
        "text": "output\n  .addEventListener(\"click\", event => {\n    console.log('click', event)\n    window.parent.postMessage({\n      action:\"showResult\",\n      page: {\n        title: \"Hello, World!\", story: [\n        {\n          type: \"paragraph\",\n          text: \"Greetings from frame content!\",\n          id: Math.abs(Math.random()*1e20|0)\n                .toString(16)\n        }\n      ]},\n      keepLineup: event.shiftKey\n    }, \"*\");\n  });"
      },
      "date": 1615925334898
    },
    {
      "type": "edit",
      "id": "7ab9b4cc4460a5bd",
      "item": {
        "type": "code",
        "id": "7ab9b4cc4460a5bd",
        "text": "output.innerHTML = `<button>Open</button>`"
      },
      "date": 1615925368899
    },
    {
      "item": {
        "type": "factory",
        "id": "8206acff9467dce7"
      },
      "id": "8206acff9467dce7",
      "type": "add",
      "after": "777ff878d8f1cc7e",
      "date": 1615925423288
    },
    {
      "type": "edit",
      "id": "c8963fb39e7da82f",
      "item": {
        "type": "code",
        "id": "c8963fb39e7da82f",
        "text": "output\n  .addEventListener(\"click\", event => {\n    window.parent.postMessage({\n      action:\"showResult\",\n      page: {\n        title: \"Hello, World!\", story: [\n        {\n          type: \"paragraph\",\n          text: \"Greetings from frame content!\",\n          id: Math.abs(Math.random()*1e20|0)\n                .toString(16)\n        }\n      ]},\n      keepLineup: event.shiftKey\n    }, \"*\");\n  });"
      },
      "date": 1615925426226
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "let page = {\n\n}"
      },
      "date": 1615925440575
    },
    {
      "type": "edit",
      "id": "c8963fb39e7da82f",
      "item": {
        "type": "code",
        "id": "c8963fb39e7da82f",
        "text": "output\n  .addEventListener(\"click\", event => {\n    window.parent.postMessage({\n      action:\"showResult\",\n      page},\n      keepLineup: event.shiftKey\n    }, \"*\");\n  });"
      },
      "date": 1615925516915
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "let page = {\n  title: \"Hello, World!\",\n  story: [ {type: \"map\"} ]\n}"
      },
      "date": 1615925622609
    },
    {
      "id": "8206acff9467dce7",
      "type": "move",
      "order": [
        "54a39b1ea079b8c4",
        "7ab9b4cc4460a5bd",
        "8206acff9467dce7",
        "c8963fb39e7da82f",
        "777ff878d8f1cc7e"
      ],
      "date": 1615925626102
    },
    {
      "id": "8206acff9467dce7",
      "type": "move",
      "order": [
        "54a39b1ea079b8c4",
        "8206acff9467dce7",
        "7ab9b4cc4460a5bd",
        "c8963fb39e7da82f",
        "777ff878d8f1cc7e"
      ],
      "date": 1615925628325
    },
    {
      "type": "edit",
      "id": "c8963fb39e7da82f",
      "item": {
        "type": "code",
        "id": "c8963fb39e7da82f",
        "text": "function handler (event) {\n  let message = {\n    action:\"showResult\",\n    page,\n    keepLineup: event.shiftKey\n  }\n  window.parent.postMessage(message, \"*\");\n}"
      },
      "date": 1615925954479
    },
    {
      "type": "edit",
      "id": "7ab9b4cc4460a5bd",
      "item": {
        "type": "code",
        "id": "7ab9b4cc4460a5bd",
        "text": "output.innerHTML = `<button>Open</button>`\noutput.addEventListener(\"click\", handler)\n"
      },
      "date": 1615925967326
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "let page = {\n  title: \"Hello, World!\",\n  story: [{type: \"map\", text:\"New York\"}]\n}"
      },
      "date": 1615926084520
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "let page = {\n  title: \"Hello, New York\",\n  story: [{type: \"map\", text:\"New York\"}]\n}"
      },
      "date": 1615926103155
    },
    {
      "id": "7ab9b4cc4460a5bd",
      "type": "move",
      "order": [
        "54a39b1ea079b8c4",
        "8206acff9467dce7",
        "c8963fb39e7da82f",
        "7ab9b4cc4460a5bd",
        "777ff878d8f1cc7e"
      ],
      "date": 1615926115558
    },
    {
      "type": "edit",
      "id": "7ab9b4cc4460a5bd",
      "item": {
        "type": "code",
        "id": "7ab9b4cc4460a5bd",
        "text": "output.innerHTML = `<button>Open Page</button>`\noutput.addEventListener(\"click\", handler)\n"
      },
      "date": 1615926154773
    },
    {
      "type": "edit",
      "id": "54a39b1ea079b8c4",
      "item": {
        "type": "paragraph",
        "id": "54a39b1ea079b8c4",
        "text": "We create json for a page then write a click handler that will open that page in the lineup."
      },
      "date": 1615926217430
    },
    {
      "item": {
        "type": "factory",
        "id": "1c6e2437c9b2056b"
      },
      "id": "1c6e2437c9b2056b",
      "type": "add",
      "after": "777ff878d8f1cc7e",
      "date": 1615926305859
    },
    {
      "type": "edit",
      "id": "1c6e2437c9b2056b",
      "item": {
        "type": "paragraph",
        "id": "1c6e2437c9b2056b",
        "text": "We go through the trouble of writing this as a click handler so that we can show how we implement the convention of handling shift-clicks."
      },
      "date": 1615926355352
    },
    {
      "type": "edit",
      "id": "1c6e2437c9b2056b",
      "item": {
        "type": "paragraph",
        "id": "1c6e2437c9b2056b",
        "text": "Try both click and shift-click of this button."
      },
      "date": 1615926394688
    },
    {
      "id": "1c6e2437c9b2056b",
      "type": "move",
      "order": [
        "54a39b1ea079b8c4",
        "8206acff9467dce7",
        "c8963fb39e7da82f",
        "7ab9b4cc4460a5bd",
        "1c6e2437c9b2056b",
        "777ff878d8f1cc7e"
      ],
      "date": 1615926397921
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "let latlon = [\n  41.6 + Math.random()/2,\n  -88.14 + Math.random()/2]\nlet \nlet page = {\n  title: \"Hello, Chicagoland\",\n  story: [{type: \"map\", text:latlon.join(\",\"}]\n}"
      },
      "date": 1615938605371
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "let latlon = [\n  41.6 + Math.random()/2,\n  -88.14 + Math.random()/2\n]\nlet page = {\n  title: \"Hello, Chicagoland\",\n  story: [{type: \"map\", text:latlon.join(\",\"}]\n}"
      },
      "date": 1615938627559
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "let latlon = [\n  41.6 + Math.random()/2,\n  -88.14 + Math.random()/2\n]\nlet page = {\n  title: \"Hello, Chicagoland\",\n  story: [{type: \"map\", text:latlon.join(\",\")}]\n}"
      },
      "date": 1615938645739
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "let latlon = [\n  41.6 + Math.random()/2,\n  -88.14 + Math.random()/2\n]\nlet page = {\n  title: \"Hello, Chicago.\",\n  story: [{type: \"map\", text:latlon.join(\",\")}]\n}"
      },
      "date": 1615938814593
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "let latlon = [\n  41.6 + Math.random()/2,\n  -88.14 + Math.random()/2\n]\nlet page = {\n  title: \"Hello, Chicago\",\n  story: [{type: \"map\", text:latlon.join(\",\")}]\n}"
      },
      "date": 1615938820612
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "let latlon = [\n  41.6 + Math.random()/2,\n  -88.14 + Math.random()/2\n].join(\",\")\nlet page = {\n  title: \"Hello, Chicago\",\n  story: [{type: \"map\", text:latlon}]\n}"
      },
      "date": 1615938903959
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "function latlon () {\n[\n  41.6 + Math.random()/2,\n  -88.14 + Math.random()/2\n].join(\",\")\nlet page = {\n  title: \"Hello, Chicago\",\n  story: [{type: \"map\", text:latlon}]\n}"
      },
      "date": 1615938967845
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "function latlon () {\n  return [\n    41.6 + Math.random()/2,\n    -88.14 + Math.random()/2]\n  .join(\",\")}\n\nlet page = {\n  title: \"Hello, Chicago\",\n  story: [{type: \"map\", text:latlon}]\n}"
      },
      "date": 1615939056773
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "function latlon () {\n  return [\n    41.6 + Math.random()/2,\n    -88.14 + Math.random()/2]\n  .join(\",\")\n}\nlet page = {\n  title: \"Hello, Chicago\",\n  story: [{type: \"map\", text:latlon}]\n}"
      },
      "date": 1615939067621
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "function latlon () {\n  return [\n    41.6 + Math.random()/2,\n    -88.14 + Math.random()/2]\n  .join(\",\")\n}\nlet page = {\n  title: \"Hello, Chicago\",\n  story: [{type: \"map\", text:latlon()}]\n}"
      },
      "date": 1615939077284
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "function latlon () {\n  return [\n    41.6 + Math.random()/2,\n    -88.14 + Math.random()/2]\n  .join(\",\")\n}\nfunction chicago()\n  return {\n  title: \"Hello, Chicago\",\n  story: [{type: \"map\", text:latlon()}]\n}"
      },
      "date": 1615939160553
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "function latlon () {\n  return [\n    41.6 + Math.random()/2,\n    -88.14 + Math.random()/2]\n  .join(\",\")\n}\n\nfunction chicago()\n  return {\n    title: \"Hello, Chicago\",\n    story: [{type: \"map\", text:latlon()}]\n  }\n}"
      },
      "date": 1615939220049
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "function latlon () {\n  return [\n    41.6 + Math.random()/2,\n    -88.14 + Math.random()/2]\n  .join(\",\")\n}\n\nfunction chicago() {\n  return {\n    title: \"Hello, Chicago\",\n    story: [{type: \"map\", text:latlon()}]\n  }\n}"
      },
      "date": 1615939244487
    },
    {
      "type": "edit",
      "id": "c8963fb39e7da82f",
      "item": {
        "type": "code",
        "id": "c8963fb39e7da82f",
        "text": "function handler (event) {\n  let message = {\n    action:\"showResult\",\n    page:chicago(),\n    keepLineup: event.shiftKey\n  }\n  window.parent.postMessage(message, \"*\");\n}"
      },
      "date": 1615939266251
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "function latlon () {\n  return [\n    41.6 + Math.random()/2,\n    -88.14 + Math.random()/2]\n  .join(\",\")\n}\n\nfunction chicago () {\n  return {\n    title: \"Hello, Chicago\",\n    story: [{type: \"map\", text:latlon()}]\n  }\n}"
      },
      "date": 1615940953187
    },
    {
      "type": "edit",
      "id": "c8963fb39e7da82f",
      "item": {
        "type": "code",
        "id": "c8963fb39e7da82f",
        "text": "function handler (event) {\n  let message = {\n    action: \"showResult\",\n    page: chicago(),\n    keepLineup: event.shiftKey\n  }\n  window.parent.postMessage(message, \"*\");\n}"
      },
      "date": 1615941040263
    },
    {
      "item": {
        "type": "factory",
        "id": "7616347b5b480fc4"
      },
      "id": "7616347b5b480fc4",
      "type": "add",
      "after": "777ff878d8f1cc7e",
      "date": 1615941195415
    },
    {
      "type": "edit",
      "id": "7616347b5b480fc4",
      "item": {
        "type": "paragraph",
        "id": "7616347b5b480fc4",
        "text": "Shift-click [[Street Map]] to see all maps together."
      },
      "date": 1615941237482
    },
    {
      "type": "edit",
      "id": "7616347b5b480fc4",
      "item": {
        "type": "paragraph",
        "id": "7616347b5b480fc4",
        "text": "Shift-click [[Street Map]] to see all map markers together."
      },
      "date": 1615941924779
    },
    {
      "item": {
        "type": "factory",
        "id": "673f0657f7b66bb8"
      },
      "id": "673f0657f7b66bb8",
      "type": "add",
      "after": "7616347b5b480fc4",
      "date": 1615991810740
    },
    {
      "type": "edit",
      "id": "673f0657f7b66bb8",
      "item": {
        "type": "paragraph",
        "id": "673f0657f7b66bb8",
        "text": "Why Chicago? I wanted to make pages that had some interest but were still easy to make algorithmically. I chose midwestern sprawl for the uniform but still historically interesting texture. I dropped two markers and then estimated the deltas in lat and lon."
      },
      "date": 1615992088116
    },
    {
      "item": {
        "type": "factory",
        "id": "a712ef7b7de05195"
      },
      "id": "a712ef7b7de05195",
      "type": "add",
      "after": "673f0657f7b66bb8",
      "date": 1615992092039
    },
    {
      "type": "edit",
      "id": "a712ef7b7de05195",
      "item": {
        "type": "map",
        "id": "a712ef7b7de05195",
        "text": "41.6070798, -88.1432086\n41.9082178, -87.6393127"
      },
      "date": 1615992099774
    },
    {
      "type": "edit",
      "id": "a712ef7b7de05195",
      "item": {
        "type": "map",
        "id": "a712ef7b7de05195",
        "text": "41.6070798, -88.1432086\n41.9082178, -87.6393127\n41.4822594, -88.3953953"
      },
      "date": 1615992118903
    },
    {
      "type": "edit",
      "id": "a712ef7b7de05195",
      "item": {
        "type": "map",
        "id": "a712ef7b7de05195",
        "text": "41.6070798, -88.1432086\n41.9082178, -87.6393127\n41.4822594, -88.3953953\n42.0864553, -87.3614788"
      },
      "date": 1615992124561
    },
    {
      "type": "edit",
      "id": "a712ef7b7de05195",
      "item": {
        "type": "map",
        "id": "a712ef7b7de05195",
        "text": "41.6070798, -88.1432086\n41.9082178, -87.6393127\nBOUNDARY 41.4822594, -88.3953953\nBOUNDARY 42.0864553, -87.3614788"
      },
      "date": 1615992147194
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "function latlon () {\n  return [\n    41.6 + Math.random()/2,\n    -88.14 + Math.random()/2]\n  .join(\",\")\n}\n\nfunction chicago () {\n  return {\n    title: \"Hello, Chicago\",\n    story: [{type:\"map\", text:latlon(), zoom:10}]\n  }\n}"
      },
      "date": 1616208903509
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "function latlon () {\n  return [\n    41.6 + Math.random()/2,\n    -88.14 + Math.random()/2]\n  .join(\",\")\n}\n\nfunction chicago () {\n  return {\n    title: \"Hello, Chicago\",\n    story: [{type:\"map\", text:latlon(), zoom:12}]\n  }\n}"
      },
      "date": 1616208953429
    },
    {
      "id": "ebaebd2611702f33",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "ebaebd2611702f33",
        "text": "See [[Create Items and Pages]] with complete json."
      },
      "after": "7616347b5b480fc4",
      "date": 1616635196325
    },
    {
      "type": "edit",
      "id": "ebaebd2611702f33",
      "item": {
        "type": "paragraph",
        "id": "ebaebd2611702f33",
        "text": "[[Create Items and Pages]] with more complete json."
      },
      "date": 1616635225550
    },
    {
      "id": "ebaebd2611702f33",
      "type": "move",
      "order": [
        "54a39b1ea079b8c4",
        "8206acff9467dce7",
        "c8963fb39e7da82f",
        "7ab9b4cc4460a5bd",
        "1c6e2437c9b2056b",
        "777ff878d8f1cc7e",
        "7616347b5b480fc4",
        "673f0657f7b66bb8",
        "a712ef7b7de05195",
        "ebaebd2611702f33"
      ],
      "date": 1616635229788
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "function latlon () {\n  return [\n    41.6 + Math.random()/2,\n    -88.14 + Math.random()/2]\n  .join(\",\")\n}\n\nfunction chicago () {\n  return {\n    title: \"Hello, Chicago\",\n    story: [{type:\"map\", text:latlon(), zoom:8}]\n  }\n}"
      },
      "date": 1618607834170
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "function latlon () {\n  return [\n    41.6 + Math.random()/2,\n    -88.14 + Math.random()/2]\n  .join(\",\")\n}\n\nfunction chicago () {\n  return {\n    title: \"Hello, Chicago\",\n    story: [{type:\"map\", text:latlon(), zoom:4}]\n  }\n}"
      },
      "date": 1618607847058
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "function latlon () {\n  return [\n    41.6 + Math.random()/2,\n    -88.14 + Math.random()/2]\n  .join(\",\")\n}\n\nfunction chicago () {\n  return {\n    title: \"Hello, Chicago\",\n    story: [{type:\"map\", text:latlon(), zoom:5}]\n  }\n}"
      },
      "date": 1618607867996
    },
    {
      "item": {
        "type": "factory",
        "id": "b2b1c2e7f5e3f4fe"
      },
      "id": "b2b1c2e7f5e3f4fe",
      "type": "add",
      "after": "ebaebd2611702f33",
      "date": 1629601890426
    },
    {
      "type": "edit",
      "id": "b2b1c2e7f5e3f4fe",
      "item": {
        "type": "code",
        "id": "b2b1c2e7f5e3f4fe",
        "text": "  function open(page, keepLineup=false, forks=[]) {\n    const dup = obj => JSON.parse(JSON.stringify(obj))\n    let date = Date.now()\n    for (let item of page.story) item.id = (Math.random()*10**20).toFixed(0)\n    page.journal = [{type:'create', date, item:dup(page)}, ...forks.map(site => ({type:'fork',date,site}))]\n    let message = {action: \"showResult\", page, keepLineup}\n    window.parent.postMessage(message, \"*\");\n  }\n\n"
      },
      "date": 1629601898364
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "function latlon () {\n  return [\n    41.6 + Math.random()/2,\n    -88.14 + Math.random()/2]\n  .join(\",\")\n}\n\nfunction chicago () {\n  return {\n    title: \"Hello, Chicago\",\n    story: [{type:\"map\", text:latlon(), zoom:5},\n      {type:\"paragraph\", text:\"See [[Street Map]]\"]\n  }\n}"
      },
      "date": 1632520274834
    },
    {
      "type": "edit",
      "id": "8206acff9467dce7",
      "item": {
        "type": "code",
        "id": "8206acff9467dce7",
        "text": "function latlon () {\n  return [\n    41.6 + Math.random()/2,\n    -88.14 + Math.random()/2]\n  .join(\",\")\n}\n\nfunction chicago () {\n  return {\n    title: \"Hello, Chicago\",\n    story: [{type:\"map\", text:latlon(), zoom:5},\n      {type:\"paragraph\", text:\"See [[Street Map]]\"}]\n  }\n}"
      },
      "date": 1632520297211
    },
    {
      "type": "fork",
      "site": "js.ward.asia.wiki.org",
      "date": 1637928890878
    },
    {
      "type": "edit",
      "id": "777ff878d8f1cc7e",
      "item": {
        "type": "frame",
        "id": "777ff878d8f1cc7e",
        "text": "//wiki.ralfbarkow.ch/assets/pages/snippet-template/basicjs.html?snippet-template\nHEIGHT 200"
      },
      "date": 1678894021526
    }
  ]
}