{
  "title": "Wiki Update - September 2022",
  "story": [
    {
      "type": "paragraph",
      "id": "cb2a3a9ef5862841",
      "text": "This months set of updates contains breaking changes in how images are handled, and in the structure of the saved search index file."
    },
    {
      "type": "paragraph",
      "id": "b6b28a02119641ac",
      "text": "It started focused on improvements to the image plugin, but also sees the map plugin and search updated."
    },
    {
      "type": "markdown",
      "id": "813c3245c0a0fc43",
      "text": "# Image Plugin Improved"
    },
    {
      "type": "paragraph",
      "id": "b7302471a94ab32c",
      "text": "This update changes not only how we store images, but also how we display them. "
    },
    {
      "type": "paragraph",
      "id": "2edadcf9599e4227",
      "text": "Rather than storing images within the wiki page, they are given a name using a hash of the file contents, stored centrally in the wiki farm, and linked to from asset directory."
    },
    {
      "type": "markdown",
      "id": "b0ad0aef882709d7",
      "text": "This has the advantage the image is only stored a single time within the wiki farm. *Opposed to how the original image plugin worked, where the image was stored in the wiki page, once in the story, again in the journal action when it was added, and again each time the caption was edited.*"
    },
    {
      "type": "paragraph",
      "id": "b827c7d22c8008a5",
      "text": "We still squeeze the image, as before which also removes any image meta data, but with fitting within a 1080p area as target size."
    },
    {
      "type": "image",
      "id": "f8cd1669c6fa4591",
      "text": "Image editor, showing location data.",
      "size": "thumbnail",
      "width": 183,
      "height": 294,
      "url": "/assets/plugins/image/1ebad1eb90fbd6f6c4d7322be44f53b9.jpg"
    },
    {
      "type": "markdown",
      "id": "9ac6133edb683e49",
      "text": "If an image is wider than the wiki page, 415 pixels, it can be displayed either half or full wiki page width. *If the image is narrower than this, the size option will not be given.*"
    },
    {
      "type": "paragraph",
      "id": "1bb1b5142efdc546",
      "text": "The image plugin has been given its own custom editor, for editing the caption, toggling the image width between half and full page width, and marker (latitude/longitude) data."
    },
    {
      "type": "paragraph",
      "id": "1865b6b0b4b7b0a8",
      "text": "The plugin uses a relative URL for the image rather than absolute URL, as a strategy to encourage images to be forked along with their pages."
    },
    {
      "type": "paragraph",
      "id": "05482cde3aa3cbea",
      "text": "The plugin constructs a list of probable locations for the image, and tries them in turn if the image is not found. This list starts with the current origin, then if the page was load from elsewhere that site, followed by the sites from the page's history. "
    },
    {
      "type": "image",
      "id": "de49b255327a5357",
      "text": "Flag in corner of image, clicking forks the image to the current wiki.",
      "size": "thumbnail",
      "width": 183,
      "height": 119,
      "url": "/assets/plugins/image/c5d5f81714a5890d5a1b482066fdf4d7.jpg"
    },
    {
      "type": "paragraph",
      "id": "0ef616e350c8cfb7",
      "text": "When an image is not available from the origin wiki, the wiki owner, will see the flag in the bottom right of the image showing the wiki the image was loaded from. Clicking on the flag will 'fork' the image to the origin wiki."
    },
    {
      "type": "markdown",
      "id": "96d0aaa2485d6e07",
      "text": "Where a image has a location, the image will act as a marker source. Locations will be extracted from an image's meta data, if present. To aid entry from other sources the location can be pasted into either field as `lat/long` or `lat,long`. *Many online maps will provide one of those formats either in a right-click menu, or in the address bar.*"
    },
    {
      "type": "markdown",
      "id": "a50fb9cf8f08be18",
      "text": "__Server__: \nA new parameter has been added to specify the location of a `commons` directory that is used across the wiki farm to store images. **N.B.** The image plugin uses hard links between the image files in the `commons` directory and the wiki's `plugins/image` directory. So, these need to be on the same physical drive."
    },
    {
      "type": "markdown",
      "id": "a4e33a0ef5a077eb",
      "text": "# Map Plugin"
    },
    {
      "type": "markdown",
      "id": "08b1d403573033c0",
      "text": "The `PAGE` keyword has been added. This only looks on the current page for markers."
    },
    {
      "type": "markdown",
      "id": "db69e5a65b51e3fb",
      "text": "**N.B.** Only find marker sources that have already been rendered will be found when loading the page. Hovering over the freeze button, `❅`, will include the markers that were not found. Pressing the freeze button will freeze all the markers, so they are shown when the page is loaded."
    },
    {
      "type": "markdown",
      "id": "404e128eda4635c6",
      "text": "# Drag on Attribution"
    },
    {
      "type": "paragraph",
      "id": "136ed9141a817fdf",
      "text": "Something that has been pondered for a while is to provide attribution for items dragged between pages, particularly if from other wiki."
    },
    {
      "type": "paragraph",
      "id": "0dfac8f0cf36ee7d",
      "text": "With the change to the image plugin this becomes more important when an image is dragged from a page in another wiki, so we can find the image to display."
    },
    {
      "type": "markdown",
      "id": "f33c03de68eb7b12",
      "text": "In the journal the add item uses a slight different symbol `⨭` and has the other wiki's flag as background. Where an item has been moved to another page a modified symbol `⨵`."
    },
    {
      "type": "markdown",
      "id": "e2e27740db22a2aa",
      "text": "# Search"
    },
    {
      "type": "paragraph",
      "id": "80b27dfa2e6f82a0",
      "text": "We update to the latest version of [https://github.com/lucaong/minisearch minisearch], this is the search library we use for search. We had been holding off this update for a while as the saved index file structure has changed."
    },
    {
      "type": "paragraph",
      "id": "05ef4b86fee59731",
      "text": "When wiki is started the index will get remade using this updated version."
    },
    {
      "type": "paragraph",
      "id": "915cf0ca99008de6",
      "text": "Wiki using the old version will fail to load an updated index, so they will be unable to search those site in their neighbourhood that have updated."
    },
    {
      "type": "paragraph",
      "id": "f41431f2291dc7fc",
      "text": "Wiki using this new version can't load an old version of an index. However, they can detect this and will fall back to constructing an index created using the page synopsis."
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "Wiki Update - September 2022",
        "story": []
      },
      "date": 1660211539809
    },
    {
      "item": {
        "type": "factory",
        "id": "0260a37da3205d4b"
      },
      "id": "0260a37da3205d4b",
      "type": "add",
      "date": 1660211553735
    },
    {
      "type": "edit",
      "id": "0260a37da3205d4b",
      "item": {
        "type": "markdown",
        "id": "0260a37da3205d4b",
        "text": "*This will likely become the release notes, but starts out pulling all the threads in this update back together*"
      },
      "date": 1660211612511
    },
    {
      "item": {
        "type": "factory",
        "id": "cb2a3a9ef5862841"
      },
      "id": "cb2a3a9ef5862841",
      "type": "add",
      "after": "0260a37da3205d4b",
      "date": 1660211653194
    },
    {
      "type": "edit",
      "id": "cb2a3a9ef5862841",
      "item": {
        "type": "paragraph",
        "id": "cb2a3a9ef5862841",
        "text": "This update started focused on improvements to the image plugin."
      },
      "date": 1660211708733
    },
    {
      "type": "add",
      "id": "813c3245c0a0fc43",
      "item": {
        "type": "paragraph",
        "id": "813c3245c0a0fc43",
        "text": "# Image Plugin Improved"
      },
      "after": "cb2a3a9ef5862841",
      "date": 1660211742337
    },
    {
      "type": "add",
      "id": "b7302471a94ab32c",
      "item": {
        "type": "paragraph",
        "id": "b7302471a94ab32c",
        "text": "This update changes both "
      },
      "after": "813c3245c0a0fc43",
      "date": 1660214464995
    },
    {
      "type": "edit",
      "id": "813c3245c0a0fc43",
      "item": {
        "type": "markdown",
        "id": "813c3245c0a0fc43",
        "text": "# Image Plugin Improved"
      },
      "date": 1660386313587
    },
    {
      "type": "edit",
      "id": "b7302471a94ab32c",
      "item": {
        "type": "paragraph",
        "id": "b7302471a94ab32c",
        "text": "This update changes how we store images. Rather than storing them with in the wiki page JSON, they will now be stored as files. Each image is given a unique name, and stored centrally in the wiki file and is also linked to, using hard links, from an asset folder used by the image plugin."
      },
      "date": 1660386747972
    },
    {
      "type": "edit",
      "id": "b7302471a94ab32c",
      "item": {
        "type": "paragraph",
        "id": "b7302471a94ab32c",
        "text": "This update changes how we store images. "
      },
      "date": 1660387127619
    },
    {
      "type": "add",
      "id": "2edadcf9599e4227",
      "item": {
        "type": "paragraph",
        "id": "2edadcf9599e4227",
        "text": "Rather than storing them with in the wiki page JSON, they will now be stored as files. Each image is given a unique name, and stored centrally in the wiki file and is also linked to, using hard links, from an asset folder used by the image plugin."
      },
      "after": "b7302471a94ab32c",
      "date": 1660387139225
    },
    {
      "item": {
        "type": "factory",
        "id": "b0ad0aef882709d7"
      },
      "id": "b0ad0aef882709d7",
      "type": "add",
      "after": "2edadcf9599e4227",
      "date": 1660387260673
    },
    {
      "type": "edit",
      "id": "b0ad0aef882709d7",
      "item": {
        "type": "paragraph",
        "id": "b0ad0aef882709d7",
        "text": "This has the advantage the image is only stored a single time within the wiki farm. As opposed how the original image plugin worked, where the image was stored in the wiki page, once in the store, again in the journal action when it was added, and again each time the caption was edited."
      },
      "date": 1660387515522
    },
    {
      "type": "add",
      "id": "b827c7d22c8008a5",
      "item": {
        "type": "paragraph",
        "id": "b827c7d22c8008a5",
        "text": "We still squeeze the image, as before which also removes any image meta data, but will use a somewhat larger target size. Now resizing so the image will fit within a 1080p area ( "
      },
      "after": "b0ad0aef882709d7",
      "date": 1660387755867
    },
    {
      "type": "edit",
      "id": "b827c7d22c8008a5",
      "item": {
        "type": "paragraph",
        "id": "b827c7d22c8008a5",
        "text": "We still squeeze the image, as before which also removes any image meta data, but will use a somewhat larger target size. Now resizing so the image will fit within a 1080p area (1920×1080)."
      },
      "date": 1660387796841
    },
    {
      "type": "add",
      "id": "1bb1b5142efdc546",
      "item": {
        "type": "paragraph",
        "id": "1bb1b5142efdc546",
        "text": "The image plugin was given its own custom editor, which as well as for editing the caption allows the image width to be toggled between half and full page width, marker (latitude/longitude) data to be added, more on that later."
      },
      "after": "b827c7d22c8008a5",
      "date": 1660388471068
    },
    {
      "item": {
        "type": "factory",
        "id": "68b79fbdda64bacf"
      },
      "id": "68b79fbdda64bacf",
      "type": "add",
      "after": "1bb1b5142efdc546",
      "date": 1660390334823
    },
    {
      "type": "edit",
      "id": "68b79fbdda64bacf",
      "item": {
        "type": "image",
        "id": "68b79fbdda64bacf",
        "text": "Uploaded image",
        "size": "thumbnail",
        "width": 183,
        "height": 199,
        "url": "/assets/plugins/image/e7a4460e302fd589df9c8257db291031.jpg"
      },
      "date": 1660390394398
    },
    {
      "type": "remove",
      "id": "68b79fbdda64bacf",
      "date": 1660390506057
    },
    {
      "item": {
        "type": "factory",
        "id": "f8cd1669c6fa4591"
      },
      "id": "f8cd1669c6fa4591",
      "type": "add",
      "after": "1bb1b5142efdc546",
      "date": 1660390507745
    },
    {
      "type": "edit",
      "id": "f8cd1669c6fa4591",
      "item": {
        "type": "image",
        "id": "f8cd1669c6fa4591",
        "text": "Image editor, showing location data.",
        "size": "wide",
        "width": 419,
        "height": 673,
        "url": "/assets/plugins/image/1ebad1eb90fbd6f6c4d7322be44f53b9.jpg"
      },
      "date": 1660390537833
    },
    {
      "type": "edit",
      "id": "f8cd1669c6fa4591",
      "item": {
        "type": "image",
        "id": "f8cd1669c6fa4591",
        "text": "Image editor, showing location data.",
        "size": "thumbnail",
        "width": 183,
        "height": 294,
        "url": "/assets/plugins/image/1ebad1eb90fbd6f6c4d7322be44f53b9.jpg"
      },
      "date": 1660390545703
    },
    {
      "id": "f8cd1669c6fa4591",
      "type": "move",
      "order": [
        "0260a37da3205d4b",
        "cb2a3a9ef5862841",
        "813c3245c0a0fc43",
        "b7302471a94ab32c",
        "2edadcf9599e4227",
        "b0ad0aef882709d7",
        "b827c7d22c8008a5",
        "f8cd1669c6fa4591",
        "1bb1b5142efdc546"
      ],
      "date": 1660390551223
    },
    {
      "type": "edit",
      "id": "1bb1b5142efdc546",
      "item": {
        "type": "paragraph",
        "id": "1bb1b5142efdc546",
        "text": "The image plugin has been given its own custom editor, which as well as for editing the caption allows the image width to be toggled between half and full page width, marker (latitude/longitude) data to be added, more on that later."
      },
      "date": 1660390588207
    },
    {
      "type": "edit",
      "id": "1bb1b5142efdc546",
      "item": {
        "type": "paragraph",
        "id": "1bb1b5142efdc546",
        "text": "The image plugin has been given its own custom editor, which as well as for editing the caption allows the image width to be toggled between half and full page width, marker (latitude/longitude) data to be added, more on this later."
      },
      "date": 1660390606726
    },
    {
      "item": {
        "type": "factory",
        "id": "a1eed98a154d6834"
      },
      "id": "a1eed98a154d6834",
      "type": "add",
      "after": "1bb1b5142efdc546",
      "date": 1660390645491
    },
    {
      "type": "edit",
      "id": "a1eed98a154d6834",
      "item": {
        "type": "paragraph",
        "id": "a1eed98a154d6834",
        "text": "The image plugin shows "
      },
      "date": 1660391961182
    },
    {
      "type": "edit",
      "id": "1bb1b5142efdc546",
      "item": {
        "type": "paragraph",
        "id": "1bb1b5142efdc546",
        "text": "The image plugin has been given its own custom editor, for editing the caption, toggling the image width between half and full page width, and marker (latitude/longitude) data to be added, more on this later."
      },
      "date": 1660471989940
    },
    {
      "type": "remove",
      "id": "a1eed98a154d6834",
      "date": 1660472001538
    },
    {
      "item": {
        "type": "factory",
        "id": "1865b6b0b4b7b0a8"
      },
      "id": "1865b6b0b4b7b0a8",
      "type": "add",
      "after": "1bb1b5142efdc546",
      "date": 1660472020863
    },
    {
      "type": "edit",
      "id": "1865b6b0b4b7b0a8",
      "item": {
        "type": "paragraph",
        "id": "1865b6b0b4b7b0a8",
        "text": "The plugin uses relative URL to the image's location in the origin wiki's asset directory. If that fails, which it will if the page is from another wiki, or has been forked, or the image item has been dragged from elsewhere"
      },
      "date": 1660472386168
    },
    {
      "type": "edit",
      "id": "1865b6b0b4b7b0a8",
      "item": {
        "type": "paragraph",
        "id": "1865b6b0b4b7b0a8",
        "text": "The plugin uses relative URL to the image's location in the origin wiki's asset directory. It will also create a list of other possible places, using the site the page was loaded from together with the page's history, and try those in turn if the image is not found in the expected place."
      },
      "date": 1660472559319
    },
    {
      "type": "edit",
      "id": "1865b6b0b4b7b0a8",
      "item": {
        "type": "paragraph",
        "id": "1865b6b0b4b7b0a8",
        "text": "The plugin uses a relative URL for the image rather than absolute URL, as a strategy to encourage images to be forked along with their pages."
      },
      "date": 1660472759998
    },
    {
      "type": "add",
      "id": "05482cde3aa3cbea",
      "item": {
        "type": "paragraph",
        "id": "05482cde3aa3cbea",
        "text": "The plugin constructs a list of probable locations for the image, and tries them in turn if the image is not found. This list starts with the current origin, then if the page was load from elsewhere that site, followed by the sites from the page's history."
      },
      "after": "1865b6b0b4b7b0a8",
      "date": 1660473062908
    },
    {
      "type": "add",
      "id": "9ac6133edb683e49",
      "item": {
        "type": "paragraph",
        "id": "9ac6133edb683e49",
        "text": "If an image is wider than "
      },
      "after": "b827c7d22c8008a5",
      "date": 1660473109358
    },
    {
      "type": "edit",
      "id": "9ac6133edb683e49",
      "item": {
        "type": "paragraph",
        "id": "9ac6133edb683e49",
        "text": "If an image is wider than the wiki page, 415 pixels, it can be displayed either half or full wiki page width."
      },
      "date": 1660473269718
    },
    {
      "id": "f8cd1669c6fa4591",
      "type": "move",
      "order": [
        "0260a37da3205d4b",
        "cb2a3a9ef5862841",
        "813c3245c0a0fc43",
        "b7302471a94ab32c",
        "2edadcf9599e4227",
        "b0ad0aef882709d7",
        "b827c7d22c8008a5",
        "f8cd1669c6fa4591",
        "9ac6133edb683e49",
        "1bb1b5142efdc546",
        "1865b6b0b4b7b0a8",
        "05482cde3aa3cbea"
      ],
      "date": 1660473273802
    },
    {
      "id": "de49b255327a5357",
      "type": "add",
      "item": {
        "type": "image",
        "id": "de49b255327a5357",
        "text": "Flag in corner of image, clicking forks the image to the current wiki.",
        "size": "thumbnail",
        "width": 183,
        "height": 119,
        "url": "/assets/plugins/image/c5d5f81714a5890d5a1b482066fdf4d7.jpg"
      },
      "after": "1865b6b0b4b7b0a8",
      "attribution": {
        "page": "About Image Plugin (new)"
      },
      "date": 1660473332911
    },
    {
      "id": "de49b255327a5357",
      "type": "move",
      "order": [
        "0260a37da3205d4b",
        "cb2a3a9ef5862841",
        "813c3245c0a0fc43",
        "b7302471a94ab32c",
        "2edadcf9599e4227",
        "b0ad0aef882709d7",
        "b827c7d22c8008a5",
        "f8cd1669c6fa4591",
        "9ac6133edb683e49",
        "1bb1b5142efdc546",
        "1865b6b0b4b7b0a8",
        "05482cde3aa3cbea",
        "de49b255327a5357"
      ],
      "date": 1660473362750
    },
    {
      "type": "edit",
      "id": "de49b255327a5357",
      "item": {
        "type": "image",
        "id": "de49b255327a5357",
        "text": "Flag in corner of image, clicking forks the image to the current wiki.",
        "size": "thumbnail",
        "width": 183,
        "height": 119,
        "url": "/assets/plugins/image/c5d5f81714a5890d5a1b482066fdf4d7.jpg"
      },
      "date": 1660473371391
    },
    {
      "item": {
        "type": "factory",
        "id": "0ef616e350c8cfb7"
      },
      "id": "0ef616e350c8cfb7",
      "type": "add",
      "after": "de49b255327a5357",
      "date": 1660473398116
    },
    {
      "type": "edit",
      "id": "0ef616e350c8cfb7",
      "item": {
        "type": "paragraph",
        "id": "0ef616e350c8cfb7",
        "text": "When an image is not available from the origin wiki, the wiki owner, will see the flag of the site the image was loaded from."
      },
      "date": 1660473551551
    },
    {
      "type": "edit",
      "id": "0ef616e350c8cfb7",
      "item": {
        "type": "paragraph",
        "id": "0ef616e350c8cfb7",
        "text": "When an image is not available from the origin wiki, the wiki owner, will see the flag of the wiki the image was loaded from. Clicking on the flag will 'fork' the image to the origin wiki."
      },
      "date": 1660473644201
    },
    {
      "item": {
        "type": "factory",
        "id": "7070e5248ddd3d17"
      },
      "id": "7070e5248ddd3d17",
      "type": "add",
      "after": "0ef616e350c8cfb7",
      "date": 1660473752886
    },
    {
      "type": "edit",
      "id": "7070e5248ddd3d17",
      "item": {
        "type": "markdown",
        "id": "7070e5248ddd3d17",
        "text": "# Related Changed"
      },
      "date": 1660473781228
    },
    {
      "item": {
        "type": "factory",
        "id": "a50fb9cf8f08be18"
      },
      "id": "a50fb9cf8f08be18",
      "type": "add",
      "after": "7070e5248ddd3d17",
      "date": 1660473869547
    },
    {
      "type": "edit",
      "id": "a50fb9cf8f08be18",
      "item": {
        "type": "markdown",
        "id": "a50fb9cf8f08be18",
        "text": "__Server__"
      },
      "date": 1660473885145
    },
    {
      "type": "edit",
      "id": "a50fb9cf8f08be18",
      "item": {
        "type": "markdown",
        "id": "a50fb9cf8f08be18",
        "text": "__Server__ : A new parameter has been added to specify the location of a `commons` folder that is used across the wiki farm to store images. **N.B.** The image plugin uses hard links between the image files in the `commons` folder and the wiki's `plugins/images`"
      },
      "date": 1660474081521
    },
    {
      "type": "edit",
      "id": "a50fb9cf8f08be18",
      "item": {
        "type": "markdown",
        "id": "a50fb9cf8f08be18",
        "text": "__Server__ : A new parameter has been added to specify the location of a `commons` directory that is used across the wiki farm to store images. **N.B.** The image plugin uses hard links between the image files in the `commons` directory and the wiki's `plugins/image` directory. So, these need to be on the same physical drive."
      },
      "date": 1660474217643
    },
    {
      "item": {
        "type": "factory",
        "id": "6277c36d0b0e5460"
      },
      "id": "6277c36d0b0e5460",
      "type": "add",
      "after": "a50fb9cf8f08be18",
      "date": 1660475887353
    },
    {
      "type": "edit",
      "id": "a50fb9cf8f08be18",
      "item": {
        "type": "markdown",
        "id": "a50fb9cf8f08be18",
        "text": "__Server__ : \nA new parameter has been added to specify the location of a `commons` directory that is used across the wiki farm to store images. **N.B.** The image plugin uses hard links between the image files in the `commons` directory and the wiki's `plugins/image` directory. So, these need to be on the same physical drive."
      },
      "date": 1660476386404
    },
    {
      "type": "edit",
      "id": "a50fb9cf8f08be18",
      "item": {
        "type": "markdown",
        "id": "a50fb9cf8f08be18",
        "text": "__Server__: \nA new parameter has been added to specify the location of a `commons` directory that is used across the wiki farm to store images. **N.B.** The image plugin uses hard links between the image files in the `commons` directory and the wiki's `plugins/image` directory. So, these need to be on the same physical drive."
      },
      "date": 1660476392850
    },
    {
      "type": "edit",
      "id": "6277c36d0b0e5460",
      "item": {
        "type": "markdown",
        "id": "6277c36d0b0e5460",
        "text": "__Client__:\n*Attribution on Drag* — something that has been pondered for a while is to provide attribution for items dragged between pages, particularly if from other wiki. With the change to the image plugin this becomes more important when an image is dragged from a page in another wiki, so we can find the image to display. In the journal the add will ⨭ "
      },
      "date": 1660476800265
    },
    {
      "type": "edit",
      "id": "6277c36d0b0e5460",
      "item": {
        "type": "markdown",
        "id": "6277c36d0b0e5460",
        "text": "__Client__:\n*Attribution on Drag* — something that has been pondered for a while is to provide attribution for items dragged between pages, particularly if from other wiki. With the change to the image plugin this becomes more important when an image is dragged from a page in another wiki, so we can find the image to display. In the journal the add item uses a slight different symbol `⨭` and has the other wiki's flag as background. Where an item has been moved to another page  "
      },
      "date": 1660476995151
    },
    {
      "type": "edit",
      "id": "6277c36d0b0e5460",
      "item": {
        "type": "markdown",
        "id": "6277c36d0b0e5460",
        "text": "__Client__:\n*Attribution on Drag* — something that has been pondered for a while is to provide attribution for items dragged between pages, particularly if from other wiki. With the change to the image plugin this becomes more important when an image is dragged from a page in another wiki, so we can find the image to display. In the journal the add item uses a slight different symbol `⨭` and has the other wiki's flag as background. Where an item has been moved to another page a modified symbol `⨵`."
      },
      "date": 1660477090685
    },
    {
      "type": "edit",
      "id": "f8cd1669c6fa4591",
      "item": {
        "type": "image",
        "id": "f8cd1669c6fa4591",
        "text": "Image editor, showing location data.",
        "size": "wide",
        "width": 419,
        "height": 673,
        "url": "/assets/plugins/image/1ebad1eb90fbd6f6c4d7322be44f53b9.jpg"
      },
      "date": 1660818892806
    },
    {
      "type": "edit",
      "id": "f8cd1669c6fa4591",
      "item": {
        "type": "image",
        "id": "f8cd1669c6fa4591",
        "text": "Image editor, showing location data.",
        "size": "thumbnail",
        "width": 183,
        "height": 294,
        "url": "/assets/plugins/image/1ebad1eb90fbd6f6c4d7322be44f53b9.jpg"
      },
      "date": 1660818906587
    },
    {
      "type": "edit",
      "id": "f8cd1669c6fa4591",
      "item": {
        "type": "image",
        "id": "f8cd1669c6fa4591",
        "text": "Image editor, showing location data.",
        "size": "thumbnail",
        "width": 183,
        "height": 294,
        "url": "/assets/plugins/image/1ebad1eb90fbd6f6c4d7322be44f53b9.jpg"
      },
      "date": 1660818915046
    },
    {
      "type": "edit",
      "id": "cb2a3a9ef5862841",
      "item": {
        "type": "paragraph",
        "id": "cb2a3a9ef5862841",
        "text": "This update started focused on improvements to the image plugin, but also sees the map plugin and search updated."
      },
      "date": 1663843907939
    },
    {
      "type": "edit",
      "id": "2edadcf9599e4227",
      "item": {
        "type": "paragraph",
        "id": "2edadcf9599e4227",
        "text": "Rather than storing them within the wiki page, they are given a name using a hash of the image, stored centrally in the wiki farm, and linked to as asset files."
      },
      "date": 1663844093498
    },
    {
      "type": "edit",
      "id": "b7302471a94ab32c",
      "item": {
        "type": "paragraph",
        "id": "b7302471a94ab32c",
        "text": "This update changes not only how we store images, but also how we display them. "
      },
      "date": 1663844599495
    },
    {
      "type": "edit",
      "id": "2edadcf9599e4227",
      "item": {
        "type": "paragraph",
        "id": "2edadcf9599e4227",
        "text": "Rather than storing images within the wiki page, they are given a name using a hash of the file contents, stored centrally in the wiki farm, and linked to from asset directory."
      },
      "date": 1663844663666
    },
    {
      "type": "edit",
      "id": "b0ad0aef882709d7",
      "item": {
        "type": "factory",
        "id": "b0ad0aef882709d7",
        "text": "This has the advantage the image is only stored a single time within the wiki farm. *As opposed how the original image plugin worked, where the image was stored in the wiki page, once in the store, again in the journal action when it was added, and again each time the caption was edited."
      },
      "date": 1663844687170
    },
    {
      "type": "edit",
      "id": "b0ad0aef882709d7",
      "item": {
        "type": "markdown",
        "id": "b0ad0aef882709d7",
        "text": "This has the advantage the image is only stored a single time within the wiki farm. *As opposed how the original image plugin worked, where the image was stored in the wiki page, once in the store, again in the journal action when it was added, and again each time the caption was edited.*"
      },
      "date": 1663844693410
    },
    {
      "type": "edit",
      "id": "b827c7d22c8008a5",
      "item": {
        "type": "paragraph",
        "id": "b827c7d22c8008a5",
        "text": "We still squeeze the image, as before which also removes any image meta data, but with fitting within a 1080p area as target size."
      },
      "date": 1663844755680
    },
    {
      "type": "edit",
      "id": "9ac6133edb683e49",
      "item": {
        "type": "factory",
        "id": "9ac6133edb683e49",
        "text": "If an image is wider than the wiki page, 415 pixels, it can be displayed either half or full wiki page width. *"
      },
      "date": 1663844774291
    },
    {
      "type": "edit",
      "id": "9ac6133edb683e49",
      "item": {
        "type": "markdown",
        "id": "9ac6133edb683e49",
        "text": "If an image is wider than the wiki page, 415 pixels, it can be displayed either half or full wiki page width. *If the image is narrower than this the size option will not be given.*"
      },
      "date": 1663844811627
    },
    {
      "type": "edit",
      "id": "1bb1b5142efdc546",
      "item": {
        "type": "paragraph",
        "id": "1bb1b5142efdc546",
        "text": "The image plugin has been given its own custom editor, for editing the caption, toggling the image width between half and full page width, and marker (latitude/longitude) data."
      },
      "date": 1663844857516
    },
    {
      "type": "edit",
      "id": "05482cde3aa3cbea",
      "item": {
        "type": "paragraph",
        "id": "05482cde3aa3cbea",
        "text": "The plugin constructs a list of probable locations for the image, and tries them in turn if the image is not found. This list starts with the current origin, then if the page was load from elsewhere that site, followed by the sites from the page's history. "
      },
      "date": 1663844944278
    },
    {
      "type": "edit",
      "id": "0ef616e350c8cfb7",
      "item": {
        "type": "paragraph",
        "id": "0ef616e350c8cfb7",
        "text": "When an image is not available from the origin wiki, the wiki owner, will see the flag in the bottom right of the image showing the wiki the image was loaded from. Clicking on the flag will 'fork' the image to the origin wiki."
      },
      "date": 1663845061852
    },
    {
      "type": "remove",
      "id": "7070e5248ddd3d17",
      "date": 1663845302446
    },
    {
      "item": {
        "type": "factory",
        "id": "a4e33a0ef5a077eb"
      },
      "id": "a4e33a0ef5a077eb",
      "type": "add",
      "after": "6277c36d0b0e5460",
      "date": 1663845332298
    },
    {
      "type": "edit",
      "id": "a4e33a0ef5a077eb",
      "item": {
        "type": "markdown",
        "id": "a4e33a0ef5a077eb",
        "text": "# Map Plugin\n## a\n### a\n#### a\n##### a\n###### a"
      },
      "date": 1663845377832
    },
    {
      "type": "edit",
      "id": "a4e33a0ef5a077eb",
      "item": {
        "type": "markdown",
        "id": "a4e33a0ef5a077eb",
        "text": "# Map Plugin"
      },
      "date": 1663845392401
    },
    {
      "item": {
        "type": "factory",
        "id": "08b1d403573033c0"
      },
      "id": "08b1d403573033c0",
      "type": "add",
      "after": "a4e33a0ef5a077eb",
      "date": 1663845396150
    },
    {
      "type": "add",
      "id": "96d0aaa2485d6e07",
      "item": {
        "type": "factory",
        "id": "96d0aaa2485d6e07",
        "text": "Where a image has a location, the image will act as a marker source. Locations will be extracted from an image's meta data, if present. To aid entry from other sources the location can be pasted into either field as `lat/long` or `lat,long`. Many online maps will provide one of those formats either in a right-click menu, or in the "
      },
      "after": "0ef616e350c8cfb7",
      "date": 1663845705484
    },
    {
      "type": "edit",
      "id": "96d0aaa2485d6e07",
      "item": {
        "type": "markdown",
        "id": "96d0aaa2485d6e07",
        "text": "Where a image has a location, the image will act as a marker source. Locations will be extracted from an image's meta data, if present. To aid entry from other sources the location can be pasted into either field as `lat/long` or `lat,long`. *Many online maps will provide one of those formats either in a right-click menu, or in the address bar.*"
      },
      "date": 1663845724955
    },
    {
      "type": "edit",
      "id": "08b1d403573033c0",
      "item": {
        "type": "paragraph",
        "id": "08b1d403573033c0",
        "text": "Previously the map plugin has "
      },
      "date": 1663845849213
    },
    {
      "type": "edit",
      "id": "08b1d403573033c0",
      "item": {
        "type": "paragraph",
        "id": "08b1d403573033c0",
        "text": "The `PAGE` keyword has been added. This only looks on the current page for markers."
      },
      "date": 1663845998559
    },
    {
      "type": "add",
      "id": "db69e5a65b51e3fb",
      "item": {
        "type": "paragraph",
        "id": "db69e5a65b51e3fb",
        "text": "**N.B.** The plugin will only find marker sources that have already been rendered. So while markers from sources below the map may get shown while editing, the will not get shown when the page is first loaded. By using the freeze button `❅` all the markers will be included on the map, "
      },
      "after": "08b1d403573033c0",
      "date": 1663846276213
    },
    {
      "type": "edit",
      "id": "db69e5a65b51e3fb",
      "item": {
        "type": "paragraph",
        "id": "db69e5a65b51e3fb",
        "text": "**N.B.** The plugin will only find marker sources that have already been rendered. So while markers from sources below the map may get shown while editing, the will not get shown when the page is first loaded. By using the freeze button `❅` all the markers will be included on the map."
      },
      "date": 1663846382063
    },
    {
      "type": "edit",
      "id": "db69e5a65b51e3fb",
      "item": {
        "type": "markdown",
        "id": "db69e5a65b51e3fb",
        "text": "**N.B.** The plugin will only find marker sources that have already been rendered. So while markers from sources below the map may get shown while editing, the will not get shown when the page is first loaded. By using the freeze button `❅` all the markers will be included on the map."
      },
      "date": 1663846387721
    },
    {
      "type": "edit",
      "id": "08b1d403573033c0",
      "item": {
        "type": "markdown",
        "id": "08b1d403573033c0",
        "text": "The `PAGE` keyword has been added. This only looks on the current page for markers."
      },
      "date": 1663851126528
    },
    {
      "type": "edit",
      "id": "cb2a3a9ef5862841",
      "item": {
        "type": "paragraph",
        "id": "cb2a3a9ef5862841",
        "text": "This update, contains a number of breaking changes. It started focused on improvements to the image plugin, but also sees the map plugin and search updated."
      },
      "date": 1663865353172
    },
    {
      "item": {
        "type": "factory",
        "id": "404e128eda4635c6"
      },
      "id": "404e128eda4635c6",
      "type": "add",
      "after": "db69e5a65b51e3fb",
      "date": 1663865365906
    },
    {
      "type": "edit",
      "id": "404e128eda4635c6",
      "item": {
        "type": "markdown",
        "id": "404e128eda4635c6",
        "text": "# Drag on Attribution"
      },
      "date": 1663865384938
    },
    {
      "id": "6277c36d0b0e5460",
      "type": "move",
      "order": [
        "0260a37da3205d4b",
        "cb2a3a9ef5862841",
        "813c3245c0a0fc43",
        "b7302471a94ab32c",
        "2edadcf9599e4227",
        "b0ad0aef882709d7",
        "b827c7d22c8008a5",
        "f8cd1669c6fa4591",
        "9ac6133edb683e49",
        "1bb1b5142efdc546",
        "1865b6b0b4b7b0a8",
        "05482cde3aa3cbea",
        "de49b255327a5357",
        "0ef616e350c8cfb7",
        "96d0aaa2485d6e07",
        "a50fb9cf8f08be18",
        "a4e33a0ef5a077eb",
        "08b1d403573033c0",
        "db69e5a65b51e3fb",
        "404e128eda4635c6",
        "6277c36d0b0e5460"
      ],
      "date": 1663865392601
    },
    {
      "type": "edit",
      "id": "6277c36d0b0e5460",
      "item": {
        "type": "markdown",
        "id": "6277c36d0b0e5460",
        "text": "Something that has been pondered for a while is to provide attribution for items dragged between pages, particularly if from other wiki.\n"
      },
      "date": 1663865453430
    },
    {
      "type": "edit",
      "id": "6277c36d0b0e5460",
      "item": {
        "type": "factory",
        "id": "6277c36d0b0e5460",
        "text": "Something that has been pondered for a while is to provide attribution for items dragged between pages, particularly if from other wiki.\nWith the change to the image plugin this becomes more important when an image is dragged from a page in another wiki, so we can find the image to display. In the journal the add item uses a slight different symbol `⨭` and has the other wiki's flag as background. Where an item has been moved to another page a modified symbol `⨵`."
      },
      "date": 1663865459766
    },
    {
      "type": "remove",
      "id": "6277c36d0b0e5460",
      "date": 1663865482756
    },
    {
      "item": {
        "type": "factory",
        "id": "136ed9141a817fdf"
      },
      "id": "136ed9141a817fdf",
      "type": "add",
      "after": "404e128eda4635c6",
      "date": 1663865484038
    },
    {
      "type": "edit",
      "id": "136ed9141a817fdf",
      "item": {
        "type": "paragraph",
        "id": "136ed9141a817fdf",
        "text": "Something that has been pondered for a while is to provide attribution for items dragged between pages, particularly if from other wiki."
      },
      "date": 1663865510940
    },
    {
      "type": "add",
      "id": "0dfac8f0cf36ee7d",
      "item": {
        "type": "paragraph",
        "id": "0dfac8f0cf36ee7d",
        "text": "With the change to the image plugin this becomes more important when an image is dragged from a page in another wiki, so we can find the image to display."
      },
      "after": "136ed9141a817fdf",
      "date": 1663865535104
    },
    {
      "type": "add",
      "id": "f33c03de68eb7b12",
      "item": {
        "type": "paragraph",
        "id": "f33c03de68eb7b12",
        "text": "In the journal the add item uses a slight different symbol `⨭` and has the other wiki's flag as background. Where an item has been moved to another page a modified symbol `⨵`."
      },
      "after": "0dfac8f0cf36ee7d",
      "date": 1663865563287
    },
    {
      "type": "edit",
      "id": "f33c03de68eb7b12",
      "item": {
        "type": "markdown",
        "id": "f33c03de68eb7b12",
        "text": "In the journal the add item uses a slight different symbol `⨭` and has the other wiki's flag as background. Where an item has been moved to another page a modified symbol `⨵`."
      },
      "date": 1663865567145
    },
    {
      "item": {
        "type": "factory",
        "id": "e2e27740db22a2aa"
      },
      "id": "e2e27740db22a2aa",
      "type": "add",
      "after": "f33c03de68eb7b12",
      "date": 1663866021041
    },
    {
      "type": "edit",
      "id": "e2e27740db22a2aa",
      "item": {
        "type": "markdown",
        "id": "e2e27740db22a2aa",
        "text": "# Search"
      },
      "date": 1663866031345
    },
    {
      "item": {
        "type": "factory",
        "id": "80b27dfa2e6f82a0"
      },
      "id": "80b27dfa2e6f82a0",
      "type": "add",
      "after": "e2e27740db22a2aa",
      "date": 1663866033777
    },
    {
      "type": "edit",
      "id": "80b27dfa2e6f82a0",
      "item": {
        "type": "paragraph",
        "id": "80b27dfa2e6f82a0",
        "text": "We update to the latest version of `minisearch`, the search library we use."
      },
      "date": 1663866081664
    },
    {
      "type": "edit",
      "id": "80b27dfa2e6f82a0",
      "item": {
        "type": "paragraph",
        "id": "80b27dfa2e6f82a0",
        "text": "We update to the latest version of [https://github.com/lucaong/minisearch minisearch], the search library we use for search. "
      },
      "date": 1663866135205
    },
    {
      "type": "edit",
      "id": "80b27dfa2e6f82a0",
      "item": {
        "type": "paragraph",
        "id": "80b27dfa2e6f82a0",
        "text": "We update to the latest version of [https://github.com/lucaong/minisearch minisearch], the search library we use for search. We had been holding off this update for a while as there is a change to the structure of the saved index file. This should make"
      },
      "date": 1663866282135
    },
    {
      "type": "edit",
      "id": "80b27dfa2e6f82a0",
      "item": {
        "type": "paragraph",
        "id": "80b27dfa2e6f82a0",
        "text": "We update to the latest version of [https://github.com/lucaong/minisearch minisearch], the search library we use for search. We had been holding off this update for a while as the saved index file structure has changed."
      },
      "date": 1663869244007
    },
    {
      "type": "edit",
      "id": "cb2a3a9ef5862841",
      "item": {
        "type": "paragraph",
        "id": "cb2a3a9ef5862841",
        "text": "This months set of updates contains a number of [[Breaking Changes]]. It started focused on improvements to the image plugin, but also sees the map plugin and search updated."
      },
      "date": 1664015259950
    },
    {
      "type": "edit",
      "id": "db69e5a65b51e3fb",
      "item": {
        "type": "markdown",
        "id": "db69e5a65b51e3fb",
        "text": "**N.B.** Only find marker sources that have already been rendered will be found when loading the page. Hovering over the freeze button, `❅`, will include the markers that were not found. Pressing the freeze button will freeze all the markers, so they are shown when the page is loaded."
      },
      "date": 1664018431930
    },
    {
      "type": "edit",
      "id": "80b27dfa2e6f82a0",
      "item": {
        "type": "paragraph",
        "id": "80b27dfa2e6f82a0",
        "text": "We update to the latest version of [https://github.com/lucaong/minisearch minisearch], this is the search library we use for search. We had been holding off this update for a while as the saved index file structure has changed."
      },
      "date": 1664018519018
    },
    {
      "type": "add",
      "id": "05ef4b86fee59731",
      "item": {
        "type": "paragraph",
        "id": "05ef4b86fee59731",
        "text": "When wiki is started the index will get remade using this updated version."
      },
      "after": "80b27dfa2e6f82a0",
      "date": 1664018602583
    },
    {
      "type": "add",
      "id": "915cf0ca99008de6",
      "item": {
        "type": "paragraph",
        "id": "915cf0ca99008de6",
        "text": "Wiki using the old version will fail to load an updated index, so they will be unable to search those site in their neighbourhood that have updated."
      },
      "after": "05ef4b86fee59731",
      "date": 1664018730991
    },
    {
      "type": "add",
      "id": "f41431f2291dc7fc",
      "item": {
        "type": "paragraph",
        "id": "f41431f2291dc7fc",
        "text": "Wiki using this new version can't load an old version of an index. However, they can detect this and will fall back to constructing an index created using the page synopsis."
      },
      "after": "915cf0ca99008de6",
      "date": 1664018835335
    },
    {
      "type": "edit",
      "id": "cb2a3a9ef5862841",
      "item": {
        "type": "paragraph",
        "id": "cb2a3a9ef5862841",
        "text": "This months set of updates contains breaking changes in how images are handled, and in the structure of the saved search index file."
      },
      "date": 1664023218706
    },
    {
      "type": "add",
      "id": "b6b28a02119641ac",
      "item": {
        "type": "paragraph",
        "id": "b6b28a02119641ac",
        "text": "It started focused on improvements to the image plugin, but also sees the map plugin and search updated."
      },
      "after": "cb2a3a9ef5862841",
      "date": 1664023229297
    },
    {
      "type": "remove",
      "id": "0260a37da3205d4b",
      "date": 1664023256561
    },
    {
      "type": "edit",
      "id": "9ac6133edb683e49",
      "item": {
        "type": "markdown",
        "id": "9ac6133edb683e49",
        "text": "If an image is wider than the wiki page, 415 pixels, it can be displayed either half or full wiki page width. *If the image is narrower than this, the size option will not be given.*"
      },
      "date": 1664023789479
    },
    {
      "type": "fork",
      "date": 1664023913136
    },
    {
      "item": {
        "type": "factory",
        "id": "778dd40cbed08b58"
      },
      "id": "778dd40cbed08b58",
      "type": "add",
      "after": "f41431f2291dc7fc",
      "date": 1664023916558
    },
    {
      "id": "778dd40cbed08b58",
      "type": "move",
      "order": [
        "778dd40cbed08b58",
        "cb2a3a9ef5862841",
        "b6b28a02119641ac",
        "813c3245c0a0fc43",
        "b7302471a94ab32c",
        "2edadcf9599e4227",
        "b0ad0aef882709d7",
        "b827c7d22c8008a5",
        "f8cd1669c6fa4591",
        "9ac6133edb683e49",
        "1bb1b5142efdc546",
        "1865b6b0b4b7b0a8",
        "05482cde3aa3cbea",
        "de49b255327a5357",
        "0ef616e350c8cfb7",
        "96d0aaa2485d6e07",
        "a50fb9cf8f08be18",
        "a4e33a0ef5a077eb",
        "08b1d403573033c0",
        "db69e5a65b51e3fb",
        "404e128eda4635c6",
        "136ed9141a817fdf",
        "0dfac8f0cf36ee7d",
        "f33c03de68eb7b12",
        "e2e27740db22a2aa",
        "80b27dfa2e6f82a0",
        "05ef4b86fee59731",
        "915cf0ca99008de6",
        "f41431f2291dc7fc"
      ],
      "date": 1664023927167
    },
    {
      "type": "edit",
      "id": "778dd40cbed08b58",
      "item": {
        "type": "markdown",
        "id": "778dd40cbed08b58",
        "text": "__*This update is expected to be released soon*__"
      },
      "date": 1664023978009
    },
    {
      "type": "remove",
      "id": "778dd40cbed08b58",
      "date": 1664033591475
    },
    {
      "type": "edit",
      "id": "b0ad0aef882709d7",
      "item": {
        "type": "markdown",
        "id": "b0ad0aef882709d7",
        "text": "This has the advantage the image is only stored a single time within the wiki farm. *Opposed to how the original image plugin worked, where the image was stored in the wiki page, once in the story, again in the journal action when it was added, and again each time the caption was edited.*"
      },
      "date": 1664033665378
    },
    {
      "type": "fork",
      "site": "goals.pod.rodwell.me",
      "date": 1664039708125
    }
  ]
}