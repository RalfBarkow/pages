{
  "title": "Wiki Update - February 2023",
  "story": [
    {
      "type": "paragraph",
      "id": "d9d820e0a04087dc",
      "text": "An early February 2023 update, to resolve an issue with creating a build for NixOS. Thanks to Ralf Barkow for raising awareness of this problem."
    },
    {
      "type": "markdown",
      "id": "7ed6d1c960c73e3a",
      "text": "Running `node2nix` was hanging with cloning the `passport-twitter` dependency in `wiki-security-passportjs`, having problems with connection to github. See Ralf's notes → [[Federated Wiki Version 0.28.0]]"
    },
    {
      "type": "reference",
      "id": "533bea87ae3bbbfd",
      "site": "wiki.ralfbarkow.ch",
      "slug": "federated-wiki-version-0280",
      "title": "Federated Wiki Version 0.28.0",
      "text": "Note: Describe the build process on a NixOS server, starting with the node2nix step. ⇒ \"wiki\","
    },
    {
      "type": "markdown",
      "id": "dfe398768c7b8ad0",
      "text": "Back in March 2021, security advisory [https://nvd.nist.gov/vuln/detail/CVE-2021-21366 CVE-2021-21366] was raised against the `xmldom` package which is used in dependency tree of `passport-twitter`. An updated version of `xmldom` was published as `@xmldom/xmldom` [https://github.com/xmldom/xmldom/issues/271 background].\n"
    },
    {
      "type": "markdown",
      "id": "76fb6016795311c4",
      "text": "Despite there being issues, and pull request, on `passport-twitter` and its dependent `node-xtraverse` to switch to the fixed `@xmldom/xmldom` package, nothing happened.\n"
    },
    {
      "type": "markdown",
      "id": "9746051619ddf402",
      "text": "To get a fix quickly. I forked both `passport-twitter` and `node-xtraverse`. Updating the version of `xmldom` used in `node-xtraverse`, and used that in `passport-twitter` linking to a specific commit in the repository. Likewise, with the version of `passport-twitter` used in `wiki-security-passportjs`.\n"
    },
    {
      "type": "markdown",
      "id": "7230e02c3d0e96f1",
      "text": "Forward to Feb. 2023, with the `node2nix` issue I had a look if `passport-twitter` had been update. It hadn't. But, on the [https://github.com/jaredhanson/passport-twitter/issues/107 security issue] that an updated package was available as `@passport-js/passport-twitter` with an update to resolve the `xmldom` security issue."
    },
    {
      "type": "markdown",
      "id": "74ab02250049a2bd",
      "text": "With an update available, `wiki-security-passportjs` was updated to use `@passport-js/passport-twitter`, and the `wiki` package to update its package lock file, which `node2nix` uses."
    },
    {
      "type": "markdown",
      "id": "6e3863c26eb6b26f",
      "text": "*This is very much a repeat of the events around the GitHub login we had a few years ago. Though in that case it was a change of oAuth version, rather than a security issue.* "
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "Wiki Update - February 2023",
        "story": []
      },
      "date": 1675787624664
    },
    {
      "item": {
        "type": "factory",
        "id": "d9d820e0a04087dc"
      },
      "id": "d9d820e0a04087dc",
      "type": "add",
      "date": 1675787631874
    },
    {
      "type": "edit",
      "id": "d9d820e0a04087dc",
      "item": {
        "type": "paragraph",
        "id": "d9d820e0a04087dc",
        "text": "An early February 2023 update."
      },
      "date": 1675787674687
    },
    {
      "type": "edit",
      "id": "d9d820e0a04087dc",
      "item": {
        "type": "paragraph",
        "id": "d9d820e0a04087dc",
        "text": "An early February 2023 update, to resolve an issue with creating a build for NixOS. Thanks to Ralf Barkow for raising awareness of this problem."
      },
      "date": 1675787883142
    },
    {
      "item": {
        "type": "factory",
        "id": "7ed6d1c960c73e3a"
      },
      "id": "7ed6d1c960c73e3a",
      "type": "add",
      "after": "d9d820e0a04087dc",
      "date": 1675787884576
    },
    {
      "type": "edit",
      "id": "7ed6d1c960c73e3a",
      "item": {
        "type": "factory",
        "id": "7ed6d1c960c73e3a",
        "text": "Running `node2nix`"
      },
      "date": 1675787938407
    },
    {
      "type": "edit",
      "id": "7ed6d1c960c73e3a",
      "item": {
        "type": "markdown",
        "id": "7ed6d1c960c73e3a",
        "text": "Running `node2nix` was hanging with cloning the `passport-twitter` dependency in `wiki-security-passportjs`, having problems with "
      },
      "date": 1675788075138
    },
    {
      "type": "edit",
      "id": "7ed6d1c960c73e3a",
      "item": {
        "type": "markdown",
        "id": "7ed6d1c960c73e3a",
        "text": "Running `node2nix` was hanging with cloning the `passport-twitter` dependency in `wiki-security-passportjs`, having problems with connection to github. See Ralf's notes → [[Federated Wiki Version 0.28.0]]"
      },
      "date": 1675788216599
    },
    {
      "item": {
        "type": "factory",
        "id": "533bea87ae3bbbfd"
      },
      "id": "533bea87ae3bbbfd",
      "type": "add",
      "after": "7ed6d1c960c73e3a",
      "date": 1675788249002
    },
    {
      "type": "edit",
      "id": "533bea87ae3bbbfd",
      "item": {
        "type": "reference",
        "id": "533bea87ae3bbbfd",
        "site": "wiki.ralfbarkow.ch",
        "slug": "federated-wiki-version-0280",
        "title": "Federated Wiki Version 0.28.0",
        "text": "Note: Describe the build process on a NixOS server, starting with the node2nix step. ⇒ \"wiki\","
      },
      "date": 1675788254832
    },
    {
      "item": {
        "type": "factory",
        "id": "dfe398768c7b8ad0"
      },
      "id": "dfe398768c7b8ad0",
      "type": "add",
      "after": "533bea87ae3bbbfd",
      "date": 1675788270132
    },
    {
      "type": "edit",
      "id": "dfe398768c7b8ad0",
      "item": {
        "type": "paragraph",
        "id": "dfe398768c7b8ad0",
        "text": "Back in "
      },
      "date": 1675788289531
    },
    {
      "type": "edit",
      "id": "dfe398768c7b8ad0",
      "item": {
        "type": "paragraph",
        "id": "dfe398768c7b8ad0",
        "text": "Back in March 2021, a "
      },
      "date": 1675788332201
    },
    {
      "type": "edit",
      "id": "dfe398768c7b8ad0",
      "item": {
        "type": "factory",
        "id": "dfe398768c7b8ad0",
        "text": "Back in March 2021, security advisory [https://nvd.nist.gov/vuln/detail/CVE-2021-21366 CVE-2021-21366] was raised against the `xmldom` package which is used in "
      },
      "date": 1675788532761
    },
    {
      "type": "edit",
      "id": "dfe398768c7b8ad0",
      "item": {
        "type": "markdown",
        "id": "dfe398768c7b8ad0",
        "text": "Back in March 2021, security advisory [https://nvd.nist.gov/vuln/detail/CVE-2021-21366 CVE-2021-21366] was raised against the `xmldom` package which is used in dependency tree of `passport-twitter`. "
      },
      "date": 1675788608265
    },
    {
      "type": "edit",
      "id": "dfe398768c7b8ad0",
      "item": {
        "type": "markdown",
        "id": "dfe398768c7b8ad0",
        "text": "Back in March 2021, security advisory [https://nvd.nist.gov/vuln/detail/CVE-2021-21366 CVE-2021-21366] was raised against the `xmldom` package which is used in dependency tree of `passport-twitter`. An updated version of `xmldom` was published as `@xmldom/xmldom"
      },
      "date": 1675788793569
    },
    {
      "type": "edit",
      "id": "dfe398768c7b8ad0",
      "item": {
        "type": "markdown",
        "id": "dfe398768c7b8ad0",
        "text": "Back in March 2021, security advisory [https://nvd.nist.gov/vuln/detail/CVE-2021-21366 CVE-2021-21366] was raised against the `xmldom` package which is used in dependency tree of `passport-twitter`. An updated version of `xmldom` was published as `@xmldom/xmldom`, see "
      },
      "date": 1675788808666
    },
    {
      "type": "edit",
      "id": "dfe398768c7b8ad0",
      "item": {
        "type": "markdown",
        "id": "dfe398768c7b8ad0",
        "text": "Back in March 2021, security advisory [https://nvd.nist.gov/vuln/detail/CVE-2021-21366 CVE-2021-21366] was raised against the `xmldom` package which is used in dependency tree of `passport-twitter`. An updated version of `xmldom` was published as `@xmldom/xmldom` [https://github.com/xmldom/xmldom/issues/271 background].\n"
      },
      "date": 1675789015253
    },
    {
      "type": "add",
      "id": "76fb6016795311c4",
      "item": {
        "type": "markdown",
        "id": "76fb6016795311c4",
        "text": "Despite there being issues, and pull request, on `passport-twitter` and its dependent `node-xtraverse` to switch to the fixed `@xmldom/xmldom` package, nothing happened.\n"
      },
      "after": "dfe398768c7b8ad0",
      "date": 1675789045597
    },
    {
      "type": "add",
      "id": "9746051619ddf402",
      "item": {
        "type": "markdown",
        "id": "9746051619ddf402",
        "text": "To get a fix quickly. I forked both `passport-twitter` and `node-xtraverse`. Updating the version of `xmldom` used in `node-xtraverse`, and used that in `passport-twitter` linking to a specific commit in the repository. Likewise, with the version of `passport-twitter` used in `wiki-security-passportjs`.\n"
      },
      "after": "76fb6016795311c4",
      "date": 1675789321237
    },
    {
      "type": "add",
      "id": "7230e02c3d0e96f1",
      "item": {
        "type": "markdown",
        "id": "7230e02c3d0e96f1",
        "text": "Forward to Feb. 2023, with the `node2nix` issue I had a look if `passport-twitter` had been update. It hadn't. But, in the issue that "
      },
      "after": "9746051619ddf402",
      "date": 1675789464314
    },
    {
      "type": "edit",
      "id": "7230e02c3d0e96f1",
      "item": {
        "type": "markdown",
        "id": "7230e02c3d0e96f1",
        "text": "Forward to Feb. 2023, with the `node2nix` issue I had a look if `passport-twitter` had been update. It hadn't. But, on the [https://github.com/jaredhanson/passport-twitter/issues/107 security issue] that "
      },
      "date": 1675789578587
    },
    {
      "type": "edit",
      "id": "7230e02c3d0e96f1",
      "item": {
        "type": "markdown",
        "id": "7230e02c3d0e96f1",
        "text": "Forward to Feb. 2023, with the `node2nix` issue I had a look if `passport-twitter` had been update. It hadn't. But, on the [https://github.com/jaredhanson/passport-twitter/issues/107 security issue] that an updated package was available as `@passport-js/passport-twitter`"
      },
      "date": 1675789627328
    },
    {
      "type": "edit",
      "id": "7230e02c3d0e96f1",
      "item": {
        "type": "markdown",
        "id": "7230e02c3d0e96f1",
        "text": "Forward to Feb. 2023, with the `node2nix` issue I had a look if `passport-twitter` had been update. It hadn't. But, on the [https://github.com/jaredhanson/passport-twitter/issues/107 security issue] that an updated package was available as `@passport-js/passport-twitter` with an update to resolve the `xmldom` security issue."
      },
      "date": 1675789832091
    },
    {
      "item": {
        "type": "factory",
        "id": "74ab02250049a2bd"
      },
      "id": "74ab02250049a2bd",
      "type": "add",
      "after": "7230e02c3d0e96f1",
      "date": 1675789839962
    },
    {
      "type": "edit",
      "id": "74ab02250049a2bd",
      "item": {
        "type": "markdown",
        "id": "74ab02250049a2bd",
        "text": "With an update available, `wiki-security-passportjs` was updated to use `@passport-js/passport-twitter`, and the `wiki` to update its package lock file, which `node2nix` uses."
      },
      "date": 1675790081552
    },
    {
      "item": {
        "type": "factory",
        "id": "6e3863c26eb6b26f"
      },
      "id": "6e3863c26eb6b26f",
      "type": "add",
      "after": "74ab02250049a2bd",
      "date": 1675790477787
    },
    {
      "type": "edit",
      "id": "6e3863c26eb6b26f",
      "item": {
        "type": "markdown",
        "id": "6e3863c26eb6b26f",
        "text": "*This is very much a repeat of the events around the Github "
      },
      "date": 1675790537110
    },
    {
      "type": "edit",
      "id": "6e3863c26eb6b26f",
      "item": {
        "type": "markdown",
        "id": "6e3863c26eb6b26f",
        "text": "*This is very much a repeat of the events around the GitHub login we had a few years ago. Though in that case it was a change of oAuth version, rather than a security issue.* "
      },
      "date": 1675790597345
    },
    {
      "type": "edit",
      "id": "74ab02250049a2bd",
      "item": {
        "type": "markdown",
        "id": "74ab02250049a2bd",
        "text": "With an update available, `wiki-security-passportjs` was updated to use `@passport-js/passport-twitter`, and the `wiki` package to update its package lock file, which `node2nix` uses."
      },
      "date": 1675790717379
    },
    {
      "type": "fork",
      "site": "goals.pod.rodwell.me",
      "date": 1675792718797
    }
  ]
}