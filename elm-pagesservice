{
  "title": "elm-pages.service",
  "story": [
    {
      "type": "paragraph",
      "id": "90ecc08458ac00e4",
      "text": "How to configure Systemd service unit to start Node app with \"npm start\" instead of \"app.js\" [https://serverfault.com/questions/1018676/how-to-configure-systemd-service-unit-to-start-node-app-with-npm-start-instead page]"
    },
    {
      "type": "code",
      "id": "f840a62e1a48e5bb",
      "text": "...\n\n[Service]\nEnvironment=NODE_PORT=3000\nType=simple\nUser=www-data\nRestart=on-failure\nWorkingDirectory=/var/www/<your-code-directory>\nExecStart=npm start\n\n..."
    },
    {
      "type": "paragraph",
      "id": "939f3c8060e3028c",
      "text": "How to create a systemd service template in NixOS? [https://stackoverflow.com/questions/69355197/how-to-create-a-systemd-service-template-in-nixos stackoverflow]"
    },
    {
      "type": "paragraph",
      "id": "70cf396f6bc32cec",
      "text": "Running npm start from ExecStart in systemctl service file [https://stackoverflow.com/questions/64353905/running-npm-start-from-execstart-in-systemctl-service-file stackoverflow]"
    },
    {
      "type": "markdown",
      "id": "860593802d626d08",
      "text": "# npm ERR!"
    },
    {
      "type": "paragraph",
      "id": "7df0822616f599b4",
      "text": "npm ERR! code ENOENT"
    },
    {
      "type": "markdown",
      "id": "148675f90e3eccba",
      "text": ": > node dist-server/server.mjs\n: > start"
    },
    {
      "type": "code",
      "id": "364ae6da69bfe466",
      "text": "# journalctl -r -u elm-pages\nSep 06 13:29:50 dreyeck systemd[1]: Failed to start blog.dreyeck.ch/elm-pages-starter-express.\nSep 06 13:29:50 dreyeck systemd[1]: elm-pages.service: Failed with result 'exit-code'.\nSep 06 13:29:50 dreyeck systemd[1]: elm-pages.service: Start request repeated too quickly.\nSep 06 13:29:50 dreyeck systemd[1]: Stopped blog.dreyeck.ch/elm-pages-starter-express.\nSep 06 13:29:50 dreyeck systemd[1]: elm-pages.service: Scheduled restart job, restart counter is at 5.\nSep 06 13:29:50 dreyeck systemd[1]: elm-pages.service: Failed with result 'exit-code'.\nSep 06 13:29:50 dreyeck systemd[1]: elm-pages.service: Main process exited, code=exited, status=254/n/a\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR!     /home/rgb/.npm/_logs/2023-09-06T11_29_49_989Z-debug-0.log\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR! A complete log of this run can be found in:\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR! enoent\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR! enoent This is related to npm not being able to find a file.\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR! enoent spawn sh ENOENT\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR! errno -2\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR! path /home/rgb/.wiki/blog.dreyeck.ch/elm-pages-starter-express\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR! syscall spawn sh\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR! code ENOENT\nSep 06 13:29:50 dreyeck npm[137713]: > node dist-server/server.mjs\nSep 06 13:29:50 dreyeck npm[137713]: > start"
    },
    {
      "type": "paragraph",
      "id": "2b029d75faca9a75",
      "text": "npm start errors with ERR! code ENOENT [https://stackoverflow.com/questions/60319237/npm-start-errors-with-err-code-enoent-syscall-open stackoverflow]"
    },
    {
      "type": "paragraph",
      "id": "73dc13c5bdafee9c",
      "text": "⇒ elm-pages-starter-express/package.json [https://github.com/dreyeck/blog/blob/27ba4048efae557d442773d44f0ba54715f627e6/elm-pages-starter-express/package.json#L8 code]"
    },
    {
      "type": "code",
      "id": "e59f4d6078a05bf9",
      "text": "    \"start\": \"node dist-server/server.mjs\""
    },
    {
      "type": "paragraph",
      "id": "5c2ab63f189f2b04",
      "text": "⇒ [[wiki.nix @dreyeck.ch]]"
    },
    {
      "type": "pagefold",
      "id": "bf3ff4ea73beb14c",
      "text": "~"
    },
    {
      "type": "paragraph",
      "id": "23e6ec9ff041ed3b",
      "text": "The ultimate guide to deploying your node app on Linux [https://web.archive.org/web/20180212163211/https://certsimple.com/blog/deploy-node-on-linux archive]"
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "elm-pages.service",
        "story": []
      },
      "date": 1693999041770
    },
    {
      "id": "96df6d95928c03c6",
      "type": "add",
      "item": {
        "type": "code",
        "id": "96df6d95928c03c6",
        "text": "warning: the following units failed: elm-pages.service\n\n× elm-pages.service - blog.dreyeck.ch/elm-pages-starter-express\n     Loaded: loaded (/etc/systemd/system/elm-pages.service; enabled; preset: enabled)\n     Active: failed (Result: exit-code) since Wed 2023-09-06 13:14:19 CEST; 224ms ago\n   Duration: 867ms\n    Process: 134345 ExecStart=/run/current-system/sw/bin/npm start (code=exited, status=254)\n   Main PID: 134345 (code=exited, status=254)\n         IP: 0B in, 0B out\n        CPU: 653ms\n\nSep 06 13:14:19 dreyeck npm[134345]: npm ERR! syscall spawn sh\nSep 06 13:14:19 dreyeck npm[134345]: npm ERR! path /home/rgb/.wiki/blog.dreyeck.ch/elm-pages-starter-express\nSep 06 13:14:19 dreyeck npm[134345]: npm ERR! errno -2\nSep 06 13:14:19 dreyeck npm[134345]: npm ERR! enoent spawn sh ENOENT\nSep 06 13:14:19 dreyeck npm[134345]: npm ERR! enoent This is related to npm not being able to find a file.\nSep 06 13:14:19 dreyeck npm[134345]: npm ERR! enoent\nSep 06 13:14:19 dreyeck npm[134345]: npm ERR! A complete log of this run can be found in:\nSep 06 13:14:19 dreyeck npm[134345]: npm ERR!     /home/rgb/.npm/_logs/2023-09-06T11_14_19_840Z-debug-0.log\nSep 06 13:14:19 dreyeck systemd[1]: elm-pages.service: Main process exited, code=exited, status=254/n/a\nSep 06 13:14:19 dreyeck systemd[1]: elm-pages.service: Failed with result 'exit-code'.\nwarning: error(s) occurred while switching to the new configuration"
      },
      "attribution": {
        "page": "configuration.nix @dreyeck"
      },
      "date": 1693999052170
    },
    {
      "id": "364ae6da69bfe466",
      "type": "add",
      "item": {
        "type": "code",
        "id": "364ae6da69bfe466",
        "text": "Sep 06 13:08:58 dreyeck systemd[1]: elm-pages.service: Failed with result 'exit-code'.\nSep 06 13:08:58 dreyeck systemd[1]: elm-pages.service: Main process exited, code=exited, status=254/n/a\nSep 06 13:08:58 dreyeck npm[132744]: npm ERR!     /home/rgb/.npm/_logs/2023-09-06T11_08_57_849Z-debug-0.log\nSep 06 13:08:58 dreyeck npm[132744]: npm ERR! A complete log of this run can be found in:\nSep 06 13:08:58 dreyeck npm[132744]: npm ERR! enoent\nSep 06 13:08:58 dreyeck npm[132744]: npm ERR! enoent This is related to npm not being able to find a file.\nSep 06 13:08:58 dreyeck npm[132744]: npm ERR! enoent spawn sh ENOENT\nSep 06 13:08:58 dreyeck npm[132744]: npm ERR! errno -2\nSep 06 13:08:58 dreyeck npm[132744]: npm ERR! path /home/rgb/.wiki/blog.dreyeck.ch/elm-pages-starter-express\nSep 06 13:08:58 dreyeck npm[132744]: npm ERR! syscall spawn sh\nSep 06 13:08:58 dreyeck npm[132744]: npm ERR! code ENOENT\nSep 06 13:08:57 dreyeck npm[132744]: > node dist-server/server.mjs\nSep 06 13:08:57 dreyeck npm[132744]: > start\nSep 06 13:08:57 dreyeck systemd[1]: Started blog.dreyeck.ch/elm-pages-starter-express.\nSep 06 13:06:37 dreyeck systemd[1]: elm-pages.service: Failed with result 'exit-code'.\nSep 06 13:06:37 dreyeck systemd[1]: elm-pages.service: Main process exited, code=exited, status=203/EXEC\nSep 06 13:06:37 dreyeck systemd[1]: Started blog.dreyeck.ch/elm-pages-starter-express."
      },
      "after": "96df6d95928c03c6",
      "attribution": {
        "page": "configuration.nix @dreyeck"
      },
      "date": 1693999096120
    },
    {
      "item": {
        "type": "factory",
        "id": "ec6049117adb4a5d"
      },
      "id": "ec6049117adb4a5d",
      "type": "add",
      "after": "364ae6da69bfe466",
      "date": 1693999123071
    },
    {
      "type": "edit",
      "id": "ec6049117adb4a5d",
      "item": {
        "type": "paragraph",
        "id": "ec6049117adb4a5d",
        "text": "/home/rgb/.npm/_logs/"
      },
      "date": 1693999124655
    },
    {
      "id": "ec6049117adb4a5d",
      "type": "move",
      "order": [
        "96df6d95928c03c6",
        "ec6049117adb4a5d",
        "364ae6da69bfe466"
      ],
      "date": 1693999127752
    },
    {
      "id": "23e6ec9ff041ed3b",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "23e6ec9ff041ed3b",
        "text": "The ultimate guide to deploying your node app on Linux [https://web.archive.org/web/20180212163211/https://certsimple.com/blog/deploy-node-on-linux archive]"
      },
      "attribution": {
        "page": "configuration.nix @dreyeck"
      },
      "date": 1693999146709
    },
    {
      "id": "70cf396f6bc32cec",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "70cf396f6bc32cec",
        "text": "Running npm start from ExecStart in systemctl service file [https://stackoverflow.com/questions/64353905/running-npm-start-from-execstart-in-systemctl-service-file stackoverflow]"
      },
      "after": "23e6ec9ff041ed3b",
      "attribution": {
        "page": "configuration.nix @dreyeck"
      },
      "date": 1693999149690
    },
    {
      "id": "90ecc08458ac00e4",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "90ecc08458ac00e4",
        "text": "How to configure Systemd service unit to start Node app with \"npm start\" instead of \"app.js\" [https://serverfault.com/questions/1018676/how-to-configure-systemd-service-unit-to-start-node-app-with-npm-start-instead page]"
      },
      "attribution": {
        "page": "configuration.nix @dreyeck"
      },
      "date": 1693999171359
    },
    {
      "id": "f840a62e1a48e5bb",
      "type": "add",
      "item": {
        "type": "code",
        "id": "f840a62e1a48e5bb",
        "text": "...\n\n[Service]\nEnvironment=NODE_PORT=3000\nType=simple\nUser=www-data\nRestart=on-failure\nWorkingDirectory=/var/www/<your-code-directory>\nExecStart=npm start\n\n..."
      },
      "after": "90ecc08458ac00e4",
      "attribution": {
        "page": "configuration.nix @dreyeck"
      },
      "date": 1693999175317
    },
    {
      "item": {
        "type": "factory",
        "id": "bf3ff4ea73beb14c"
      },
      "id": "bf3ff4ea73beb14c",
      "type": "add",
      "after": "364ae6da69bfe466",
      "date": 1693999183934
    },
    {
      "type": "edit",
      "id": "bf3ff4ea73beb14c",
      "item": {
        "type": "pagefold",
        "id": "bf3ff4ea73beb14c",
        "text": "~"
      },
      "date": 1693999186408
    },
    {
      "id": "23e6ec9ff041ed3b",
      "type": "move",
      "order": [
        "90ecc08458ac00e4",
        "f840a62e1a48e5bb",
        "70cf396f6bc32cec",
        "96df6d95928c03c6",
        "ec6049117adb4a5d",
        "364ae6da69bfe466",
        "bf3ff4ea73beb14c",
        "23e6ec9ff041ed3b"
      ],
      "date": 1693999197537
    },
    {
      "id": "939f3c8060e3028c",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "939f3c8060e3028c",
        "text": "How to create a systemd service template in NixOS? [https://stackoverflow.com/questions/69355197/how-to-create-a-systemd-service-template-in-nixos stackoverflow]"
      },
      "after": "f840a62e1a48e5bb",
      "attribution": {
        "page": "configuration.nix @dreyeck"
      },
      "date": 1693999298686
    },
    {
      "type": "remove",
      "id": "96df6d95928c03c6",
      "date": 1694000811541
    },
    {
      "type": "edit",
      "id": "364ae6da69bfe466",
      "item": {
        "type": "code",
        "id": "364ae6da69bfe466",
        "text": "# journalctl -r -u elm-pages\nSep 06 13:29:50 dreyeck systemd[1]: Failed to start blog.dreyeck.ch/elm-pages-starter-express.\nSep 06 13:29:50 dreyeck systemd[1]: elm-pages.service: Failed with result 'exit-code'.\nSep 06 13:29:50 dreyeck systemd[1]: elm-pages.service: Start request repeated too quickly.\nSep 06 13:29:50 dreyeck systemd[1]: Stopped blog.dreyeck.ch/elm-pages-starter-express.\nSep 06 13:29:50 dreyeck systemd[1]: elm-pages.service: Scheduled restart job, restart counter is at 5.\nSep 06 13:29:50 dreyeck systemd[1]: elm-pages.service: Failed with result 'exit-code'.\nSep 06 13:29:50 dreyeck systemd[1]: elm-pages.service: Main process exited, code=exited, status=254/n/a\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR!     /home/rgb/.npm/_logs/2023-09-06T11_29_49_989Z-debug-0.log\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR! A complete log of this run can be found in:\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR! enoent\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR! enoent This is related to npm not being able to find a file.\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR! enoent spawn sh ENOENT\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR! errno -2\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR! path /home/rgb/.wiki/blog.dreyeck.ch/elm-pages-starter-express\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR! syscall spawn sh\nSep 06 13:29:50 dreyeck npm[137713]: npm ERR! code ENOENT\nSep 06 13:29:50 dreyeck npm[137713]: > node dist-server/server.mjs\nSep 06 13:29:50 dreyeck npm[137713]: > start"
      },
      "date": 1694000864271
    },
    {
      "type": "remove",
      "id": "ec6049117adb4a5d",
      "date": 1694000866264
    },
    {
      "item": {
        "type": "factory",
        "id": "73dc13c5bdafee9c"
      },
      "id": "73dc13c5bdafee9c",
      "type": "add",
      "after": "23e6ec9ff041ed3b",
      "date": 1694001064822
    },
    {
      "id": "73dc13c5bdafee9c",
      "type": "move",
      "order": [
        "90ecc08458ac00e4",
        "f840a62e1a48e5bb",
        "939f3c8060e3028c",
        "70cf396f6bc32cec",
        "364ae6da69bfe466",
        "73dc13c5bdafee9c",
        "bf3ff4ea73beb14c",
        "23e6ec9ff041ed3b"
      ],
      "date": 1694001067052
    },
    {
      "type": "edit",
      "id": "73dc13c5bdafee9c",
      "item": {
        "type": "paragraph",
        "id": "73dc13c5bdafee9c",
        "text": "[https://github.com/dreyeck/blog/blob/27ba4048efae557d442773d44f0ba54715f627e6/elm-pages-starter-express/package.json#L8 code]"
      },
      "date": 1694001075835
    },
    {
      "type": "edit",
      "id": "73dc13c5bdafee9c",
      "item": {
        "type": "paragraph",
        "id": "73dc13c5bdafee9c",
        "text": "⇒ elm-pages-starter-express/package.json [https://github.com/dreyeck/blog/blob/27ba4048efae557d442773d44f0ba54715f627e6/elm-pages-starter-express/package.json#L8 code]"
      },
      "date": 1694001098124
    },
    {
      "item": {
        "type": "factory",
        "id": "e59f4d6078a05bf9"
      },
      "id": "e59f4d6078a05bf9",
      "type": "add",
      "after": "23e6ec9ff041ed3b",
      "date": 1694001115452
    },
    {
      "id": "e59f4d6078a05bf9",
      "type": "move",
      "order": [
        "90ecc08458ac00e4",
        "f840a62e1a48e5bb",
        "939f3c8060e3028c",
        "70cf396f6bc32cec",
        "364ae6da69bfe466",
        "73dc13c5bdafee9c",
        "e59f4d6078a05bf9",
        "bf3ff4ea73beb14c",
        "23e6ec9ff041ed3b"
      ],
      "date": 1694001116734
    },
    {
      "type": "edit",
      "id": "e59f4d6078a05bf9",
      "item": {
        "type": "code",
        "id": "e59f4d6078a05bf9",
        "text": "    \"start\": \"node dist-server/server.mjs\""
      },
      "date": 1694001118272
    },
    {
      "type": "add",
      "id": "860593802d626d08",
      "item": {
        "type": "paragraph",
        "id": "860593802d626d08",
        "text": "# npm ERR!"
      },
      "after": "70cf396f6bc32cec",
      "date": 1694003372615
    },
    {
      "type": "edit",
      "id": "860593802d626d08",
      "item": {
        "type": "markdown",
        "id": "860593802d626d08",
        "text": "# npm ERR!"
      },
      "date": 1694003374752
    },
    {
      "type": "add",
      "id": "7df0822616f599b4",
      "item": {
        "type": "paragraph",
        "id": "7df0822616f599b4",
        "text": "code ENOENT"
      },
      "after": "70cf396f6bc32cec",
      "date": 1694003429711
    },
    {
      "id": "7df0822616f599b4",
      "type": "move",
      "order": [
        "90ecc08458ac00e4",
        "f840a62e1a48e5bb",
        "939f3c8060e3028c",
        "70cf396f6bc32cec",
        "860593802d626d08",
        "7df0822616f599b4",
        "364ae6da69bfe466",
        "73dc13c5bdafee9c",
        "e59f4d6078a05bf9",
        "bf3ff4ea73beb14c",
        "23e6ec9ff041ed3b"
      ],
      "date": 1694003431686
    },
    {
      "type": "edit",
      "id": "7df0822616f599b4",
      "item": {
        "type": "paragraph",
        "id": "7df0822616f599b4",
        "text": "code ENOENT:"
      },
      "date": 1694003434686
    },
    {
      "type": "add",
      "id": "148675f90e3eccba",
      "item": {
        "type": "paragraph",
        "id": "148675f90e3eccba",
        "text": ": > node dist-server/server.mjs\n: > start"
      },
      "after": "7df0822616f599b4",
      "date": 1694003469269
    },
    {
      "type": "edit",
      "id": "148675f90e3eccba",
      "item": {
        "type": "markdown",
        "id": "148675f90e3eccba",
        "text": ": > node dist-server/server.mjs\n: > start"
      },
      "date": 1694003478782
    },
    {
      "type": "edit",
      "id": "7df0822616f599b4",
      "item": {
        "type": "paragraph",
        "id": "7df0822616f599b4",
        "text": "npm ERR! code ENOENT"
      },
      "date": 1694003599931
    },
    {
      "type": "add",
      "id": "2b029d75faca9a75",
      "item": {
        "type": "paragraph",
        "id": "2b029d75faca9a75",
        "text": "npm start errors with ERR! code ENOENT, syscall open"
      },
      "after": "73dc13c5bdafee9c",
      "date": 1694003663559
    },
    {
      "id": "2b029d75faca9a75",
      "type": "move",
      "order": [
        "90ecc08458ac00e4",
        "f840a62e1a48e5bb",
        "939f3c8060e3028c",
        "70cf396f6bc32cec",
        "860593802d626d08",
        "7df0822616f599b4",
        "148675f90e3eccba",
        "364ae6da69bfe466",
        "73dc13c5bdafee9c",
        "e59f4d6078a05bf9",
        "2b029d75faca9a75",
        "bf3ff4ea73beb14c",
        "23e6ec9ff041ed3b"
      ],
      "date": 1694003665704
    },
    {
      "type": "edit",
      "id": "2b029d75faca9a75",
      "item": {
        "type": "paragraph",
        "id": "2b029d75faca9a75",
        "text": "npm start errors with ERR! code ENOENT, syscall open [https://stackoverflow.com/questions/60319237/npm-start-errors-with-err-code-enoent-syscall-open stackoverflow]"
      },
      "date": 1694003678409
    },
    {
      "type": "edit",
      "id": "2b029d75faca9a75",
      "item": {
        "type": "paragraph",
        "id": "2b029d75faca9a75",
        "text": "npm start errors with ERR! code ENOENT [https://stackoverflow.com/questions/60319237/npm-start-errors-with-err-code-enoent-syscall-open stackoverflow]"
      },
      "date": 1694003693891
    },
    {
      "id": "2b029d75faca9a75",
      "type": "move",
      "order": [
        "90ecc08458ac00e4",
        "f840a62e1a48e5bb",
        "939f3c8060e3028c",
        "70cf396f6bc32cec",
        "860593802d626d08",
        "7df0822616f599b4",
        "148675f90e3eccba",
        "364ae6da69bfe466",
        "2b029d75faca9a75",
        "73dc13c5bdafee9c",
        "e59f4d6078a05bf9",
        "bf3ff4ea73beb14c",
        "23e6ec9ff041ed3b"
      ],
      "date": 1694003727656
    },
    {
      "type": "add",
      "id": "5c2ab63f189f2b04",
      "item": {
        "type": "paragraph",
        "id": "5c2ab63f189f2b04",
        "text": "⇒ [[wiki.nix @dreyeck.ch]]"
      },
      "after": "73dc13c5bdafee9c",
      "date": 1694003830407
    },
    {
      "id": "5c2ab63f189f2b04",
      "type": "move",
      "order": [
        "90ecc08458ac00e4",
        "f840a62e1a48e5bb",
        "939f3c8060e3028c",
        "70cf396f6bc32cec",
        "860593802d626d08",
        "7df0822616f599b4",
        "148675f90e3eccba",
        "364ae6da69bfe466",
        "2b029d75faca9a75",
        "73dc13c5bdafee9c",
        "e59f4d6078a05bf9",
        "5c2ab63f189f2b04",
        "bf3ff4ea73beb14c",
        "23e6ec9ff041ed3b"
      ],
      "date": 1694003832568
    }
  ]
}