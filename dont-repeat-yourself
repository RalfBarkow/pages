{
  "title": "Dont Repeat Yourself",
  "story": [
    {
      "type": "html",
      "text": "<b>Context:</b>",
      "id": "c124692bd753a71b03088ea9117a45db"
    },
    {
      "type": "html",
      "text": "\nDuplication (inadvertent or purposeful duplication) can lead to maintenance nightmares, poor factoring, and logical contradictions. ",
      "id": "8a58f17d7dc611455d2ac3f97d938961"
    },
    {
      "type": "html",
      "text": "\nDuplication, and the strong possibility of eventual contradiction, can arise anywhere: in architecture, requirements, code, or documentation. The effects can range from mis-implemented code and developer confusion to complete system failure.",
      "id": "e623d3d3f787d69e142d90381b1d64e1"
    },
    {
      "type": "html",
      "text": "\nOne could argue that most of the difficulty in Y2K remediation is due to the lack of a single date abstraction within any given system; the knowledge of dates and date-handling is widely spread.",
      "id": "d30d0e0bd8f8b650eaca4a64ec302091"
    },
    {
      "type": "html",
      "text": "<b>The Problem:</b>",
      "id": "fdf3b5b0191b276176d8d29f92f3d7d0"
    },
    {
      "type": "html",
      "text": "\nBut what exactly counts as duplication? [[Clone And Modify Programming]] is generally cited as the chief culprit (see [[Once And Only Once]], etc.), but there is more to it than that. Whether in code, architecture, requirements documents, or user documentation, duplication of <i>knowledge</i> - not just text - is the real culprit.",
      "id": "d103e29909f2b216268b0c25d1f0a914"
    },
    {
      "type": "html",
      "text": "<b>Therefore:</b>",
      "id": "ca3fbd2ae18eeb9791860089f7aaec5a"
    },
    {
      "type": "html",
      "text": "\nThe DRY (Don't Repeat Yourself) Principle states:",
      "id": "967429d465d0ceda27dc0878ea30aad4"
    },
    {
      "type": "html",
      "text": "<i>Every piece of knowledge must have a single, unambiguous, authoritative representation within a system.</i>",
      "id": "8b776431b730fa714e690df72bc77e77"
    },
    {
      "type": "html",
      "text": "\nIt's okay to have mechanical, textual duplication (the equivalent of caching values: a repeatable, automatic derivation of one source file from some meta-level description), as long as the authoritative source is well known.",
      "id": "95e13c2fb51a1110da73d8d1cfb70fc1"
    },
    {
      "type": "html",
      "text": "\nFor example, in a mixed-language CORBA environment you may choose to treat the IDL definitions as authoritative. These definitions will be used to automatically generate source code files which duplicate the knowledge in the IDL. But that's okay: the IDL form of the knowledge meets the requirements of our definition.",
      "id": "214599875f009f2a81c5e4c818589c5b"
    },
    {
      "type": "html",
      "text": "\nWhere different levels of abstraction are involved, a consistent conflict-resolution scheme must be used. This could be as simple as identifying one level as authoritative in all cases, or always deferring to the high level, or whatever, as long as it is consistently applied.",
      "id": "28d880b6767748d6fe4cbef6f7613e5b"
    },
    {
      "type": "html",
      "text": "\nFor example, in [[Cee Plus Plus]] the interface and implementation for a class are typically specified in separate files, duplicating knowledge. You may consider the header file to be authoritative for the contract of the class as viewed by its clients, and the source code to be authoritative regarding issues of implementation which are hidden by the implementation.",
      "id": "961b85b32316a2749e530633a44308e2"
    },
    {
      "type": "html",
      "text": "<i>While the duplication between .c and .h files is annoying, requires extra effort, and discourages the use of private member functions, it doesn't violate DRY because the compiler enforces that the function definition in the .c file must match the prototype in the .h file.</i>",
      "id": "3fef9e4af99268734537685ed9b65a85"
    },
    {
      "type": "html",
      "text": "<b>Notes:</b> This principle is similar to [[Once And Only Once]], but with a different objective. With [[Once And Only Once]], you are encouraged to refactor to eliminate duplicated code and functionality. With <i>DRY</i>, you try to identify the single, definitive source of every piece of knowledge used in your system, and then use that source to generate applicable instances of that knowledge (code, documentation, tests, etc).",
      "id": "7f2d41165a9df3a62f71e3cf20076c0b"
    },
    {
      "type": "html",
      "text": "\nThe principle also assumes that your projects have a high degree of automation, allowing the generation of the derivative knowledge artifacts whenever required.",
      "id": "14e53c1fad96ef442649e64ee50171ca"
    },
    {
      "type": "html",
      "text": "-- [[Andrew Hunt]]",
      "id": "6e0b01ac89058a7355ae8fa6dd8642a7"
    },
    {
      "type": "html",
      "text": "\nThe following conversations get much simpler when we recognize the most important thing to DRY up is...",
      "id": "7d9d34db2b137b054ec78125b1df41bb"
    },
    {
      "type": "html",
      "text": " <b>declarations of behavior</b>",
      "id": "dcc1f518f7b2d0b0454a6334376c69e3"
    },
    {
      "type": "html",
      "text": "\nKeeping the structure of a program DRY is harder, and lower value. It's the business rules, the <i>if</i> statements, the math formulas, and the metadata that should appear in only one place. The WET stuff - HTML pages, redundant test data, commas and {} delimiters - are all easy to ignore, so DRYing them is less important.",
      "id": "42e7e82f9e70e26b322e886e34821285"
    },
    {
      "type": "html",
      "text": "--[[Phl Ip]]",
      "id": "2de19461206ab34762a141e35d1f194b"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "The opposite is <b>WET</b>:",
      "id": "c4d517df201413ba78ce1432544777d0"
    },
    {
      "type": "html",
      "text": " <b>W</b>e",
      "id": "92cb9d6840b031d2a3ced1e506a4049c"
    },
    {
      "type": "html",
      "text": " <b>E</b>dit",
      "id": "2cd27d16d5da639dee5ff05163409244"
    },
    {
      "type": "html",
      "text": " <b>T</b>erribly, Tumultuously, Tempestuously, Tenaciously, Too much, Timidly, Tortuously, Terrifiedly...",
      "id": "096096c6fc3006a72f51464664349433"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "I think WET also stands for \"We Enjoy Typing\" ",
      "id": "05ab14b665e55faf8ed91b5555c3a0b9"
    },
    {
      "type": "html",
      "text": "-- [[Duncan Bayne]]",
      "id": "8551d8ae5f1626c347ec5aabeb0e2f72"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "<b>But:</b>",
      "id": "e8c29fa5a04bfac9110a21b75f7e97e7"
    },
    {
      "type": "html",
      "text": "\nIt may take time and effort to select and/or create a definitive source - see [[You Arent Gonna Need It]]. -- [[Dick Botting]]",
      "id": "90d6af39590e7650f217bea81ea85a28"
    },
    {
      "type": "html",
      "text": "<b>Hmm.</b> \"Every piece of knowledge must have a single, unambiguous, authoritative representation within a system.\" Is this not a reasonable definition for a Singleton?",
      "id": "0ff9aa1ffb1eca2853afac67ebdfbdf7"
    },
    {
      "type": "html",
      "text": "<i>No. DRY refers to your source code, not your running program. [[Third Normal Form]] is the analogous principle for data.</i>",
      "id": "5618f35d2a6527940936f81825ce3ff8"
    },
    {
      "type": "html",
      "text": "\nUgh. I think you're both barking up the wrong trees there. It doesn't refer to source code, nor to the running program. It refers to a system. Needn't have computers involved at all.",
      "id": "dee8676dcfac2e14d7c43f3b6c38b70c"
    },
    {
      "type": "html",
      "text": "<i>Ugh to your pedantic false balance. The point is that it refers to sources of any sort, but the multiplicity of objects derived from the source is irrelevant.</i>",
      "id": "b2193d6589f04a86c8ce121ccf410550"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "In [[The Art Of Unix Programming]], [[Eric Raymond]] calls this the [[Single Point Of Truth]] rule (SPOT).",
      "id": "eaef0bc4ab1f45d1ce91c960ce035c87"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "I agree with this, \"in principle\". However, taken literally, this principle is impossible to achieve. For example, a function signature is duplicated at the function call site and the function definition site. Even if you don't declare types, the number of arguments is a fact that is duplicated. I prefer to think of getting rid of duplication (i.e. [[Once And Only Once]]) instead of never having it in the first place, because you keep discovering that something that you didn't think was a duplicate, really is. Also, sometimes it is more trouble than it is worth to eliminate some duplication. Moreover, it is often better to wait til you have several examples of the duplication so you can better see how to eliminate it. -- [[Ralph Johnson]]",
      "id": "2d132d744c62ed92fb9c24d9db48f014"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "The \"taken literally\" bit is nonsense. The user of information is not the source of information ... the type and number of arguments at the call site is dictated by the API and enforced by the compiler.",
      "id": "31fbb47bd49e08a6793db10eb40e8c3a"
    },
    {
      "type": "html",
      "text": "\nRalph, that's a really good way of looking at things. My biggest programming headaches have always come from abstractly struggling with \"how can I write a good general solution to this problem\", even though I only know of one place where it's definitely going to be used. \"I'd better think of a general solution now,\" I think, \"or I'll have to copy-and-paste-and-change code!\" But it's absurd to try to come up with a general solution without knowing more about the different varieties of the problem that exist (or will exist) in the system.",
      "id": "ef6a04a17a1f5fd299e8168546d97dff"
    },
    {
      "type": "html",
      "text": "\nIt's a battle of two really strong urges - [[Once And Only Once]] vs avoiding [[Premature Generalization]]. Do I duplicate for now and try to live with the duplication for a while, or violate [[Yag Ni]] and come up with some half-cocked generalized solution? It's a tough one, because almost <i>all</i> programmers hate duplication; it's a sort of primordial programming urge.",
      "id": "b8cc54ce30dfb4f4eaf9234449e6d86d"
    },
    {
      "type": "html",
      "text": "\nHowever, even though [[Copy And Paste Programming]] can be expensive to clean up, so is a botched \"general solution\" - and copy and paste is <i>far</i> cheaper up front. So I also am in favour of <b>temporary</b> duplication, to be refactored when you have a clearer view of the situation. -- [[Matthew Bennett]]",
      "id": "1ea3d9af7a9018f7497f4f152fcfb61b"
    },
    {
      "type": "html",
      "text": "\nAlas, just exactly how I thought about it. Now the temporary duplication is a hellish permanent duplication. I have no time to remove it, and the more I have to update the evil twins of code, the less time to ever do something about it i get. -- L.A.Nilsson",
      "id": "d3bb38a38ec5a5cf173b1a480e90b5e5"
    },
    {
      "type": "html",
      "text": "(For more in the vein of \"let a duplication live for a while, in order to see how to best eliminate it\", see [[Code Harvesting]].)",
      "id": "ebfad0907372a892323bcd859bd2e644"
    },
    {
      "type": "html",
      "text": "\nI think there is also a collision with [[Do The Simplest Thing That Could Possibly Work]] where I believe that latter should win most of the time (aside from the situations where refactoring is too complicated, database schemas?)",
      "id": "ec31698fe5d722ec028c4b7e3bf456ad"
    },
    {
      "type": "html",
      "text": "<i>It depends on how \"simplest\" is conceptualized. If, as is common in the XP world, it means \"the smallest possible number of microseconds of effort to meet the requirements of the moment\", then the resulting mess will reflect such shortsighted thinking. OTOH, the information-theoretic sense of reducing all redundancy also has its costs.</i>",
      "id": "4a48e221a73ccdecacb7b547c6f571c1"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "The DRY principle is really a philosophical issue (although it does rear its head retroactively during coding). The idea is to try to plan ahead to prevent duplication, rather that to waste time removing stuff you've already done. Function signatures are a form of duplication, albeit a fairly minor one, as the compiler should be able to spot times where one side gets out of step. It's the more insidious duplication we hope to stop with DRY. -- Dave",
      "id": "3dbec002be27b9481927c02a194475e9"
    },
    {
      "type": "html",
      "text": "<i>Why is this duplication? Neither the prototype alone nor the function definition carries the full message. Without the prototype errors will creep in, and with out the function definition errors creep in. This is not duplication it is virtuous redundancy which increases the total error trapping power synergisticly. Did I miss the point somewhere ?</i> ",
      "id": "cb4a112f255f5ffa827f1cd1f351df79"
    },
    {
      "type": "html",
      "text": "\nI like this principle. Perhaps related to the idea of being able to trace any piece of coding back to the reasons for its existence and form. For me a key point is the selection of one item as a definitive source for certain purposes.",
      "id": "7a9c6b159656f9e8b54b64a1e1c2cea8"
    },
    {
      "type": "html",
      "text": "\nFor example, as in the above description, I'd normally take a function prototype/header/declaration as guiding the function calls. This is why I like header files to contain comments describing the contract (<i>make sure the first argument points at real storage and this call will do ..... for you</i>). The function bodies are definitive for the implementation decisions but might be derived from <i>more</i> definitive generic algorithms perhaps? -- [[Dick Botting]]",
      "id": "064df76a606f319064f3f996b172bf8b"
    },
    {
      "type": "html",
      "text": "\nI certainly like this principle. The applications in embedded systems should be obvious to the casual observer. Can the pump dispense medication or not? Only one entity knows the absolute answer to this puzzler. Every component that needs to know what the machine's current status is goes to a well-known method (a resource) to find out. What units are we dealing with, ml or mg/cc? Each component may need a local copy of this setting to figure out how to convert, but they all go to a central repository to acquire that knowledge. Most excellent, wouldn't you say?",
      "id": "dec5364b9f4a42dadbffc7166c7ac376"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "The Single Authority afforded by the DRY principle and the duplication of the source as a basis for the program environment adds inertia to the system (see [[Redundancy Is Inertia]]) for the sake of its stability. Here's a little list that I believe shows how [[Redundancy Is Inertia]], the DRY principle, [[Once And Only Once]], and testing should work together:",
      "id": "ab2af9b001ae66a8c8e1ef4f05a88616"
    },
    {
      "type": "html",
      "text": " the single authority is the interface's signature and documented requirements/goals. ([[Requirements And Goals]] are another issue)",
      "id": "1eb2e29faf5b1e344a082941386ad6c8"
    },
    {
      "type": "html",
      "text": " the authority needs to be readable by any potential <i>direct</i> user. (i.e.: a textual or graphical representation for the software writer and a binary representation for the software)",
      "id": "71c15606b006b0296dcada6144e82789"
    },
    {
      "type": "html",
      "text": " the interface's body (the process) may duplicate the signature if and only if the implementation environment requires it.",
      "id": "5a5160c1347d5e392b097e177ffa3ed3"
    },
    {
      "type": "html",
      "text": " The process is a fact - <b>It must abide by [[Once And Only Once]] and test true against the authority.</b>",
      "id": "0fabac87ed79f54e5f78fac8aa07a84e"
    },
    {
      "type": "html",
      "text": " R&G markers may be placed in the textual copy of the process much as edit notes are sometimes placed there.",
      "id": "44ecc33c3b79266c26b92271c64299df"
    },
    {
      "type": "html",
      "text": " the user duplicates only the part of the signature required to establish communications. (the compilation process is allowed to duplicate the interface's process.)",
      "id": "85f79b75d0aae6b1c3968be1ba543b6c"
    },
    {
      "type": "html",
      "text": " the user of the interface should only need test the interface against the R&G once per life cycle. (see [[Category Testing]])",
      "id": "e4cf19aeac849454f763acb780d9e985"
    },
    {
      "type": "html",
      "text": "-- [[Wyatt Matthews]]",
      "id": "0f4828e6a687d2b3b8b418f349697029"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "There is a pattern to the exceptions to the principle. <i>It is ok to have more than one representation of a piece of knowledge provided an effective mechanism for ensuring consistency between them is engaged.</i>",
      "id": "87ae2fb4728d8052bbf9b87e7c732fa5"
    },
    {
      "type": "html",
      "text": " Definitions and declarations of C functions: these are usually in sync because the compiler flags inconsistencies, forcing the programmer to take action.",
      "id": "36fb8433910947c9e0f1dbc0a9d87b60"
    },
    {
      "type": "html",
      "text": " Unit tests: inconsistency means the tests will fail, again forcing someone to take action.",
      "id": "6f5facf69873a4c7dece115c088f683c"
    },
    {
      "type": "html",
      "text": " Autogenerated stuff: periodic regeneration ensures consistency.",
      "id": "695c1010b94a7e94bac5a25541c767d4"
    },
    {
      "type": "html",
      "text": "\nOften the effective mechanism is automated but it doesn't need to be. An example is end-user documentation: an automated mechanism for verifying software/documentation consistency is hard to come by ([[Ai Complete]]?), so you need a human to review this. A mechanism to ensure consistency could in this case be an instruction on what to do before each software release.",
      "id": "d63c8073dfd71d0fed602ed1dc3e8a72"
    },
    {
      "type": "html",
      "text": "-- [[Anders Munch]]",
      "id": "c2fc5230caa47452b9907ecec3e17cc1"
    },
    {
      "type": "html",
      "text": "\nDRY doesn't just combat inconsistency, though. Yes, a passed test shows that code and test are consistent, but they may still both be wrong. If the test and the code have the same underlying structure/knowledge, it's more likely that a double fail will make a pass. However, in many functions, it's easy to eliminate the double errors because their inverse is radically different. For example, consider error correcting codes: encoding is just a hash while decoding is a complex operation. Implementing the encoder as a test reliably finds errors in the decoder. ",
      "id": "d327307143dd9abc159c28f2b28cf31d"
    },
    {
      "type": "html",
      "text": "\nDRY says that one should strive to use a different implementation in test and code to avoid the same error in both causing a false positive. This actually brings up another point - what do you do when the only way of implementing something is identical to the way you test it? I must admit I'm never quite happy when I have to do that. Luckily, it usually only occurs when the operation is so simple that it barely needs testing at all. -- [[James Keogh]]",
      "id": "c2a744b5c098de747f23b57d80a354c6"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "See [http://blogs.computerworld.com/but_it_seemed_like_such_a_good_idea_at_the_time blogs.computerworld.com] for an amusing demonstration of the evils of duplicate code.",
      "id": "a91ddea52c705139b22cf2f8e10d5ce2"
    },
    {
      "type": "html",
      "text": "-- [[Aristotle Pagaltzis]]",
      "id": "9c77447fa974278660d3546408d89dd8"
    },
    {
      "type": "html",
      "text": "\nPosting a link is itself an amusing demonstration of the evils of duplicate code (this link is a valid example).  --M Jones",
      "id": "4cc8a3cb95920dbe7e6311d3b5a78672"
    },
    {
      "type": "html",
      "text": "<i>Was the article at that link ever about DRY, or is it simply an inappropriate link? What is really needed is an archival link that incorporates a message hash so there can be a guarantee that the content hasn't changed.</i>",
      "id": "68404e5ec7a885a66e569b383a4bc88f"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "I'm struck by the fact that this is the principle that pushes people to normalize relational databases. It's not without its downside considering the reasons why people choose star schemas. There needs to be some discussion of when it is OK to abandon this rule. -- meta@pobox.com",
      "id": "b778a3632d9386b0d42ebb317c553470"
    },
    {
      "type": "html",
      "text": "<i>Actually, normalized databases rely on data duplication and one usually has to write a set of constraints to ensure that keys linking tables are consistent.</i>",
      "id": "e9db5d0911830be194631b41f47f2f63"
    },
    {
      "type": "code",
      "text": "    HUH ? The fact that the same  data is in  the FK and the PK of the linked tables is not duplication it is a \n    necessary method of implementing the link. ",
      "id": "773852585559e7fb99f63ea94f6a975c"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "Meta's comment about databases reminds me of the fact that the schema of the database and the code that access the database are two representations of data structures. Ideally, both the code and the database schema would be driven off the same source of data structure information. ",
      "id": "57a89cbfee1fd81ca39800eab34c5707"
    },
    {
      "type": "html",
      "text": "\nThis is the attraction of Ruby's [[Active Record]] and the reason I hate Hibernate and Struts. Both Hibernate and Struts have duplicate information that needs to be in sync. Without something like XDoclet they will get out of sync and will violate DRY. SaS",
      "id": "2ac6a9599d2e2f0ec94f79785146e6b9"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "Merely hoping to learn what \"DRY\" is, I came.  The thought-inspiring philosophical discussion was too much, merely to read. ",
      "id": "f9b5314a810ee2c339aab5deeb77c649"
    },
    {
      "type": "html",
      "text": "\nEpidemiology (in short, the study of disease and disease distribution in populations) promulgates the idea that a given [<i>outbreak of a</i>] disease has a single cause -- a root cause.  In systems, Root Cause Analysis inevitably takes us back to a design error and this is often traceable to an error in the requirements definition.  (Data from the Software Engineering Institute (SEI) at Carnegie-Mellon University (CMU) shows a number over 60%, for the percentage of errors caused within the steps part of Requirements Definition.)",
      "id": "65538eced51dba00197aae3b76adc0cc"
    },
    {
      "type": "html",
      "text": "\nEarlier computer engineering concepts (say, early-1980s) had matured sufficiently that students (and managers) might believe people other than those who are anti-social can be as good (or better) than a \"guru\". The coming generation of engineers/programmers would value writing their ideas even if they didn't work for IBM.  Some might even plan ahead. This allowed design to avoid circumstantial redundancy.  The DoD-funded work at CMU that gave rise to the SEI in the 1980s revealed that \"best practices\" begin with \"planning\" of some sort.",
      "id": "362caeb3e4a76ed5ca0b2869f6e9de49"
    },
    {
      "type": "html",
      "text": "\nTo sum up what can easily occupy volumes: We need to learn from our mistakes.  This requires conscious effort and time-commitment, which makes it rare.  No acronym can represent every project, so a cheat sheet might simply read as, \"DRY\".  This is redundant with the starting post -- but I didn't write it which means DRY has not been violated.  (Though this contrib /may be/ a bit dry.)",
      "id": "1eded207198c9815b38c6a7c69ceb1ab"
    },
    {
      "type": "html",
      "text": "-- Kernel.package",
      "id": "7812a2b8e78cc0df6a47dee376a186e3"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "[[Once And Only Once]] is hard to apply when consumers appreciate [[Put Things Where You Look]]. And consumers look for everything everywhere. Translation, \"Why isn't this email a link I can click. Your email should be on the contacts page, the user page, the help page, and the home page.\" -- [[Lee Louviere]]",
      "id": "126f9911fd3c89f941a2ffce151a7ef3"
    },
    {
      "type": "html",
      "text": "\nIt must be visible everywhere. It can live in  only one place. A view is not the data. <- <i>This. Of course it's \"hard to apply\" ... that's why we're paid the big bucks.</i>",
      "id": "6db2f73b7fd6b9eaba6cafee2d97e0e9"
    },
    {
      "type": "html",
      "text": "<i>Customer requests trump DRY. If source code on the inside is dry, then those email clickers will all use the same code, trivially plugged into several different view locations</i> --[[Phl Ip]]",
      "id": "39880d91f26bac3b339937763b4e093f"
    },
    {
      "type": "html",
      "text": "\nHmm. Let me rephrase. [[Put Things Where You Look]] (applied to the concept of putting things everywhere the user might look), may lead to accidentally breaking [[Once And Only Once]], and can accidentally be viewed as contrast to [[Dont Repeat Yourself]]. However, you should really implement a program data as uncoupled from the interface. Don't confuse DRY to mean that information can only have one location as opposed to one source. ",
      "id": "dfe0640f7a989fd4e7d00e235bab5b9d"
    },
    {
      "type": "html",
      "text": "\nI take the approach to design data and interface as if they were separate programs, then have their \"communication\" derived last. That way I ensure that data is implemented \"native\" to the machine language of simplicity, and the user interface is designed as most conforming to how the user would use it; meet the user demand of [[Put Things Where You Look]] and the myriad of different arrangements of the data to accommodate every users distinct way of understanding data. ([[Edit Me]] need a better term here, native is bad, communication is horrible.) -- [[Lee Louviere]]",
      "id": "2ab516e7ef76e65b351886180c69b005"
    },
    {
      "type": "html",
      "text": "---- \nIf this principle exists at all it is more likely to be called 'eliminate needless redundancy' than 'do not repeat yourself.'  [<i>No, it is more likely -- in fact the probability is 100% -- to be called DRY</i>]\nA = A is not a redundant statement. A is not needless repetition. A= B is not the same as A=A and A by itself does not always mean A=A if it is test and not an analytic truth. There are numerous instances of claims of repetition in the discussion above where removing one of the instance of the alleged duplication  will change the meaning and behavior of a system.  If you can not remove one of the duplicates without changing meaning it is not  duplication.",
      "id": "45d06141e7642f4320d87567ce38ee8e"
    },
    {
      "type": "html",
      "text": "The notion that normalization requires duplication because the keys must exist in both tables, suggest that removing one of the dubs is possible but it is not.",
      "id": "2877d47776969456c3c29ef157ec746b"
    },
    {
      "type": "html",
      "text": "\nEven If I conceded that duplication is a better term than redundancy the key is that it is only needless duplication that must be purged. The acid test for needless, for those whose intuition is not a sufficient guide is this. If you can't remove it with out losing functionality it is not needless.",
      "id": "29be7d495b5c76154c7b424e810f0832"
    },
    {
      "type": "code",
      "text": " -- Anon",
      "id": "5b0f693e05e26f6fb16305441d1313e0"
    },
    {
      "type": "html",
      "text": "\nOK, but a lot of functionality should still be generalized in many cases since they're very similar, and there could be a better (more elegant) implementation of it. -- Anonymous",
      "id": "e1bbec36eec6d1b8d58c84c9e904be33"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "Sometimes market rules dictate the choice of implementation language, which can make use of [[Dont Repeat Yourself]] extremely difficult. Say there's one application that you want to deploy on multiple platforms, each of which requires (or at least very strongly prefers) code written in a particular language. One platform requires [[Objective Cee]]. Another platform requires 100% pure [[Java Virtual Machine]] bytecode. A third platform requires the use of 100% verifiably type-safe CIL ([[Common Language Runtime]] bytecode). A fourth platform requires [[Java Script]]. To achieve DRY under these constraints, one would have to somehow create a [[Domain Specific Language]] that compiles to Objective-C, compiles to JVM bytecode, compiles to safe CIL, and compiles to [[Java Script]], and then write the authoritative implementation of the business logic in that language. Should each cross-platform application project begin by designing and implementing a DSL as a workaround to allow [[Write Once Run Anywhere]] despite these market rules?",
      "id": "0c65dbcaaf3ac77ce0790e3daf6dcdb4"
    },
    {
      "type": "html",
      "text": "(For those who prefer concrete examples: iOS needs Objective-C, [[Java Micro Edition]] phones and [[Java Applet]] browsers need Java bytecode, Windows Phone 7 and Xbox Live Indie Games on Xbox 360 need CIL, and Flash, HTML5 browsers, and Chrome Web Store need variations of [[Ecma Script]].) -- [[Damian Yerrick]]",
      "id": "62b9deb34be5632e0f3541cb9478852f"
    },
    {
      "type": "html",
      "text": "<i>The fact that there are all sorts of roadblocks to acting on the principle has no bearing on the principle's validity.</i>",
      "id": "f6beb353c9336f416fd12bdfe762b421"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "[[Dont Repeat Yourself]], but repeating others is perfectly acceptable :-) <- <i>no</i>",
      "id": "867eca169b0db5b45d05bc5c4ca12b05"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "<i>Every piece of knowledge must have a single, unambiguous, authoritative representation within a system.</i>",
      "id": "8b776431b730fa714e690df72bc77e77"
    },
    {
      "type": "html",
      "text": "\nThis sounds like something out of Orwell's 1984. Any statement that begins with \"Every piece of knowledge must have ..\" sounds like the official propaganda of a totalitarian state - not the free exchange of ideas. Perhaps the principle really being expressed here is \"It's my way or the highway.\"",
      "id": "caa53cb6c23b56119014443ff0c71abb"
    },
    {
      "type": "html",
      "text": "{\"...and should pay me $130k/yr to police and enforce this policy.\" :-}",
      "id": "563cff0a77bf282e9b26b97c520a4b81"
    },
    {
      "type": "html",
      "text": "<i>Perhaps you have absolutely no idea what you -- and everyone else here -- is talking about.</i>",
      "id": "6c5811e9269e0a7701b663430583d517"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "\nI actually wholeheartedly agree with this and am pretty sure it is why I take so long to get anything done. I spend more time trying not to duplicate myself and finding clever ways to abstract out the various duplicated flow principles in my application than actually simply coding. Sometimes when I ignore rules like you have stated, I get an insane amount of work done...very quickly... and then I worry if it is messy.",
      "id": "6a247e92d6dd469577842d3c0ac51467"
    },
    {
      "type": "html",
      "text": "-- Richard Ellicott",
      "id": "faa960a86be43c13a824795fa2e5e3c0"
    },
    {
      "type": "html",
      "text": "<i>Perhaps with practice you will become more facile at abstraction.</i>",
      "id": "2dd765dc368080334663297c7e829224"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "See: [[Unnecessary Holography]], [[Once And Only Once]], [[Duplication Refactoring Threshold]]",
      "id": "99c37418fd21a5a2c5bffaa079bf6456"
    },
    {
      "type": "html",
      "text": "\n[[Category Modeling Laws And Principles]], [[Category Extreme Programming]], [[Category Planning]], [[Category Simplification]]",
      "id": "ec568e4a51f781b2ed510bacabe106e8"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "Let's try a simple XP coding example:",
      "id": "4c9d1e1560dab7ba1c806c9f122a7f7b"
    },
    {
      "type": "html",
      "text": "<i>-- are all these sqrt examples really making the point? Should we delete them or move them?</i> -- [[Anonymous Coward]]",
      "id": "51fc2075fe0da4e0737d67aa6c7baac9"
    },
    {
      "type": "html",
      "text": "<i> Agreed the square root example kinda went off on a tangent, the discussion itself wasn't too bad but it doesn't belong here</i>  --[[Andrew Ricketts]] {be bold about your opinions}",
      "id": "04b03cf926dceb59830444d24d528a3e"
    },
    {
      "type": "html",
      "text": "<i>I've moved this irrelevant stuff down here to the bottom so it's less annoying</i>",
      "id": "76ba3cea8ef619c9f3e522b4ce82e84c"
    },
    {
      "type": "html",
      "text": "\nP1: OK, we need a square root function. Lets code the first test case",
      "id": "6486c5db2afe56857b0b56c358f5765c"
    },
    {
      "type": "html",
      "text": "test1:<br>assert_equal(sqrt(4), 2);",
      "id": "1a51e1c7d9339e0213147fccf2f0456c"
    },
    {
      "type": "html",
      "text": "P2: and the code:",
      "id": "a4fce278c0cd8aadb1689078a678548a"
    },
    {
      "type": "code",
      "text": "  sub sqrt(x) { return 2; }",
      "id": "863f67b2b2603cb7f51b3378d013e6f9"
    },
    {
      "type": "html",
      "text": "P1: Hmm. OK, perhaps we need another test to get a better implementation",
      "id": "9e54f52e94ce53de4b8fca914234738c"
    },
    {
      "type": "html",
      "text": "test2:<br>assert_equal(sqrt(9), 3);",
      "id": "4e5edb1d4681656293672a2cca1d741d"
    },
    {
      "type": "html",
      "text": "P2: OK",
      "id": "888db335fad51814fbb864f212a5ca93"
    },
    {
      "type": "code",
      "text": "  sub sqrt (x) { if (x==4) { return 2 } elseif (x==9) { return 3 } }",
      "id": "a358e86e44b47dd0774a31aa9874802b"
    },
    {
      "type": "html",
      "text": "P1: You can't do that, you're just repeating the information in the test: it violates the DRY principle",
      "id": "6f11c888fd1b552e0a96307974bd1c7a"
    },
    {
      "type": "html",
      "text": "\nP2: That doesn't matter. Code must only obey OAOO. DRY is just philosophical claptrap. The tests don't provide enough information to generalize, so the simplest thing is to duplicate the information.",
      "id": "c3fed6fcc4894a54d7ae23e20a813804"
    },
    {
      "type": "html",
      "text": "\nP1: No, it does matter. A test and its code must use different algorithms when expressing the same information. If they are the same then the test adds no value.",
      "id": "80205df878c252f13d5538644864fa8f"
    },
    {
      "type": "html",
      "text": "\nWho is correct? What implementation would enable the tests + code to conform to DRY?",
      "id": "c0eba35d8efb335a83f175be27566f0e"
    },
    {
      "type": "html",
      "text": "<i>Well, considering that anyone who wrote tests like that should be immediately fired, the answer is obvious. First principle, without which all else is lost: act in good faith.</i>",
      "id": "6bf00093d78f4882ad9cb2abca4c163f"
    },
    {
      "type": "html",
      "text": "''Here's my resolution for this particular example:",
      "id": "a94377613d85d9009dbc51e34d01fe1f"
    },
    {
      "type": "html",
      "text": " Start with a good statement about the process to design and test.",
      "id": "4f54958a90aea73d4cef490ac73a74b7"
    },
    {
      "type": "html",
      "text": "Documented requirement:",
      "id": "e701b074f397c4f80e8f0b29eaddc3b3"
    },
    {
      "type": "html",
      "text": " produce the square root of (x).",
      "id": "6bf0b8a14c1e3811670966d87c44ac1c"
    },
    {
      "type": "html",
      "text": " Where sqrt(x)*sqrt(x) = x.",
      "id": "14842b10e20dcc1ca99b8fac7447b616"
    },
    {
      "type": "html",
      "text": " Error or imaginary numbers must be returned for x < 0.",
      "id": "a321a08c732d5409d2a47ccf921c7490"
    },
    {
      "type": "html",
      "text": " x = 0 should return 0.",
      "id": "b920e6fe8c8ed01797a4f0b03ce864cf"
    },
    {
      "type": "html",
      "text": " <b>Inserted requirement:</b> x is in the Real Number Domain.",
      "id": "2507b4136a702822bd5b6a97c8ffefa5"
    },
    {
      "type": "html",
      "text": " <b>Inserted performance requirement:</b> Function Overflow must be considered and reported as an error.",
      "id": "26ebfa018166b81f9fbddf809b6872a3"
    },
    {
      "type": "html",
      "text": " <b>Inserted performance requirement:</b> As Fast As Possible/Do Not Bottle Neck.",
      "id": "e9d3375c2af7da57f05f6a0d5e714c50"
    },
    {
      "type": "html",
      "text": " Then write your test:",
      "id": "217b8e1cbc4dd9c538f0080da51d615a"
    },
    {
      "type": "code",
      "text": "  for(y=1 to 100) {\n    x = random_in_range(1, some_max) ''-- why not replace 1 by some_min - possibly large and -ve?''\n    assert_equal(x,sqrt( (x*x) ))",
      "id": "17f9741367c5a398a215dbe8e3d60535"
    },
    {
      "type": "html",
      "text": "<i>you might also want to consider <b>assert_equal(x,sqrt(x)*sqrt(x))</b> which is a different proposition. -- [[David Martland]]</i>",
      "id": "749d2b87696ba31d8a0667e6bff0c331"
    },
    {
      "type": "code",
      "text": "  }\n  assert_error_or_imaginary(sqrt(-1))\n  assert_zero(sqrt(0))",
      "id": "b75613bf6a78bf0d2081e3854b5119b9"
    },
    {
      "type": "html",
      "text": " notice that the requirement does not specify an upper domain. So modified the test for random values > 0. This way Mr. Guru Coder doesn't get lazy and implement any complex if statements. <i>If statement nothing. A guard clause and a table lookup. -- [[Mr Guru Coder]].</i> I happen to know from experience that such a table tends to get expensive with 32-bit and larger integers (several optimizations and I couldn't get a [[Prime Number]] table below a quarter gig before giving up - but hey, what a weekend of coding).",
      "id": "124aa7112c3be997beeb5f53d0b4c22d"
    },
    {
      "type": "html",
      "text": " finally code and test the sqrt function.",
      "id": "042a490969a95f67f32dac7036b2b6e3"
    },
    {
      "type": "html",
      "text": "-- [[Wyatt Matthews]]",
      "id": "0f4828e6a687d2b3b8b418f349697029"
    },
    {
      "type": "html",
      "text": "[Noted in passing: This test doesn't seem to do much toward verifying that the code works when the argument to <b>sqrt</b> is not an integer. Indeed, if x is a floating-point number that is not an integer, the square root of x can <i>never</i> be represented exactly as a floating-point number (Counterexample: sqrt(0.25) = 0.5 is perfectly representable in binary floating point; RV) (because the square root of a non-integer is always irrational <i>- definitely wrong: sqrt(0.01) == 0.1, where 0.01 is non-integer and 0.1 is rational -- [[Mr Mathematician]]</i>). So testing a square-root program outside the integer domain is a much harder problem. -- [[Andrew Koenig]]]",
      "id": "dea73ce3ecf78d6dd65ae6a027027210"
    },
    {
      "type": "html",
      "text": "[Second note in passing: I misspoke when I said that the square root of a non-integer is always irrational. What I meant to say is that the square root of an integer is either an integer or irrational. Now, any floating-point value x can be multiplied by an even power of 2 to yield an integer. Call the smallest such number N. Then sqrt(x*N) == sqrt(x) * sqrt(N), and because N is an even power of 2, sqrt(N) is a power of 2. Because x*N is an integer, sqrt(x*N) is either an integer or irrational. If sqrt(x*N) is an integer, then sqrt(x) is an exact floating-point number, and it can be represented with half the significant bits of x. If sqrt(x*N) is irrational, then sqrt(x) must also be irrational, so it cannot have an exact floating-point representation.",
      "id": "77354cab21c8319b7cca4e96017b744e"
    },
    {
      "type": "html",
      "text": "\nSo what I'm trying to say is that if you take the square root of a floating-point number, then either the result is exact, and has lots of low-order zeroes, or it is a necessarily inexact approximation to an irrational. -- [[Andrew Koenig]]]",
      "id": "47d00208328644476120d0f6b1292eae"
    },
    {
      "type": "html",
      "text": "<i>What the hell does any of this crap have to do with DRY? If you want to spout off on your personal understanding (and misunderstanding) of digital representations of reals, go do it somewhere where it's relevant.</i>",
      "id": "ee138d5510ca30416995e379da6d7240"
    },
    {
      "type": "html",
      "text": "[<i>The assertion that sqrt(x) can be represented with half the significant bits of x is not always precisely correct.</i>]",
      "id": "098e4b8d1c459d8b929661caf6ca51a1"
    },
    {
      "type": "html",
      "text": "\nThanks to the comment inserted and the block below, I will note, that I didn't write the code for the sqrt function - a simple table may still suffice to bypass my domainless test as it may be proven that sqrt(x) = sqrt(y)*sqrt(z). Anyone up on a proof that this might (or might not) work? Also, instead of doing a stupid integral search (as shown below - it is only stupid because it does not check for y*y > x and break) a binary search of the Real Numbers Domain will at least afford some additional speed.",
      "id": "df116f0149abfe1aedec6150c6eeba69"
    },
    {
      "type": "html",
      "text": "-- [[Wyatt Matthews]]",
      "id": "0f4828e6a687d2b3b8b418f349697029"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "If x is an integer...",
      "id": "b2e119b2d7be7dfeca77391076c7a704"
    },
    {
      "type": "code",
      "text": " int sqrt(int x) {\n  int y = 1;\n  while (y*y != x) ++y;\n  return y;\n }",
      "id": "69373a0e80b72d1af8b3502b19d65123"
    },
    {
      "type": "html",
      "text": "<i>I'd like to see a proof that this will halt when x is an odd number other than 1.</i>",
      "id": "a18e9991b4a8fc8b5e7701625bc2c078"
    },
    {
      "type": "html",
      "text": "\nHere's your proof: If x=9, then: y=1, y*y=1; y=2, y*y=4; y=3, y*y=9. <b>returns y=3</b>",
      "id": "d196e23160fab63608f4c40f3411094c"
    },
    {
      "type": "html",
      "text": "<i>OK - but it doesn't halt if x is odd and also not a square.</i> -- [[David Martland]]",
      "id": "24e79a4692e6094cd935b0a222e5bc0b"
    },
    {
      "type": "html",
      "text": "\nMore appropriately, you should have asked for a proof that the function will pass the random test if <b>x = random_in_range(1, some_max)</b> can specify non-integral values or values <=0 with respect to the requirement. As it stands, this function is not coded to survive a large portion of the Integral Domain, much less the Real Numbers Domain. This function should be renamed to something such as \"[[Is Xa Perfect Square]]\" and modified a little.",
      "id": "d097d3149e964d68332c122798d88222"
    },
    {
      "type": "html",
      "text": "\nAt the least, the stated requirement wants:",
      "id": "0462052d8626d5c2869db7e6683157a7"
    },
    {
      "type": "html",
      "text": "\nerror_code sqrt(int x, double result)",
      "id": "e3576fef5cb3cc1dbdfd18287da87e8f"
    },
    {
      "type": "html",
      "text": "{",
      "id": "468181fa03502e82cd8264b13590fe23"
    },
    {
      "type": "code",
      "text": "  error_code res;\n  double test;",
      "id": "494f5e3ac09779c3b5f39c454720af19"
    },
    {
      "type": "code",
      "text": "  if(x<0) res = error_or_imaginary;\n  else\n  {\n    res = no_error;\n    if(x=0)\n      result = double(0);\n    else\n    {\n       //Some code to search the real number space.\n       //A binary search to a certain depth for example.\n    }\n  }",
      "id": "cd530a4083b5ebf136489e4be297cdad"
    },
    {
      "type": "code",
      "text": "  return res;",
      "id": "2f65e5dd2c8a4480ce86e1c0e5d8f528"
    },
    {
      "type": "html",
      "text": "}",
      "id": "67291cab479126d828da4856c7c5d3aa"
    },
    {
      "type": "html",
      "text": "-- Wyatt Matthews",
      "id": "0879794ce88e1e23d2dd7022039717de"
    },
    {
      "type": "html",
      "text": "<i>If you program it in C style, at least make it work in C (pass variables by value, etc)</i>",
      "id": "ca83d40b247fcab7f2ba0b7bbe0af014"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
    },
    {
      "type": "html",
      "text": "[[Category Extreme Programming]]",
      "id": "d8d67b50390bf28f37b43f23d20d077b"
    },
    {
      "type": "html",
      "text": "See original on  [http://c2.com/cgi/wiki?DontRepeatYourself c2.com]",
      "id": "510b380a64cbb7b19a8ca9765ddd8161"
    }
  ],
  "journal": [
    {
      "date": 1415753277000,
      "id": "c35e5d596e38e75bc03016f3893ba9bb",
      "type": "create",
      "item": {
        "title": "Dont Repeat Yourself",
        "story": [
          {
            "type": "html",
            "text": "<b>Context:</b>",
            "id": "c124692bd753a71b03088ea9117a45db"
          },
          {
            "type": "html",
            "text": "\nDuplication (inadvertent or purposeful duplication) can lead to maintenance nightmares, poor factoring, and logical contradictions. ",
            "id": "8a58f17d7dc611455d2ac3f97d938961"
          },
          {
            "type": "html",
            "text": "\nDuplication, and the strong possibility of eventual contradiction, can arise anywhere: in architecture, requirements, code, or documentation. The effects can range from mis-implemented code and developer confusion to complete system failure.",
            "id": "e623d3d3f787d69e142d90381b1d64e1"
          },
          {
            "type": "html",
            "text": "\nOne could argue that most of the difficulty in Y2K remediation is due to the lack of a single date abstraction within any given system; the knowledge of dates and date-handling is widely spread.",
            "id": "d30d0e0bd8f8b650eaca4a64ec302091"
          },
          {
            "type": "html",
            "text": "<b>The Problem:</b>",
            "id": "fdf3b5b0191b276176d8d29f92f3d7d0"
          },
          {
            "type": "html",
            "text": "\nBut what exactly counts as duplication? [[Clone And Modify Programming]] is generally cited as the chief culprit (see [[Once And Only Once]], etc.), but there is more to it than that. Whether in code, architecture, requirements documents, or user documentation, duplication of <i>knowledge</i> - not just text - is the real culprit.",
            "id": "d103e29909f2b216268b0c25d1f0a914"
          },
          {
            "type": "html",
            "text": "<b>Therefore:</b>",
            "id": "ca3fbd2ae18eeb9791860089f7aaec5a"
          },
          {
            "type": "html",
            "text": "\nThe DRY (Don't Repeat Yourself) Principle states:",
            "id": "967429d465d0ceda27dc0878ea30aad4"
          },
          {
            "type": "html",
            "text": "<i>Every piece of knowledge must have a single, unambiguous, authoritative representation within a system.</i>",
            "id": "8b776431b730fa714e690df72bc77e77"
          },
          {
            "type": "html",
            "text": "\nIt's okay to have mechanical, textual duplication (the equivalent of caching values: a repeatable, automatic derivation of one source file from some meta-level description), as long as the authoritative source is well known.",
            "id": "95e13c2fb51a1110da73d8d1cfb70fc1"
          },
          {
            "type": "html",
            "text": "\nFor example, in a mixed-language CORBA environment you may choose to treat the IDL definitions as authoritative. These definitions will be used to automatically generate source code files which duplicate the knowledge in the IDL. But that's okay: the IDL form of the knowledge meets the requirements of our definition.",
            "id": "214599875f009f2a81c5e4c818589c5b"
          },
          {
            "type": "html",
            "text": "\nWhere different levels of abstraction are involved, a consistent conflict-resolution scheme must be used. This could be as simple as identifying one level as authoritative in all cases, or always deferring to the high level, or whatever, as long as it is consistently applied.",
            "id": "28d880b6767748d6fe4cbef6f7613e5b"
          },
          {
            "type": "html",
            "text": "\nFor example, in [[Cee Plus Plus]] the interface and implementation for a class are typically specified in separate files, duplicating knowledge. You may consider the header file to be authoritative for the contract of the class as viewed by its clients, and the source code to be authoritative regarding issues of implementation which are hidden by the implementation.",
            "id": "961b85b32316a2749e530633a44308e2"
          },
          {
            "type": "html",
            "text": "<i>While the duplication between .c and .h files is annoying, requires extra effort, and discourages the use of private member functions, it doesn't violate DRY because the compiler enforces that the function definition in the .c file must match the prototype in the .h file.</i>",
            "id": "3fef9e4af99268734537685ed9b65a85"
          },
          {
            "type": "html",
            "text": "<b>Notes:</b> This principle is similar to [[Once And Only Once]], but with a different objective. With [[Once And Only Once]], you are encouraged to refactor to eliminate duplicated code and functionality. With <i>DRY</i>, you try to identify the single, definitive source of every piece of knowledge used in your system, and then use that source to generate applicable instances of that knowledge (code, documentation, tests, etc).",
            "id": "7f2d41165a9df3a62f71e3cf20076c0b"
          },
          {
            "type": "html",
            "text": "\nThe principle also assumes that your projects have a high degree of automation, allowing the generation of the derivative knowledge artifacts whenever required.",
            "id": "14e53c1fad96ef442649e64ee50171ca"
          },
          {
            "type": "html",
            "text": "-- [[Andrew Hunt]]",
            "id": "6e0b01ac89058a7355ae8fa6dd8642a7"
          },
          {
            "type": "html",
            "text": "\nThe following conversations get much simpler when we recognize the most important thing to DRY up is...",
            "id": "7d9d34db2b137b054ec78125b1df41bb"
          },
          {
            "type": "html",
            "text": " <b>declarations of behavior</b>",
            "id": "dcc1f518f7b2d0b0454a6334376c69e3"
          },
          {
            "type": "html",
            "text": "\nKeeping the structure of a program DRY is harder, and lower value. It's the business rules, the <i>if</i> statements, the math formulas, and the metadata that should appear in only one place. The WET stuff - HTML pages, redundant test data, commas and {} delimiters - are all easy to ignore, so DRYing them is less important.",
            "id": "42e7e82f9e70e26b322e886e34821285"
          },
          {
            "type": "html",
            "text": "--[[Phl Ip]]",
            "id": "2de19461206ab34762a141e35d1f194b"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "The opposite is <b>WET</b>:",
            "id": "c4d517df201413ba78ce1432544777d0"
          },
          {
            "type": "html",
            "text": " <b>W</b>e",
            "id": "92cb9d6840b031d2a3ced1e506a4049c"
          },
          {
            "type": "html",
            "text": " <b>E</b>dit",
            "id": "2cd27d16d5da639dee5ff05163409244"
          },
          {
            "type": "html",
            "text": " <b>T</b>erribly, Tumultuously, Tempestuously, Tenaciously, Too much, Timidly, Tortuously, Terrifiedly...",
            "id": "096096c6fc3006a72f51464664349433"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "I think WET also stands for \"We Enjoy Typing\" ",
            "id": "05ab14b665e55faf8ed91b5555c3a0b9"
          },
          {
            "type": "html",
            "text": "-- [[Duncan Bayne]]",
            "id": "8551d8ae5f1626c347ec5aabeb0e2f72"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "<b>But:</b>",
            "id": "e8c29fa5a04bfac9110a21b75f7e97e7"
          },
          {
            "type": "html",
            "text": "\nIt may take time and effort to select and/or create a definitive source - see [[You Arent Gonna Need It]]. -- [[Dick Botting]]",
            "id": "90d6af39590e7650f217bea81ea85a28"
          },
          {
            "type": "html",
            "text": "<b>Hmm.</b> \"Every piece of knowledge must have a single, unambiguous, authoritative representation within a system.\" Is this not a reasonable definition for a Singleton?",
            "id": "0ff9aa1ffb1eca2853afac67ebdfbdf7"
          },
          {
            "type": "html",
            "text": "<i>No. DRY refers to your source code, not your running program. [[Third Normal Form]] is the analogous principle for data.</i>",
            "id": "5618f35d2a6527940936f81825ce3ff8"
          },
          {
            "type": "html",
            "text": "\nUgh. I think you're both barking up the wrong trees there. It doesn't refer to source code, nor to the running program. It refers to a system. Needn't have computers involved at all.",
            "id": "dee8676dcfac2e14d7c43f3b6c38b70c"
          },
          {
            "type": "html",
            "text": "<i>Ugh to your pedantic false balance. The point is that it refers to sources of any sort, but the multiplicity of objects derived from the source is irrelevant.</i>",
            "id": "b2193d6589f04a86c8ce121ccf410550"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "In [[The Art Of Unix Programming]], [[Eric Raymond]] calls this the [[Single Point Of Truth]] rule (SPOT).",
            "id": "eaef0bc4ab1f45d1ce91c960ce035c87"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "I agree with this, \"in principle\". However, taken literally, this principle is impossible to achieve. For example, a function signature is duplicated at the function call site and the function definition site. Even if you don't declare types, the number of arguments is a fact that is duplicated. I prefer to think of getting rid of duplication (i.e. [[Once And Only Once]]) instead of never having it in the first place, because you keep discovering that something that you didn't think was a duplicate, really is. Also, sometimes it is more trouble than it is worth to eliminate some duplication. Moreover, it is often better to wait til you have several examples of the duplication so you can better see how to eliminate it. -- [[Ralph Johnson]]",
            "id": "2d132d744c62ed92fb9c24d9db48f014"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "The \"taken literally\" bit is nonsense. The user of information is not the source of information ... the type and number of arguments at the call site is dictated by the API and enforced by the compiler.",
            "id": "31fbb47bd49e08a6793db10eb40e8c3a"
          },
          {
            "type": "html",
            "text": "\nRalph, that's a really good way of looking at things. My biggest programming headaches have always come from abstractly struggling with \"how can I write a good general solution to this problem\", even though I only know of one place where it's definitely going to be used. \"I'd better think of a general solution now,\" I think, \"or I'll have to copy-and-paste-and-change code!\" But it's absurd to try to come up with a general solution without knowing more about the different varieties of the problem that exist (or will exist) in the system.",
            "id": "ef6a04a17a1f5fd299e8168546d97dff"
          },
          {
            "type": "html",
            "text": "\nIt's a battle of two really strong urges - [[Once And Only Once]] vs avoiding [[Premature Generalization]]. Do I duplicate for now and try to live with the duplication for a while, or violate [[Yag Ni]] and come up with some half-cocked generalized solution? It's a tough one, because almost <i>all</i> programmers hate duplication; it's a sort of primordial programming urge.",
            "id": "b8cc54ce30dfb4f4eaf9234449e6d86d"
          },
          {
            "type": "html",
            "text": "\nHowever, even though [[Copy And Paste Programming]] can be expensive to clean up, so is a botched \"general solution\" - and copy and paste is <i>far</i> cheaper up front. So I also am in favour of <b>temporary</b> duplication, to be refactored when you have a clearer view of the situation. -- [[Matthew Bennett]]",
            "id": "1ea3d9af7a9018f7497f4f152fcfb61b"
          },
          {
            "type": "html",
            "text": "\nAlas, just exactly how I thought about it. Now the temporary duplication is a hellish permanent duplication. I have no time to remove it, and the more I have to update the evil twins of code, the less time to ever do something about it i get. -- L.A.Nilsson",
            "id": "d3bb38a38ec5a5cf173b1a480e90b5e5"
          },
          {
            "type": "html",
            "text": "(For more in the vein of \"let a duplication live for a while, in order to see how to best eliminate it\", see [[Code Harvesting]].)",
            "id": "ebfad0907372a892323bcd859bd2e644"
          },
          {
            "type": "html",
            "text": "\nI think there is also a collision with [[Do The Simplest Thing That Could Possibly Work]] where I believe that latter should win most of the time (aside from the situations where refactoring is too complicated, database schemas?)",
            "id": "ec31698fe5d722ec028c4b7e3bf456ad"
          },
          {
            "type": "html",
            "text": "<i>It depends on how \"simplest\" is conceptualized. If, as is common in the XP world, it means \"the smallest possible number of microseconds of effort to meet the requirements of the moment\", then the resulting mess will reflect such shortsighted thinking. OTOH, the information-theoretic sense of reducing all redundancy also has its costs.</i>",
            "id": "4a48e221a73ccdecacb7b547c6f571c1"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "The DRY principle is really a philosophical issue (although it does rear its head retroactively during coding). The idea is to try to plan ahead to prevent duplication, rather that to waste time removing stuff you've already done. Function signatures are a form of duplication, albeit a fairly minor one, as the compiler should be able to spot times where one side gets out of step. It's the more insidious duplication we hope to stop with DRY. -- Dave",
            "id": "3dbec002be27b9481927c02a194475e9"
          },
          {
            "type": "html",
            "text": "<i>Why is this duplication? Neither the prototype alone nor the function definition carries the full message. Without the prototype errors will creep in, and with out the function definition errors creep in. This is not duplication it is virtuous redundancy which increases the total error trapping power synergisticly. Did I miss the point somewhere ?</i> ",
            "id": "cb4a112f255f5ffa827f1cd1f351df79"
          },
          {
            "type": "html",
            "text": "\nI like this principle. Perhaps related to the idea of being able to trace any piece of coding back to the reasons for its existence and form. For me a key point is the selection of one item as a definitive source for certain purposes.",
            "id": "7a9c6b159656f9e8b54b64a1e1c2cea8"
          },
          {
            "type": "html",
            "text": "\nFor example, as in the above description, I'd normally take a function prototype/header/declaration as guiding the function calls. This is why I like header files to contain comments describing the contract (<i>make sure the first argument points at real storage and this call will do ..... for you</i>). The function bodies are definitive for the implementation decisions but might be derived from <i>more</i> definitive generic algorithms perhaps? -- [[Dick Botting]]",
            "id": "064df76a606f319064f3f996b172bf8b"
          },
          {
            "type": "html",
            "text": "\nI certainly like this principle. The applications in embedded systems should be obvious to the casual observer. Can the pump dispense medication or not? Only one entity knows the absolute answer to this puzzler. Every component that needs to know what the machine's current status is goes to a well-known method (a resource) to find out. What units are we dealing with, ml or mg/cc? Each component may need a local copy of this setting to figure out how to convert, but they all go to a central repository to acquire that knowledge. Most excellent, wouldn't you say?",
            "id": "dec5364b9f4a42dadbffc7166c7ac376"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "The Single Authority afforded by the DRY principle and the duplication of the source as a basis for the program environment adds inertia to the system (see [[Redundancy Is Inertia]]) for the sake of its stability. Here's a little list that I believe shows how [[Redundancy Is Inertia]], the DRY principle, [[Once And Only Once]], and testing should work together:",
            "id": "ab2af9b001ae66a8c8e1ef4f05a88616"
          },
          {
            "type": "html",
            "text": " the single authority is the interface's signature and documented requirements/goals. ([[Requirements And Goals]] are another issue)",
            "id": "1eb2e29faf5b1e344a082941386ad6c8"
          },
          {
            "type": "html",
            "text": " the authority needs to be readable by any potential <i>direct</i> user. (i.e.: a textual or graphical representation for the software writer and a binary representation for the software)",
            "id": "71c15606b006b0296dcada6144e82789"
          },
          {
            "type": "html",
            "text": " the interface's body (the process) may duplicate the signature if and only if the implementation environment requires it.",
            "id": "5a5160c1347d5e392b097e177ffa3ed3"
          },
          {
            "type": "html",
            "text": " The process is a fact - <b>It must abide by [[Once And Only Once]] and test true against the authority.</b>",
            "id": "0fabac87ed79f54e5f78fac8aa07a84e"
          },
          {
            "type": "html",
            "text": " R&G markers may be placed in the textual copy of the process much as edit notes are sometimes placed there.",
            "id": "44ecc33c3b79266c26b92271c64299df"
          },
          {
            "type": "html",
            "text": " the user duplicates only the part of the signature required to establish communications. (the compilation process is allowed to duplicate the interface's process.)",
            "id": "85f79b75d0aae6b1c3968be1ba543b6c"
          },
          {
            "type": "html",
            "text": " the user of the interface should only need test the interface against the R&G once per life cycle. (see [[Category Testing]])",
            "id": "e4cf19aeac849454f763acb780d9e985"
          },
          {
            "type": "html",
            "text": "-- [[Wyatt Matthews]]",
            "id": "0f4828e6a687d2b3b8b418f349697029"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "There is a pattern to the exceptions to the principle. <i>It is ok to have more than one representation of a piece of knowledge provided an effective mechanism for ensuring consistency between them is engaged.</i>",
            "id": "87ae2fb4728d8052bbf9b87e7c732fa5"
          },
          {
            "type": "html",
            "text": " Definitions and declarations of C functions: these are usually in sync because the compiler flags inconsistencies, forcing the programmer to take action.",
            "id": "36fb8433910947c9e0f1dbc0a9d87b60"
          },
          {
            "type": "html",
            "text": " Unit tests: inconsistency means the tests will fail, again forcing someone to take action.",
            "id": "6f5facf69873a4c7dece115c088f683c"
          },
          {
            "type": "html",
            "text": " Autogenerated stuff: periodic regeneration ensures consistency.",
            "id": "695c1010b94a7e94bac5a25541c767d4"
          },
          {
            "type": "html",
            "text": "\nOften the effective mechanism is automated but it doesn't need to be. An example is end-user documentation: an automated mechanism for verifying software/documentation consistency is hard to come by ([[Ai Complete]]?), so you need a human to review this. A mechanism to ensure consistency could in this case be an instruction on what to do before each software release.",
            "id": "d63c8073dfd71d0fed602ed1dc3e8a72"
          },
          {
            "type": "html",
            "text": "-- [[Anders Munch]]",
            "id": "c2fc5230caa47452b9907ecec3e17cc1"
          },
          {
            "type": "html",
            "text": "\nDRY doesn't just combat inconsistency, though. Yes, a passed test shows that code and test are consistent, but they may still both be wrong. If the test and the code have the same underlying structure/knowledge, it's more likely that a double fail will make a pass. However, in many functions, it's easy to eliminate the double errors because their inverse is radically different. For example, consider error correcting codes: encoding is just a hash while decoding is a complex operation. Implementing the encoder as a test reliably finds errors in the decoder. ",
            "id": "d327307143dd9abc159c28f2b28cf31d"
          },
          {
            "type": "html",
            "text": "\nDRY says that one should strive to use a different implementation in test and code to avoid the same error in both causing a false positive. This actually brings up another point - what do you do when the only way of implementing something is identical to the way you test it? I must admit I'm never quite happy when I have to do that. Luckily, it usually only occurs when the operation is so simple that it barely needs testing at all. -- [[James Keogh]]",
            "id": "c2a744b5c098de747f23b57d80a354c6"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "See [http://blogs.computerworld.com/but_it_seemed_like_such_a_good_idea_at_the_time blogs.computerworld.com] for an amusing demonstration of the evils of duplicate code.",
            "id": "a91ddea52c705139b22cf2f8e10d5ce2"
          },
          {
            "type": "html",
            "text": "-- [[Aristotle Pagaltzis]]",
            "id": "9c77447fa974278660d3546408d89dd8"
          },
          {
            "type": "html",
            "text": "\nPosting a link is itself an amusing demonstration of the evils of duplicate code (this link is a valid example).  --M Jones",
            "id": "4cc8a3cb95920dbe7e6311d3b5a78672"
          },
          {
            "type": "html",
            "text": "<i>Was the article at that link ever about DRY, or is it simply an inappropriate link? What is really needed is an archival link that incorporates a message hash so there can be a guarantee that the content hasn't changed.</i>",
            "id": "68404e5ec7a885a66e569b383a4bc88f"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "I'm struck by the fact that this is the principle that pushes people to normalize relational databases. It's not without its downside considering the reasons why people choose star schemas. There needs to be some discussion of when it is OK to abandon this rule. -- meta@pobox.com",
            "id": "b778a3632d9386b0d42ebb317c553470"
          },
          {
            "type": "html",
            "text": "<i>Actually, normalized databases rely on data duplication and one usually has to write a set of constraints to ensure that keys linking tables are consistent.</i>",
            "id": "e9db5d0911830be194631b41f47f2f63"
          },
          {
            "type": "code",
            "text": "    HUH ? The fact that the same  data is in  the FK and the PK of the linked tables is not duplication it is a \n    necessary method of implementing the link. ",
            "id": "773852585559e7fb99f63ea94f6a975c"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "Meta's comment about databases reminds me of the fact that the schema of the database and the code that access the database are two representations of data structures. Ideally, both the code and the database schema would be driven off the same source of data structure information. ",
            "id": "57a89cbfee1fd81ca39800eab34c5707"
          },
          {
            "type": "html",
            "text": "\nThis is the attraction of Ruby's [[Active Record]] and the reason I hate Hibernate and Struts. Both Hibernate and Struts have duplicate information that needs to be in sync. Without something like XDoclet they will get out of sync and will violate DRY. SaS",
            "id": "2ac6a9599d2e2f0ec94f79785146e6b9"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "Merely hoping to learn what \"DRY\" is, I came.  The thought-inspiring philosophical discussion was too much, merely to read. ",
            "id": "f9b5314a810ee2c339aab5deeb77c649"
          },
          {
            "type": "html",
            "text": "\nEpidemiology (in short, the study of disease and disease distribution in populations) promulgates the idea that a given [<i>outbreak of a</i>] disease has a single cause -- a root cause.  In systems, Root Cause Analysis inevitably takes us back to a design error and this is often traceable to an error in the requirements definition.  (Data from the Software Engineering Institute (SEI) at Carnegie-Mellon University (CMU) shows a number over 60%, for the percentage of errors caused within the steps part of Requirements Definition.)",
            "id": "65538eced51dba00197aae3b76adc0cc"
          },
          {
            "type": "html",
            "text": "\nEarlier computer engineering concepts (say, early-1980s) had matured sufficiently that students (and managers) might believe people other than those who are anti-social can be as good (or better) than a \"guru\". The coming generation of engineers/programmers would value writing their ideas even if they didn't work for IBM.  Some might even plan ahead. This allowed design to avoid circumstantial redundancy.  The DoD-funded work at CMU that gave rise to the SEI in the 1980s revealed that \"best practices\" begin with \"planning\" of some sort.",
            "id": "362caeb3e4a76ed5ca0b2869f6e9de49"
          },
          {
            "type": "html",
            "text": "\nTo sum up what can easily occupy volumes: We need to learn from our mistakes.  This requires conscious effort and time-commitment, which makes it rare.  No acronym can represent every project, so a cheat sheet might simply read as, \"DRY\".  This is redundant with the starting post -- but I didn't write it which means DRY has not been violated.  (Though this contrib /may be/ a bit dry.)",
            "id": "1eded207198c9815b38c6a7c69ceb1ab"
          },
          {
            "type": "html",
            "text": "-- Kernel.package",
            "id": "7812a2b8e78cc0df6a47dee376a186e3"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "[[Once And Only Once]] is hard to apply when consumers appreciate [[Put Things Where You Look]]. And consumers look for everything everywhere. Translation, \"Why isn't this email a link I can click. Your email should be on the contacts page, the user page, the help page, and the home page.\" -- [[Lee Louviere]]",
            "id": "126f9911fd3c89f941a2ffce151a7ef3"
          },
          {
            "type": "html",
            "text": "\nIt must be visible everywhere. It can live in  only one place. A view is not the data. <- <i>This. Of course it's \"hard to apply\" ... that's why we're paid the big bucks.</i>",
            "id": "6db2f73b7fd6b9eaba6cafee2d97e0e9"
          },
          {
            "type": "html",
            "text": "<i>Customer requests trump DRY. If source code on the inside is dry, then those email clickers will all use the same code, trivially plugged into several different view locations</i> --[[Phl Ip]]",
            "id": "39880d91f26bac3b339937763b4e093f"
          },
          {
            "type": "html",
            "text": "\nHmm. Let me rephrase. [[Put Things Where You Look]] (applied to the concept of putting things everywhere the user might look), may lead to accidentally breaking [[Once And Only Once]], and can accidentally be viewed as contrast to [[Dont Repeat Yourself]]. However, you should really implement a program data as uncoupled from the interface. Don't confuse DRY to mean that information can only have one location as opposed to one source. ",
            "id": "dfe0640f7a989fd4e7d00e235bab5b9d"
          },
          {
            "type": "html",
            "text": "\nI take the approach to design data and interface as if they were separate programs, then have their \"communication\" derived last. That way I ensure that data is implemented \"native\" to the machine language of simplicity, and the user interface is designed as most conforming to how the user would use it; meet the user demand of [[Put Things Where You Look]] and the myriad of different arrangements of the data to accommodate every users distinct way of understanding data. ([[Edit Me]] need a better term here, native is bad, communication is horrible.) -- [[Lee Louviere]]",
            "id": "2ab516e7ef76e65b351886180c69b005"
          },
          {
            "type": "html",
            "text": "---- \nIf this principle exists at all it is more likely to be called 'eliminate needless redundancy' than 'do not repeat yourself.'  [<i>No, it is more likely -- in fact the probability is 100% -- to be called DRY</i>]\nA = A is not a redundant statement. A is not needless repetition. A= B is not the same as A=A and A by itself does not always mean A=A if it is test and not an analytic truth. There are numerous instances of claims of repetition in the discussion above where removing one of the instance of the alleged duplication  will change the meaning and behavior of a system.  If you can not remove one of the duplicates without changing meaning it is not  duplication.",
            "id": "45d06141e7642f4320d87567ce38ee8e"
          },
          {
            "type": "html",
            "text": "The notion that normalization requires duplication because the keys must exist in both tables, suggest that removing one of the dubs is possible but it is not.",
            "id": "2877d47776969456c3c29ef157ec746b"
          },
          {
            "type": "html",
            "text": "\nEven If I conceded that duplication is a better term than redundancy the key is that it is only needless duplication that must be purged. The acid test for needless, for those whose intuition is not a sufficient guide is this. If you can't remove it with out losing functionality it is not needless.",
            "id": "29be7d495b5c76154c7b424e810f0832"
          },
          {
            "type": "code",
            "text": " -- Anon",
            "id": "5b0f693e05e26f6fb16305441d1313e0"
          },
          {
            "type": "html",
            "text": "\nOK, but a lot of functionality should still be generalized in many cases since they're very similar, and there could be a better (more elegant) implementation of it. -- Anonymous",
            "id": "e1bbec36eec6d1b8d58c84c9e904be33"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "Sometimes market rules dictate the choice of implementation language, which can make use of [[Dont Repeat Yourself]] extremely difficult. Say there's one application that you want to deploy on multiple platforms, each of which requires (or at least very strongly prefers) code written in a particular language. One platform requires [[Objective Cee]]. Another platform requires 100% pure [[Java Virtual Machine]] bytecode. A third platform requires the use of 100% verifiably type-safe CIL ([[Common Language Runtime]] bytecode). A fourth platform requires [[Java Script]]. To achieve DRY under these constraints, one would have to somehow create a [[Domain Specific Language]] that compiles to Objective-C, compiles to JVM bytecode, compiles to safe CIL, and compiles to [[Java Script]], and then write the authoritative implementation of the business logic in that language. Should each cross-platform application project begin by designing and implementing a DSL as a workaround to allow [[Write Once Run Anywhere]] despite these market rules?",
            "id": "0c65dbcaaf3ac77ce0790e3daf6dcdb4"
          },
          {
            "type": "html",
            "text": "(For those who prefer concrete examples: iOS needs Objective-C, [[Java Micro Edition]] phones and [[Java Applet]] browsers need Java bytecode, Windows Phone 7 and Xbox Live Indie Games on Xbox 360 need CIL, and Flash, HTML5 browsers, and Chrome Web Store need variations of [[Ecma Script]].) -- [[Damian Yerrick]]",
            "id": "62b9deb34be5632e0f3541cb9478852f"
          },
          {
            "type": "html",
            "text": "<i>The fact that there are all sorts of roadblocks to acting on the principle has no bearing on the principle's validity.</i>",
            "id": "f6beb353c9336f416fd12bdfe762b421"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "[[Dont Repeat Yourself]], but repeating others is perfectly acceptable :-) <- <i>no</i>",
            "id": "867eca169b0db5b45d05bc5c4ca12b05"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "<i>Every piece of knowledge must have a single, unambiguous, authoritative representation within a system.</i>",
            "id": "8b776431b730fa714e690df72bc77e77"
          },
          {
            "type": "html",
            "text": "\nThis sounds like something out of Orwell's 1984. Any statement that begins with \"Every piece of knowledge must have ..\" sounds like the official propaganda of a totalitarian state - not the free exchange of ideas. Perhaps the principle really being expressed here is \"It's my way or the highway.\"",
            "id": "caa53cb6c23b56119014443ff0c71abb"
          },
          {
            "type": "html",
            "text": "{\"...and should pay me $130k/yr to police and enforce this policy.\" :-}",
            "id": "563cff0a77bf282e9b26b97c520a4b81"
          },
          {
            "type": "html",
            "text": "<i>Perhaps you have absolutely no idea what you -- and everyone else here -- is talking about.</i>",
            "id": "6c5811e9269e0a7701b663430583d517"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "\nI actually wholeheartedly agree with this and am pretty sure it is why I take so long to get anything done. I spend more time trying not to duplicate myself and finding clever ways to abstract out the various duplicated flow principles in my application than actually simply coding. Sometimes when I ignore rules like you have stated, I get an insane amount of work done...very quickly... and then I worry if it is messy.",
            "id": "6a247e92d6dd469577842d3c0ac51467"
          },
          {
            "type": "html",
            "text": "-- Richard Ellicott",
            "id": "faa960a86be43c13a824795fa2e5e3c0"
          },
          {
            "type": "html",
            "text": "<i>Perhaps with practice you will become more facile at abstraction.</i>",
            "id": "2dd765dc368080334663297c7e829224"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "See: [[Unnecessary Holography]], [[Once And Only Once]], [[Duplication Refactoring Threshold]]",
            "id": "99c37418fd21a5a2c5bffaa079bf6456"
          },
          {
            "type": "html",
            "text": "\n[[Category Modeling Laws And Principles]], [[Category Extreme Programming]], [[Category Planning]], [[Category Simplification]]",
            "id": "ec568e4a51f781b2ed510bacabe106e8"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "Let's try a simple XP coding example:",
            "id": "4c9d1e1560dab7ba1c806c9f122a7f7b"
          },
          {
            "type": "html",
            "text": "<i>-- are all these sqrt examples really making the point? Should we delete them or move them?</i> -- [[Anonymous Coward]]",
            "id": "51fc2075fe0da4e0737d67aa6c7baac9"
          },
          {
            "type": "html",
            "text": "<i> Agreed the square root example kinda went off on a tangent, the discussion itself wasn't too bad but it doesn't belong here</i>  --[[Andrew Ricketts]] {be bold about your opinions}",
            "id": "04b03cf926dceb59830444d24d528a3e"
          },
          {
            "type": "html",
            "text": "<i>I've moved this irrelevant stuff down here to the bottom so it's less annoying</i>",
            "id": "76ba3cea8ef619c9f3e522b4ce82e84c"
          },
          {
            "type": "html",
            "text": "\nP1: OK, we need a square root function. Lets code the first test case",
            "id": "6486c5db2afe56857b0b56c358f5765c"
          },
          {
            "type": "html",
            "text": "test1:<br>assert_equal(sqrt(4), 2);",
            "id": "1a51e1c7d9339e0213147fccf2f0456c"
          },
          {
            "type": "html",
            "text": "P2: and the code:",
            "id": "a4fce278c0cd8aadb1689078a678548a"
          },
          {
            "type": "code",
            "text": "  sub sqrt(x) { return 2; }",
            "id": "863f67b2b2603cb7f51b3378d013e6f9"
          },
          {
            "type": "html",
            "text": "P1: Hmm. OK, perhaps we need another test to get a better implementation",
            "id": "9e54f52e94ce53de4b8fca914234738c"
          },
          {
            "type": "html",
            "text": "test2:<br>assert_equal(sqrt(9), 3);",
            "id": "4e5edb1d4681656293672a2cca1d741d"
          },
          {
            "type": "html",
            "text": "P2: OK",
            "id": "888db335fad51814fbb864f212a5ca93"
          },
          {
            "type": "code",
            "text": "  sub sqrt (x) { if (x==4) { return 2 } elseif (x==9) { return 3 } }",
            "id": "a358e86e44b47dd0774a31aa9874802b"
          },
          {
            "type": "html",
            "text": "P1: You can't do that, you're just repeating the information in the test: it violates the DRY principle",
            "id": "6f11c888fd1b552e0a96307974bd1c7a"
          },
          {
            "type": "html",
            "text": "\nP2: That doesn't matter. Code must only obey OAOO. DRY is just philosophical claptrap. The tests don't provide enough information to generalize, so the simplest thing is to duplicate the information.",
            "id": "c3fed6fcc4894a54d7ae23e20a813804"
          },
          {
            "type": "html",
            "text": "\nP1: No, it does matter. A test and its code must use different algorithms when expressing the same information. If they are the same then the test adds no value.",
            "id": "80205df878c252f13d5538644864fa8f"
          },
          {
            "type": "html",
            "text": "\nWho is correct? What implementation would enable the tests + code to conform to DRY?",
            "id": "c0eba35d8efb335a83f175be27566f0e"
          },
          {
            "type": "html",
            "text": "<i>Well, considering that anyone who wrote tests like that should be immediately fired, the answer is obvious. First principle, without which all else is lost: act in good faith.</i>",
            "id": "6bf00093d78f4882ad9cb2abca4c163f"
          },
          {
            "type": "html",
            "text": "''Here's my resolution for this particular example:",
            "id": "a94377613d85d9009dbc51e34d01fe1f"
          },
          {
            "type": "html",
            "text": " Start with a good statement about the process to design and test.",
            "id": "4f54958a90aea73d4cef490ac73a74b7"
          },
          {
            "type": "html",
            "text": "Documented requirement:",
            "id": "e701b074f397c4f80e8f0b29eaddc3b3"
          },
          {
            "type": "html",
            "text": " produce the square root of (x).",
            "id": "6bf0b8a14c1e3811670966d87c44ac1c"
          },
          {
            "type": "html",
            "text": " Where sqrt(x)*sqrt(x) = x.",
            "id": "14842b10e20dcc1ca99b8fac7447b616"
          },
          {
            "type": "html",
            "text": " Error or imaginary numbers must be returned for x < 0.",
            "id": "a321a08c732d5409d2a47ccf921c7490"
          },
          {
            "type": "html",
            "text": " x = 0 should return 0.",
            "id": "b920e6fe8c8ed01797a4f0b03ce864cf"
          },
          {
            "type": "html",
            "text": " <b>Inserted requirement:</b> x is in the Real Number Domain.",
            "id": "2507b4136a702822bd5b6a97c8ffefa5"
          },
          {
            "type": "html",
            "text": " <b>Inserted performance requirement:</b> Function Overflow must be considered and reported as an error.",
            "id": "26ebfa018166b81f9fbddf809b6872a3"
          },
          {
            "type": "html",
            "text": " <b>Inserted performance requirement:</b> As Fast As Possible/Do Not Bottle Neck.",
            "id": "e9d3375c2af7da57f05f6a0d5e714c50"
          },
          {
            "type": "html",
            "text": " Then write your test:",
            "id": "217b8e1cbc4dd9c538f0080da51d615a"
          },
          {
            "type": "code",
            "text": "  for(y=1 to 100) {\n    x = random_in_range(1, some_max) ''-- why not replace 1 by some_min - possibly large and -ve?''\n    assert_equal(x,sqrt( (x*x) ))",
            "id": "17f9741367c5a398a215dbe8e3d60535"
          },
          {
            "type": "html",
            "text": "<i>you might also want to consider <b>assert_equal(x,sqrt(x)*sqrt(x))</b> which is a different proposition. -- [[David Martland]]</i>",
            "id": "749d2b87696ba31d8a0667e6bff0c331"
          },
          {
            "type": "code",
            "text": "  }\n  assert_error_or_imaginary(sqrt(-1))\n  assert_zero(sqrt(0))",
            "id": "b75613bf6a78bf0d2081e3854b5119b9"
          },
          {
            "type": "html",
            "text": " notice that the requirement does not specify an upper domain. So modified the test for random values > 0. This way Mr. Guru Coder doesn't get lazy and implement any complex if statements. <i>If statement nothing. A guard clause and a table lookup. -- [[Mr Guru Coder]].</i> I happen to know from experience that such a table tends to get expensive with 32-bit and larger integers (several optimizations and I couldn't get a [[Prime Number]] table below a quarter gig before giving up - but hey, what a weekend of coding).",
            "id": "124aa7112c3be997beeb5f53d0b4c22d"
          },
          {
            "type": "html",
            "text": " finally code and test the sqrt function.",
            "id": "042a490969a95f67f32dac7036b2b6e3"
          },
          {
            "type": "html",
            "text": "-- [[Wyatt Matthews]]",
            "id": "0f4828e6a687d2b3b8b418f349697029"
          },
          {
            "type": "html",
            "text": "[Noted in passing: This test doesn't seem to do much toward verifying that the code works when the argument to <b>sqrt</b> is not an integer. Indeed, if x is a floating-point number that is not an integer, the square root of x can <i>never</i> be represented exactly as a floating-point number (Counterexample: sqrt(0.25) = 0.5 is perfectly representable in binary floating point; RV) (because the square root of a non-integer is always irrational <i>- definitely wrong: sqrt(0.01) == 0.1, where 0.01 is non-integer and 0.1 is rational -- [[Mr Mathematician]]</i>). So testing a square-root program outside the integer domain is a much harder problem. -- [[Andrew Koenig]]]",
            "id": "dea73ce3ecf78d6dd65ae6a027027210"
          },
          {
            "type": "html",
            "text": "[Second note in passing: I misspoke when I said that the square root of a non-integer is always irrational. What I meant to say is that the square root of an integer is either an integer or irrational. Now, any floating-point value x can be multiplied by an even power of 2 to yield an integer. Call the smallest such number N. Then sqrt(x*N) == sqrt(x) * sqrt(N), and because N is an even power of 2, sqrt(N) is a power of 2. Because x*N is an integer, sqrt(x*N) is either an integer or irrational. If sqrt(x*N) is an integer, then sqrt(x) is an exact floating-point number, and it can be represented with half the significant bits of x. If sqrt(x*N) is irrational, then sqrt(x) must also be irrational, so it cannot have an exact floating-point representation.",
            "id": "77354cab21c8319b7cca4e96017b744e"
          },
          {
            "type": "html",
            "text": "\nSo what I'm trying to say is that if you take the square root of a floating-point number, then either the result is exact, and has lots of low-order zeroes, or it is a necessarily inexact approximation to an irrational. -- [[Andrew Koenig]]]",
            "id": "47d00208328644476120d0f6b1292eae"
          },
          {
            "type": "html",
            "text": "<i>What the hell does any of this crap have to do with DRY? If you want to spout off on your personal understanding (and misunderstanding) of digital representations of reals, go do it somewhere where it's relevant.</i>",
            "id": "ee138d5510ca30416995e379da6d7240"
          },
          {
            "type": "html",
            "text": "[<i>The assertion that sqrt(x) can be represented with half the significant bits of x is not always precisely correct.</i>]",
            "id": "098e4b8d1c459d8b929661caf6ca51a1"
          },
          {
            "type": "html",
            "text": "\nThanks to the comment inserted and the block below, I will note, that I didn't write the code for the sqrt function - a simple table may still suffice to bypass my domainless test as it may be proven that sqrt(x) = sqrt(y)*sqrt(z). Anyone up on a proof that this might (or might not) work? Also, instead of doing a stupid integral search (as shown below - it is only stupid because it does not check for y*y > x and break) a binary search of the Real Numbers Domain will at least afford some additional speed.",
            "id": "df116f0149abfe1aedec6150c6eeba69"
          },
          {
            "type": "html",
            "text": "-- [[Wyatt Matthews]]",
            "id": "0f4828e6a687d2b3b8b418f349697029"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "If x is an integer...",
            "id": "b2e119b2d7be7dfeca77391076c7a704"
          },
          {
            "type": "code",
            "text": " int sqrt(int x) {\n  int y = 1;\n  while (y*y != x) ++y;\n  return y;\n }",
            "id": "69373a0e80b72d1af8b3502b19d65123"
          },
          {
            "type": "html",
            "text": "<i>I'd like to see a proof that this will halt when x is an odd number other than 1.</i>",
            "id": "a18e9991b4a8fc8b5e7701625bc2c078"
          },
          {
            "type": "html",
            "text": "\nHere's your proof: If x=9, then: y=1, y*y=1; y=2, y*y=4; y=3, y*y=9. <b>returns y=3</b>",
            "id": "d196e23160fab63608f4c40f3411094c"
          },
          {
            "type": "html",
            "text": "<i>OK - but it doesn't halt if x is odd and also not a square.</i> -- [[David Martland]]",
            "id": "24e79a4692e6094cd935b0a222e5bc0b"
          },
          {
            "type": "html",
            "text": "\nMore appropriately, you should have asked for a proof that the function will pass the random test if <b>x = random_in_range(1, some_max)</b> can specify non-integral values or values <=0 with respect to the requirement. As it stands, this function is not coded to survive a large portion of the Integral Domain, much less the Real Numbers Domain. This function should be renamed to something such as \"[[Is Xa Perfect Square]]\" and modified a little.",
            "id": "d097d3149e964d68332c122798d88222"
          },
          {
            "type": "html",
            "text": "\nAt the least, the stated requirement wants:",
            "id": "0462052d8626d5c2869db7e6683157a7"
          },
          {
            "type": "html",
            "text": "\nerror_code sqrt(int x, double result)",
            "id": "e3576fef5cb3cc1dbdfd18287da87e8f"
          },
          {
            "type": "html",
            "text": "{",
            "id": "468181fa03502e82cd8264b13590fe23"
          },
          {
            "type": "code",
            "text": "  error_code res;\n  double test;",
            "id": "494f5e3ac09779c3b5f39c454720af19"
          },
          {
            "type": "code",
            "text": "  if(x<0) res = error_or_imaginary;\n  else\n  {\n    res = no_error;\n    if(x=0)\n      result = double(0);\n    else\n    {\n       //Some code to search the real number space.\n       //A binary search to a certain depth for example.\n    }\n  }",
            "id": "cd530a4083b5ebf136489e4be297cdad"
          },
          {
            "type": "code",
            "text": "  return res;",
            "id": "2f65e5dd2c8a4480ce86e1c0e5d8f528"
          },
          {
            "type": "html",
            "text": "}",
            "id": "67291cab479126d828da4856c7c5d3aa"
          },
          {
            "type": "html",
            "text": "-- Wyatt Matthews",
            "id": "0879794ce88e1e23d2dd7022039717de"
          },
          {
            "type": "html",
            "text": "<i>If you program it in C style, at least make it work in C (pass variables by value, etc)</i>",
            "id": "ca83d40b247fcab7f2ba0b7bbe0af014"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "3ccc0464bb1b6e45831d30febcd2a9f8"
          },
          {
            "type": "html",
            "text": "[[Category Extreme Programming]]",
            "id": "d8d67b50390bf28f37b43f23d20d077b"
          },
          {
            "type": "html",
            "text": "See original on  [http://c2.com/cgi/wiki?DontRepeatYourself c2.com]",
            "id": "510b380a64cbb7b19a8ca9765ddd8161"
          }
        ]
      }
    },
    {
      "type": "fork",
      "site": "sfw.c2.com",
      "date": 1627476678580
    }
  ]
}