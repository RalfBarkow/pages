{
  "title": "testWhereIsMyRaise",
  "story": [
    {
      "type": "paragraph",
      "id": "02031fc63d4ee082",
      "text": "The existing test cases use a simple form of Perspective where the posting date and effective date are\nthe same. The new test case uses a retroactive [[Perspective]]."
    },
    {
      "type": "code",
      "id": "d0faa86ae10e3570",
      "text": "NavigationTest>>testWhereIsMyRaise\n| contract firstVersion secondVersion correction |\ncontract := Contract new.\nfirstVersion := ContractVersion pay: 1000.\ncontract versionAt: '1/1/99' asPerspective put: firstVersion.\nsecondVersion := ContractVersion pay: 2000.\ncorrection := Perspective\n\t\tposting: '3/1/99' asDate\n\t\teffective: '2/1/99' asDate.\ncontract versionAt: correction put: secondVersion.\nself assert: (contract versionAt: '2/1/99' asPerspective) pay = 1000.\nself assert: (contract versionAt: ‘3/1/99’ asPerspective) pay = 2000.\nself assert: (contract versionAt: correction) pay = 2000"
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "testWhereIsMyRaise",
        "story": []
      },
      "date": 1654322422787
    },
    {
      "item": {
        "type": "factory",
        "id": "02031fc63d4ee082"
      },
      "id": "02031fc63d4ee082",
      "type": "add",
      "date": 1654322440852
    },
    {
      "type": "edit",
      "id": "02031fc63d4ee082",
      "item": {
        "type": "paragraph",
        "id": "02031fc63d4ee082",
        "text": "The existing test cases use a simple form of Perspective where the posting date and effective date are\nthe same. The new test case uses a retroactive Perspective.\nNavigationTest>>testWhereIsMyRaise\n| contract firstVersion secondVersion correction |\ncontract := Contract new.\nfirstVersion := ContractVersion pay: 1000.\ncontract versionAt: '1/1/99' asPerspective put: firstVersion.\nsecondVersion := ContractVersion pay: 2000.\ncorrection := Perspective\nposting: '3/1/99' asDate\neffective: '2/1/99' asDate.\ncontract versionAt: correction put: secondVersion.\nself assert: (contract versionAt: '2/1/99' asPerspective) pay = 1000.\nself assert: (contract versionAt: ‘3/1/99’ asPerspective) pay = 2000.\nself assert: (contract versionAt: correction) pay = 2000"
      },
      "date": 1654322442355
    },
    {
      "item": {
        "type": "factory",
        "id": "d0faa86ae10e3570"
      },
      "id": "d0faa86ae10e3570",
      "type": "add",
      "after": "02031fc63d4ee082",
      "date": 1654322457634
    },
    {
      "type": "edit",
      "id": "02031fc63d4ee082",
      "item": {
        "type": "paragraph",
        "id": "02031fc63d4ee082",
        "text": "The existing test cases use a simple form of Perspective where the posting date and effective date are\nthe same. The new test case uses a retroactive Perspective."
      },
      "date": 1654322459282
    },
    {
      "type": "edit",
      "id": "d0faa86ae10e3570",
      "item": {
        "type": "code",
        "id": "d0faa86ae10e3570",
        "text": "\nNavigationTest>>testWhereIsMyRaise\n| contract firstVersion secondVersion correction |\ncontract := Contract new.\nfirstVersion := ContractVersion pay: 1000.\ncontract versionAt: '1/1/99' asPerspective put: firstVersion.\nsecondVersion := ContractVersion pay: 2000.\ncorrection := Perspective\nposting: '3/1/99' asDate\neffective: '2/1/99' asDate.\ncontract versionAt: correction put: secondVersion.\nself assert: (contract versionAt: '2/1/99' asPerspective) pay = 1000.\nself assert: (contract versionAt: ‘3/1/99’ asPerspective) pay = 2000.\nself assert: (contract versionAt: correction) pay = 2000"
      },
      "date": 1654322460544
    },
    {
      "type": "edit",
      "id": "02031fc63d4ee082",
      "item": {
        "type": "paragraph",
        "id": "02031fc63d4ee082",
        "text": "The existing test cases use a simple form of Perspective where the posting date and effective date are\nthe same. The new test case uses a retroactive [[Perspective]]."
      },
      "date": 1654322469821
    },
    {
      "type": "edit",
      "id": "d0faa86ae10e3570",
      "item": {
        "type": "code",
        "id": "d0faa86ae10e3570",
        "text": "NavigationTest>>testWhereIsMyRaise\n| contract firstVersion secondVersion correction |\ncontract := Contract new.\nfirstVersion := ContractVersion pay: 1000.\ncontract versionAt: '1/1/99' asPerspective put: firstVersion.\nsecondVersion := ContractVersion pay: 2000.\ncorrection := Perspective\nposting: '3/1/99' asDate\neffective: '2/1/99' asDate.\ncontract versionAt: correction put: secondVersion.\nself assert: (contract versionAt: '2/1/99' asPerspective) pay = 1000.\nself assert: (contract versionAt: ‘3/1/99’ asPerspective) pay = 2000.\nself assert: (contract versionAt: correction) pay = 2000"
      },
      "date": 1654322476965
    },
    {
      "type": "edit",
      "id": "d0faa86ae10e3570",
      "item": {
        "type": "code",
        "id": "d0faa86ae10e3570",
        "text": "NavigationTest>>testWhereIsMyRaise\n| contract firstVersion secondVersion correction |\ncontract := Contract new.\nfirstVersion := ContractVersion pay: 1000.\ncontract versionAt: '1/1/99' asPerspective put: firstVersion.\nsecondVersion := ContractVersion pay: 2000.\ncorrection := Perspective\n\t\t              posting: '3/1/99' asDate\n\t\t              effective: '2/1/99' asDate.\ncontract versionAt: correction put: secondVersion.\nself assert: (contract versionAt: '2/1/99' asPerspective) pay = 1000.\nself assert: (contract versionAt: ‘3/1/99’ asPerspective) pay = 2000.\nself assert: (contract versionAt: correction) pay = 2000"
      },
      "date": 1654322642338
    },
    {
      "type": "edit",
      "id": "d0faa86ae10e3570",
      "item": {
        "type": "code",
        "id": "d0faa86ae10e3570",
        "text": "NavigationTest>>testWhereIsMyRaise\n| contract firstVersion secondVersion correction |\ncontract := Contract new.\nfirstVersion := ContractVersion pay: 1000.\ncontract versionAt: '1/1/99' asPerspective put: firstVersion.\nsecondVersion := ContractVersion pay: 2000.\ncorrection := Perspective\n\t\tposting: '3/1/99' asDate\n\t\teffective: '2/1/99' asDate.\ncontract versionAt: correction put: secondVersion.\nself assert: (contract versionAt: '2/1/99' asPerspective) pay = 1000.\nself assert: (contract versionAt: ‘3/1/99’ asPerspective) pay = 2000.\nself assert: (contract versionAt: correction) pay = 2000"
      },
      "date": 1654322683447
    }
  ]
}