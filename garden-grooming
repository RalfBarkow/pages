{
  "title": "Garden Grooming",
  "story": [
    {
      "type": "paragraph",
      "id": "d153985bd0787c96",
      "text": "Once our stories have been told we assemble here the garden of pages they have mentioned and grow this again following links layer by layer."
    },
    {
      "type": "paragraph",
      "id": "a5b23f8b9607a078",
      "text": "Try [[Find Saved Tellings]] to be included here."
    },
    {
      "type": "reference",
      "id": "d94576ee8f5695e0",
      "site": "wiki.ralfbarkow.ch",
      "slug": "more-telling-about-federated-wiki",
      "title": "More Telling About Federated Wiki",
      "text": "Story of 6 pages with 2789 words and 25 more links."
    },
    {
      "type": "reference",
      "id": "0bd2c2f91c785f96",
      "site": "wiki.ralfbarkow.ch",
      "slug": "more-telling-field-guide-to-the-federation",
      "title": "More Telling Field Guide to the Federation",
      "text": "Story of 6 pages with 1241 words and 13 more links."
    },
    {
      "type": "reference",
      "site": "ward.dojo.fed.wiki",
      "slug": "more-telling-featured-sites",
      "title": "More Telling Featured Sites",
      "text": "Story of 5 pages with 1089 words and 29 more links.",
      "date": 1648485496010,
      "id": "51049004783372107776"
    },
    {
      "type": "reference",
      "id": "966b827581191ee9",
      "site": "ward.dojo.fed.wiki",
      "slug": "more-more-telling-field-guide-to-the-federation",
      "title": "More More Telling Field Guide to the Federation",
      "text": "Story of 17 pages with 4281 words and 46 more links."
    },
    {
      "type": "reference",
      "site": "ward.dojo.fed.wiki",
      "slug": "more-telling-coding-portfolio",
      "title": "More Telling Coding Portfolio",
      "text": "Story of 22 pages with 4387 words and 145 more links.",
      "date": 1643691500701,
      "id": "63707798440546418688"
    },
    {
      "type": "frame",
      "id": "86f9e5eb41b676cd",
      "text": "https://wiki.ralfbarkow.ch/assets/pages/story-telling/start-garden.html\nHEIGHT 200"
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "Garden Grooming",
        "story": []
      },
      "date": 1643075077779
    },
    {
      "item": {
        "type": "factory",
        "id": "d153985bd0787c96"
      },
      "id": "d153985bd0787c96",
      "type": "add",
      "date": 1643075102449
    },
    {
      "type": "edit",
      "id": "d153985bd0787c96",
      "item": {
        "type": "paragraph",
        "id": "d153985bd0787c96",
        "text": "Once our stories have been told we assemble here the garden of pages they have mentioned and grow this again following links layer by layer "
      },
      "date": 1643075466453
    },
    {
      "item": {
        "type": "factory",
        "id": "be84fffd3b6cc105"
      },
      "id": "be84fffd3b6cc105",
      "type": "add",
      "after": "d153985bd0787c96",
      "date": 1643075624309
    },
    {
      "type": "edit",
      "id": "be84fffd3b6cc105",
      "item": {
        "type": "reference",
        "id": "be84fffd3b6cc105",
        "site": "ward.dojo.fed.wiki",
        "slug": "more-telling-about-federated-wiki",
        "title": "More Telling About Federated Wiki",
        "text": "Tell more by including these pages."
      },
      "date": 1643075629656
    },
    {
      "type": "edit",
      "id": "d153985bd0787c96",
      "item": {
        "type": "paragraph",
        "id": "d153985bd0787c96",
        "text": "Once our stories have been told we assemble here the garden of pages they have mentioned and grow this again following links layer by layer."
      },
      "date": 1643075732176
    },
    {
      "item": {
        "type": "factory",
        "id": "6b34c587478a1f2f"
      },
      "id": "6b34c587478a1f2f",
      "type": "add",
      "after": "be84fffd3b6cc105",
      "date": 1643078201819
    },
    {
      "type": "edit",
      "id": "6b34c587478a1f2f",
      "item": {
        "type": "reference",
        "id": "6b34c587478a1f2f",
        "site": "ward.dojo.fed.wiki",
        "slug": "more-telling-field-guide-to-the-federation",
        "title": "More Telling Field Guide to the Federation",
        "text": "Tell more by including these pages."
      },
      "date": 1643078204906
    },
    {
      "item": {
        "type": "factory",
        "id": "86f9e5eb41b676cd"
      },
      "id": "86f9e5eb41b676cd",
      "type": "add",
      "after": "6b34c587478a1f2f",
      "date": 1643079616981
    },
    {
      "type": "edit",
      "id": "86f9e5eb41b676cd",
      "item": {
        "type": "frame",
        "id": "86f9e5eb41b676cd",
        "text": "<p><button onclick=dotell(event)>tell story</button></p>\n<div id=result></div>\n<script type=module>\n  import * as frame from 'http://code.fed.wiki/assets/v1/frame.js'\n\n\n  window.result.innerHTML = (await frame.context()).page.story\n    .filter(item => item.type == 'reference')\n    .map(ref => `\n      <input type=\"radio\" id=\"${ref.title}\" name=\"ref\">\n      <label for=\"${ref.title}\">${ref.title}</label><br>`).join(\"\\n\")\n\n  window.dotell = function(event) {\n    document.getElementsByName('ref').forEach((i) => {if(i.checked) tell(event,i.id)})\n  }\n\n  async function tell(event,selected) {\n    let item = (await frame.context()).page.story.find(item => item.title == selected)\n    console.log(selected,item)\n    let title = `Telling ${item.title}`\n    let story = [{type:'paragraph', text:'Tell more by including these pages.'}]\n    let site = item.site\n    let page = await fetch(`//${site}/${frame.asSlug(item.title)}.json`).then(res => res.json())\n    story.push({type:'paragraph', site, text:`[[${item.title}]] â€” ${item.text}`})\n    let outrefs = visit(page).map(title => ({type:'reference', title}))\n    story.push({type:'markdown',site,text:outrefs.map(ref => `- [x] [[${ref.title}]]`).join(\"\\n\")})\n    story.push({type:'frame',text:`http://ward.dojo.fed.wiki/assets/pages/story-telling/more-story.html\\nHEIGHT 60`})\n    frame.open({title,story},event.shiftKey,[site])\n  }\n\n  function visit(page) {\n    let links = []\n    const link = /\\[\\[(.*?)\\]\\]/g\n    let match\n    for (let item of page.story) {\n      if (item.type == 'reference') links.push(item.title)\n      let text = item.text\n      while (match = link.exec(text)) {\n        links.push(match[1])\n      }\n    }\n    return links\n  }\n\n</script>\n"
      },
      "date": 1643079627655
    },
    {
      "type": "edit",
      "id": "86f9e5eb41b676cd",
      "item": {
        "type": "frame",
        "id": "86f9e5eb41b676cd",
        "text": "http://ward.dojo.fed.wiki/assets/pages/story-telling/groom-garden.html\nHEIGHT 100"
      },
      "date": 1643079653243
    },
    {
      "type": "edit",
      "id": "86f9e5eb41b676cd",
      "item": {
        "type": "frame",
        "id": "86f9e5eb41b676cd",
        "text": "http://ward.dojo.fed.wiki/assets/pages/story-telling/start-garden.html\nHEIGHT 100"
      },
      "date": 1643079783851
    },
    {
      "type": "edit",
      "id": "be84fffd3b6cc105",
      "item": {
        "type": "reference",
        "id": "be84fffd3b6cc105",
        "site": "ward.dojo.fed.wiki",
        "slug": "more-telling-about-federated-wiki",
        "title": "More Telling About Federated Wiki",
        "text": "Story of 6 pages with 2789 words and 25 more links."
      },
      "date": 1643257092282
    },
    {
      "type": "edit",
      "id": "6b34c587478a1f2f",
      "item": {
        "type": "reference",
        "id": "6b34c587478a1f2f",
        "site": "ward.dojo.fed.wiki",
        "slug": "more-telling-field-guide-to-the-federation",
        "title": "More Telling Field Guide to the Federation",
        "text": "Story of 6 pages with 1241 words and 13 more links."
      },
      "date": 1643257108460
    },
    {
      "id": "a5b23f8b9607a078",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "a5b23f8b9607a078",
        "text": "Try [[Find Saved Tellings]] to be included here."
      },
      "after": "d153985bd0787c96",
      "date": 1643742496437
    },
    {
      "id": "63707798440546418688",
      "type": "add",
      "item": {
        "type": "reference",
        "site": "ward.dojo.fed.wiki",
        "slug": "more-telling-coding-portfolio",
        "title": "More Telling Coding Portfolio",
        "text": "Story of 22 pages with 4387 words and 145 more links.",
        "date": 1643691500701,
        "id": "63707798440546418688"
      },
      "after": "6b34c587478a1f2f",
      "date": 1643742532542
    },
    {
      "item": {
        "type": "factory",
        "id": "966b827581191ee9"
      },
      "id": "966b827581191ee9",
      "type": "add",
      "after": "86f9e5eb41b676cd",
      "date": 1644284448012
    },
    {
      "type": "edit",
      "id": "966b827581191ee9",
      "item": {
        "type": "reference",
        "id": "966b827581191ee9",
        "site": "ward.dojo.fed.wiki",
        "slug": "more-more-telling-field-guide-to-the-federation",
        "title": "More More Telling Field Guide to the Federation",
        "text": "Story of 17 pages with 4281 words and 46 more links."
      },
      "date": 1644284455221
    },
    {
      "id": "966b827581191ee9",
      "type": "move",
      "order": [
        "d153985bd0787c96",
        "a5b23f8b9607a078",
        "be84fffd3b6cc105",
        "6b34c587478a1f2f",
        "966b827581191ee9",
        "63707798440546418688",
        "86f9e5eb41b676cd"
      ],
      "date": 1644284458546
    },
    {
      "type": "edit",
      "id": "86f9e5eb41b676cd",
      "item": {
        "type": "frame",
        "id": "86f9e5eb41b676cd",
        "text": "http://ward.dojo.fed.wiki/assets/pages/story-telling/start-garden.html\nHEIGHT 200"
      },
      "date": 1647371636848
    },
    {
      "id": "51049004783372107776",
      "type": "add",
      "item": {
        "type": "reference",
        "site": "ward.dojo.fed.wiki",
        "slug": "more-telling-featured-sites",
        "title": "More Telling Featured Sites",
        "text": "Story of 5 pages with 1089 words and 29 more links.",
        "date": 1648485496010,
        "id": "51049004783372107776"
      },
      "after": "d153985bd0787c96",
      "date": 1648485551563
    },
    {
      "id": "a5b23f8b9607a078",
      "type": "move",
      "order": [
        "d153985bd0787c96",
        "a5b23f8b9607a078",
        "51049004783372107776",
        "be84fffd3b6cc105",
        "6b34c587478a1f2f",
        "966b827581191ee9",
        "63707798440546418688",
        "86f9e5eb41b676cd"
      ],
      "date": 1648485557366
    },
    {
      "id": "51049004783372107776",
      "type": "move",
      "order": [
        "d153985bd0787c96",
        "a5b23f8b9607a078",
        "be84fffd3b6cc105",
        "6b34c587478a1f2f",
        "51049004783372107776",
        "966b827581191ee9",
        "63707798440546418688",
        "86f9e5eb41b676cd"
      ],
      "date": 1648485568499
    },
    {
      "type": "fork",
      "site": "ward.dojo.fed.wiki",
      "date": 1651242536148
    },
    {
      "type": "fork",
      "date": 1651242537981
    },
    {
      "type": "edit",
      "id": "86f9e5eb41b676cd",
      "item": {
        "type": "frame",
        "id": "86f9e5eb41b676cd",
        "text": "https://wiki.ralfbarkow.ch/assets/pages/story-telling/start-garden.html\nHEIGHT 200"
      },
      "date": 1651242547461
    },
    {
      "item": {
        "type": "factory",
        "id": "d94576ee8f5695e0"
      },
      "id": "d94576ee8f5695e0",
      "type": "add",
      "after": "86f9e5eb41b676cd",
      "date": 1653427846804
    },
    {
      "type": "edit",
      "id": "d94576ee8f5695e0",
      "item": {
        "type": "reference",
        "id": "d94576ee8f5695e0",
        "site": "wiki.ralfbarkow.ch",
        "slug": "more-telling-about-federated-wiki",
        "title": "More Telling About Federated Wiki",
        "text": "Story of 6 pages with 2789 words and 25 more links."
      },
      "date": 1653427864426
    },
    {
      "id": "d94576ee8f5695e0",
      "type": "move",
      "order": [
        "d153985bd0787c96",
        "a5b23f8b9607a078",
        "d94576ee8f5695e0",
        "be84fffd3b6cc105",
        "6b34c587478a1f2f",
        "51049004783372107776",
        "966b827581191ee9",
        "63707798440546418688",
        "86f9e5eb41b676cd"
      ],
      "date": 1653427869586
    },
    {
      "type": "remove",
      "id": "be84fffd3b6cc105",
      "date": 1653427876318
    },
    {
      "item": {
        "type": "factory",
        "id": "0bd2c2f91c785f96"
      },
      "id": "0bd2c2f91c785f96",
      "type": "add",
      "after": "86f9e5eb41b676cd",
      "date": 1653428765857
    },
    {
      "id": "0bd2c2f91c785f96",
      "type": "move",
      "order": [
        "d153985bd0787c96",
        "a5b23f8b9607a078",
        "d94576ee8f5695e0",
        "6b34c587478a1f2f",
        "0bd2c2f91c785f96",
        "51049004783372107776",
        "966b827581191ee9",
        "63707798440546418688",
        "86f9e5eb41b676cd"
      ],
      "date": 1653428771125
    },
    {
      "type": "edit",
      "id": "0bd2c2f91c785f96",
      "item": {
        "type": "reference",
        "id": "0bd2c2f91c785f96",
        "site": "wiki.ralfbarkow.ch",
        "slug": "more-telling-field-guide-to-the-federation",
        "title": "More Telling Field Guide to the Federation",
        "text": "Story of 6 pages with 1241 words and 13 more links."
      },
      "date": 1653428775080
    },
    {
      "type": "remove",
      "id": "6b34c587478a1f2f",
      "date": 1653428779720
    }
  ]
}