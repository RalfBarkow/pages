{
  "title": "Repeater Controller",
  "story": [
    {
      "type": "paragraph",
      "id": "a097aa64ebc802c5",
      "text": "The microprocessor appeared about the same time the FCC relaxed their restrictions on automation of VHF transmitters. I wrote automatic control software for the  [[Wintek Control Module]] that would operate the new W9YB repeater.  [http://c2.com/~ward/morse/RepeaterControl source]"
    },
    {
      "type": "paragraph",
      "id": "d0887d9af09ccd75",
      "text": "I can remember struggling to find the proper organization for the many timing related requirements. I discovered the solution while traveling to Florida."
    },
    {
      "type": "paragraph",
      "id": "ba922b7c62428f70",
      "text": "I remember distinctly hanging out in the university library coding while a friend in Tallahassee worked his day job. I started exploring the 6800's software interrupt (SWI) instruction. I discovered that a handler coded up nicely."
    },
    {
      "type": "code",
      "id": "83349508ef69be25",
      "text": "* SOFTWARE INTERRUPT ENTRY\n  \nEXEC    LDX     CURTSK\n        STS     STACKS-2,X      SAVE CURRENT STACK \n        DEX \n        DEX                     ADVANCE TO NEXT\n        BNE     EXE2\nEXE1    LDX     &2*TSKCNT       START OVER\nEXE2    STX     CURTSK\n        LDS     STACKS-2,X      LOAD NEXT STACK \n        RTI \n"
    },
    {
      "type": "paragraph",
      "id": "bf7c6bd8898a27c6",
      "text": "This swaps the runtime stack with that of the next task in a fixed-sized list of stack pointers. Tasks yield to other tasks by including a SWI at convenient points in their own control flow."
    },
    {
      "type": "paragraph",
      "id": "7dafe692321d2ef0",
      "text": "For example, I wrote tasks for decoding touch-tone signals including those that would be forwarded to our campus dial-pulse phone system. The general complexity of this is hinted at by the comments around the pulse generator."
    },
    {
      "type": "html",
      "id": "6a7583bf1d34a5e7",
      "text": "<i>Task Dial-Pulser — The patch is connected according to the patch activity flag. Digits are removed from the digit queue one second after the first digit appears. If the patch is active, the connection is broken to pulse the line, otherwise the digit is ignored. Patch audio is muted during dialing and when carrier is present."
    },
    {
      "type": "paragraph",
      "id": "88f2fe171a7ed5de",
      "text": "I debugged the complete controller with help from Paul Barina. We worked at his desk at CTS Microelectronics using a scope to watch various signals. This was greatly simplified by including a reliable scope sync output every time the round-robin scheduling rolled over."
    },
    {
      "type": "code",
      "id": "981265083b32a4ff",
      "text": "        LDA A   &^00110101\n        STA A   IOAC            SCOPE SYNC\n        LDA A   &^00111101\n        STA A   IOAC"
    },
    {
      "type": "paragraph",
      "id": "e72d3d2ca07c56b5",
      "text": "I would soon be working for [[Tektronix]] and would pursue the same level of simplicity in our system prototypes."
    },
    {
      "type": "paragraph",
      "id": "284fa4692e37e4cf",
      "text": "I was especially fond of built-in testability and devised many [[Multi-Processor Debugging]] schemes that were appropriate for the technology of the day."
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "Repeater Controller"
      },
      "date": 1363019131132
    },
    {
      "item": {
        "type": "factory",
        "id": "a097aa64ebc802c5"
      },
      "id": "a097aa64ebc802c5",
      "type": "add",
      "date": 1363019138026
    },
    {
      "type": "edit",
      "id": "a097aa64ebc802c5",
      "item": {
        "type": "paragraph",
        "id": "a097aa64ebc802c5",
        "text": "The microprocessor appeared about the same time the FCC relaxed their restrictions on automation of VHF transmitters. I wrote automatic control software that would run on a [[Wince Control Module]]."
      },
      "date": 1363019541253
    },
    {
      "item": {
        "type": "paragraph",
        "id": "339e5db3cedcf350",
        "text": ""
      },
      "id": "339e5db3cedcf350",
      "type": "add",
      "after": "a097aa64ebc802c5",
      "date": 1363019541762
    },
    {
      "type": "remove",
      "id": "339e5db3cedcf350",
      "date": 1363019548128
    },
    {
      "type": "edit",
      "id": "a097aa64ebc802c5",
      "item": {
        "type": "paragraph",
        "id": "a097aa64ebc802c5",
        "text": "The microprocessor appeared about the same time the FCC relaxed their restrictions on automation of VHF transmitters. I wrote automatic control software for the  [[Wince Control Module]] that would operate the new W9YB repeater."
      },
      "date": 1363019597057
    },
    {
      "item": {
        "type": "factory",
        "id": "d0887d9af09ccd75"
      },
      "id": "d0887d9af09ccd75",
      "type": "add",
      "after": "a097aa64ebc802c5",
      "date": 1363019602362
    },
    {
      "type": "edit",
      "id": "d0887d9af09ccd75",
      "item": {
        "type": "paragraph",
        "id": "d0887d9af09ccd75",
        "text": "I can remember struggling to find the proper organization for the many timing related requirements. I discovered the solution while traveling to Florida."
      },
      "date": 1363019777620
    },
    {
      "item": {
        "type": "paragraph",
        "id": "ba922b7c62428f70",
        "text": "I hung out in the university library coding while a friend in Orlando worked his day job."
      },
      "id": "ba922b7c62428f70",
      "type": "add",
      "after": "d0887d9af09ccd75",
      "date": 1363019778125
    },
    {
      "type": "edit",
      "id": "ba922b7c62428f70",
      "item": {
        "type": "paragraph",
        "id": "ba922b7c62428f70",
        "text": "I remember distinctly hanging out in the university library coding while a friend in Orlando worked his day job. I started exploring the 6800's software interrupt (SWI) instruction. I discovered that a handler coded up nicely."
      },
      "date": 1363019871802
    },
    {
      "item": {
        "type": "factory",
        "id": "83349508ef69be25"
      },
      "id": "83349508ef69be25",
      "type": "add",
      "after": "ba922b7c62428f70",
      "date": 1363019874070
    },
    {
      "type": "edit",
      "id": "83349508ef69be25",
      "item": {
        "type": "code",
        "id": "83349508ef69be25",
        "text": "* SOFTWARE INTERRUPT ENTRY\n  \nEXEC    LDX     CURTSK\n        STS     STACKS-2,X      SAVE CURRENT TASK'S STACK \n        DEX \n        DEX                     ADVANCE TO NEXT TASK\n        BNE     EXE2\nEXE1    LDX     &2*TSKCNT       START OVER WITH FIRST TASK\n        CLR     WATCH           RESET WATCH DOG EVERY MAJOR CYCLE \n        LDA A   &^00110101\n        STA A   IOAC            SCOPE SYNC\n        LDA A   &^00111101\n        STA A   IOAC\nEXE2    STX     CURTSK\n        LDS     STACKS-2,X      LOAD NEXT TASKS STACK \n        RTI \n"
      },
      "date": 1363019882705
    },
    {
      "type": "edit",
      "id": "83349508ef69be25",
      "item": {
        "type": "code",
        "id": "83349508ef69be25",
        "text": "* SOFTWARE INTERRUPT ENTRY\n  \nEXEC    LDX     CURTSK\n        STS     STACKS-2,X      SAVE CURRENT TASKS STACK \n        DEX \n        DEX                     ADVANCE TO NEXT TASK\n        BNE     EXE2\nEXE1    LDX     &2*TSKCNT       START OVER WITH FIRST TASK\n        CLR     WATCH           RESET WATCH DOG EVERY MAJOR CYCLE \nEXE2    STX     CURTSK\n        LDS     STACKS-2,X      LOAD NEXT TASKS STACK \n        RTI \n"
      },
      "date": 1363019923102
    },
    {
      "type": "edit",
      "id": "83349508ef69be25",
      "item": {
        "type": "code",
        "id": "83349508ef69be25",
        "text": "* SOFTWARE INTERRUPT ENTRY\n  \nEXEC    LDX     CURTSK\n        STS     STACKS-2,X      SAVE CURRENT TASKS STACK \n        DEX \n        DEX                     ADVANCE TO NEXT TASK\n        BNE     EXE2\nEXE1    LDX     &2*TSKCNT       START OVER\nEXE2    STX     CURTSK\n        LDS     STACKS-2,X      LOAD NEXT TASKS STACK \n        RTI \n"
      },
      "date": 1363019954534
    },
    {
      "item": {
        "type": "factory",
        "id": "981265083b32a4ff"
      },
      "id": "981265083b32a4ff",
      "type": "add",
      "after": "83349508ef69be25",
      "date": 1363019999924
    },
    {
      "type": "edit",
      "id": "981265083b32a4ff",
      "item": {
        "type": "code",
        "id": "981265083b32a4ff",
        "text": "        LDA A   &^00110101\n        STA A   IOAC            SCOPE SYNC\n        LDA A   &^00111101\n        STA A   IOAC"
      },
      "date": 1363020033247
    },
    {
      "item": {
        "type": "factory",
        "id": "bf7c6bd8898a27c6"
      },
      "id": "bf7c6bd8898a27c6",
      "type": "add",
      "after": "981265083b32a4ff",
      "date": 1363020070917
    },
    {
      "type": "edit",
      "id": "bf7c6bd8898a27c6",
      "item": {
        "type": "paragraph",
        "id": "bf7c6bd8898a27c6",
        "text": "This swaps the runtime stack with that of the next task in a fixed-sized list of stack pointers. Tasks yield to other tasks by including a SWI at convenient points in their own control flow."
      },
      "date": 1363020272138
    },
    {
      "type": "move",
      "order": [
        "a097aa64ebc802c5",
        "d0887d9af09ccd75",
        "ba922b7c62428f70",
        "83349508ef69be25",
        "bf7c6bd8898a27c6",
        "981265083b32a4ff"
      ],
      "id": "bf7c6bd8898a27c6",
      "date": 1363020275983
    },
    {
      "item": {
        "type": "paragraph",
        "id": "c7a5ea14c8211e78",
        "text": ""
      },
      "id": "c7a5ea14c8211e78",
      "type": "add",
      "after": "bf7c6bd8898a27c6",
      "date": 1363020280230
    },
    {
      "type": "edit",
      "id": "c7a5ea14c8211e78",
      "item": {
        "type": "paragraph",
        "id": "c7a5ea14c8211e78",
        "text": "I've edited this slightly to improve readability. "
      },
      "date": 1363020314668
    },
    {
      "type": "edit",
      "id": "c7a5ea14c8211e78",
      "item": {
        "type": "paragraph",
        "id": "c7a5ea14c8211e78",
        "text": "I've edited this slightly to improve readability. The original code is available online. [http://c2.com/~ward/morse/RepeaterControl source]"
      },
      "date": 1363020365293
    },
    {
      "item": {
        "type": "paragraph",
        "id": "88f2fe171a7ed5de",
        "text": ""
      },
      "id": "88f2fe171a7ed5de",
      "type": "add",
      "after": "c7a5ea14c8211e78",
      "date": 1363020374127
    },
    {
      "type": "edit",
      "id": "88f2fe171a7ed5de",
      "item": {
        "type": "paragraph",
        "id": "88f2fe171a7ed5de",
        "text": "I debugged the complete controller with help from Paul Barina. We worked at his desk at CTS Microelectronics using a scope to watch various signals. This was greatly simplified by including a reliable scope sync output every time the round-robin scheduling rolled over."
      },
      "date": 1363020635886
    },
    {
      "type": "edit",
      "id": "83349508ef69be25",
      "item": {
        "type": "code",
        "id": "83349508ef69be25",
        "text": "* SOFTWARE INTERRUPT ENTRY\n  \nEXEC    LDX     CURTSK\n        STS     STACKS-2,X      SAVE CURRENT STACK \n        DEX \n        DEX                     ADVANCE TO NEXT TASK\n        BNE     EXE2\nEXE1    LDX     &2*TSKCNT       START OVER\nEXE2    STX     CURTSK\n        LDS     STACKS-2,X      LOAD NEXT STACK \n        RTI \n"
      },
      "date": 1363020651569
    },
    {
      "type": "edit",
      "id": "83349508ef69be25",
      "item": {
        "type": "code",
        "id": "83349508ef69be25",
        "text": "* SOFTWARE INTERRUPT ENTRY\n  \nEXEC    LDX     CURTSK\n        STS     STACKS-2,X      SAVE CURRENT STACK \n        DEX \n        DEX                     ADVANCE TO NEXT\n        BNE     EXE2\nEXE1    LDX     &2*TSKCNT       START OVER\nEXE2    STX     CURTSK\n        LDS     STACKS-2,X      LOAD NEXT STACK \n        RTI \n"
      },
      "date": 1363020662557
    },
    {
      "item": {
        "type": "factory",
        "id": "e72d3d2ca07c56b5"
      },
      "id": "e72d3d2ca07c56b5",
      "type": "add",
      "after": "981265083b32a4ff",
      "date": 1363020756552
    },
    {
      "type": "edit",
      "id": "e72d3d2ca07c56b5",
      "item": {
        "type": "paragraph",
        "id": "e72d3d2ca07c56b5",
        "text": "I would soon be working for [[Tektronix]] and would pursue the same level of simplicity in the [[Multi-Processor Debugging]] work I did for them. "
      },
      "date": 1363020828076
    },
    {
      "type": "edit",
      "id": "e72d3d2ca07c56b5",
      "item": {
        "type": "paragraph",
        "id": "e72d3d2ca07c56b5",
        "text": "I would soon be working for [[Tektronix]] and would pursue the same level of simplicity in all of the system prototypes we built."
      },
      "date": 1363020941304
    },
    {
      "item": {
        "type": "paragraph",
        "id": "284fa4692e37e4cf",
        "text": " [[Multi-Processor Debugging]] work I did for them. "
      },
      "id": "284fa4692e37e4cf",
      "type": "add",
      "after": "e72d3d2ca07c56b5",
      "date": 1363020941810
    },
    {
      "type": "edit",
      "id": "284fa4692e37e4cf",
      "item": {
        "type": "paragraph",
        "id": "284fa4692e37e4cf",
        "text": "I was especially fond of built-in testability and devised many [[Multi-Processor Debugging]] schemes that were appropriate for the technology of the day."
      },
      "date": 1363021017783
    },
    {
      "type": "edit",
      "id": "e72d3d2ca07c56b5",
      "item": {
        "type": "paragraph",
        "id": "e72d3d2ca07c56b5",
        "text": "I would soon be working for [[Tektronix]] and would pursue the same level of simplicity in our system prototypes."
      },
      "date": 1363021044408
    },
    {
      "type": "edit",
      "id": "a097aa64ebc802c5",
      "item": {
        "type": "paragraph",
        "id": "a097aa64ebc802c5",
        "text": "The microprocessor appeared about the same time the FCC relaxed their restrictions on automation of VHF transmitters. I wrote automatic control software for the  [[Wintek Control Module]] that would operate the new W9YB repeater."
      },
      "date": 1363021112168
    },
    {
      "type": "edit",
      "id": "c7a5ea14c8211e78",
      "item": {
        "type": "paragraph",
        "id": "c7a5ea14c8211e78",
        "text": "I've edited this slightly to improve readability."
      },
      "date": 1363021167003
    },
    {
      "type": "edit",
      "id": "a097aa64ebc802c5",
      "item": {
        "type": "paragraph",
        "id": "a097aa64ebc802c5",
        "text": "The microprocessor appeared about the same time the FCC relaxed their restrictions on automation of VHF transmitters. I wrote automatic control software for the  [[Wintek Control Module]] that would operate the new W9YB repeater.  [http://c2.com/~ward/morse/RepeaterControl source]"
      },
      "date": 1363021203089
    },
    {
      "type": "remove",
      "id": "c7a5ea14c8211e78",
      "date": 1363021248986
    },
    {
      "item": {
        "type": "paragraph",
        "id": "7dafe692321d2ef0",
        "text": ""
      },
      "id": "7dafe692321d2ef0",
      "type": "add",
      "after": "bf7c6bd8898a27c6",
      "date": 1363021684871
    },
    {
      "type": "edit",
      "id": "7dafe692321d2ef0",
      "item": {
        "type": "paragraph",
        "id": "7dafe692321d2ef0",
        "text": "I wrote tasks for decoding touch-tone signals including those that would be forwarded to our campus dial-pulse phone system. The general complexity of this is hinted at by the comments around the pulse generator."
      },
      "date": 1363021855323
    },
    {
      "item": {
        "type": "paragraph",
        "id": "6a7583bf1d34a5e7",
        "text": "Task dial-pulser The patch is connected according to the patch activity flag. Digits are removed from the digit queue 1 second after the first digit appears. If the patch is active, the connection is broken to pulse the line, otherwise the digit is ignored. Patch audio is muted during dialing and when carrier is present."
      },
      "id": "6a7583bf1d34a5e7",
      "type": "add",
      "after": "7dafe692321d2ef0",
      "date": 1363021855834
    },
    {
      "type": "edit",
      "id": "6a7583bf1d34a5e7",
      "item": {
        "type": "paragraph",
        "id": "6a7583bf1d34a5e7",
        "text": "Task dial-pulser — The patch is connected according to the patch activity flag. Digits are removed from the digit queue 1 second after the first digit appears. If the patch is active, the connection is broken to pulse the line, otherwise the digit is ignored. Patch audio is muted during dialing and when carrier is present."
      },
      "date": 1363021893904
    },
    {
      "type": "edit",
      "id": "6a7583bf1d34a5e7",
      "item": {
        "type": "paragraph",
        "id": "6a7583bf1d34a5e7",
        "text": "<i>Task dial-pulser — The patch is connected according to the patch activity flag. Digits are removed from the digit queue 1 second after the first digit appears. If the patch is active, the connection is broken to pulse the line, otherwise the digit is ignored. Patch audio is muted during dialing and when carrier is present."
      },
      "date": 1363021905235
    },
    {
      "type": "edit",
      "id": "6a7583bf1d34a5e7",
      "item": {
        "type": "paragraph",
        "id": "6a7583bf1d34a5e7",
        "text": "<i>Task dial-pulser — The patch is connected according to the patch activity flag. Digits are removed from the digit queue one second after the first digit appears. If the patch is active, the connection is broken to pulse the line, otherwise the digit is ignored. Patch audio is muted during dialing and when carrier is present."
      },
      "date": 1363021932087
    },
    {
      "type": "edit",
      "id": "7dafe692321d2ef0",
      "item": {
        "type": "paragraph",
        "id": "7dafe692321d2ef0",
        "text": "For example, I wrote tasks for decoding touch-tone signals including those that would be forwarded to our campus dial-pulse phone system. The general complexity of this is hinted at by the comments around the pulse generator."
      },
      "date": 1363023013258
    },
    {
      "type": "edit",
      "id": "6a7583bf1d34a5e7",
      "item": {
        "type": "paragraph",
        "id": "6a7583bf1d34a5e7",
        "text": "<i>Task Dial-Pulser — The patch is connected according to the patch activity flag. Digits are removed from the digit queue one second after the first digit appears. If the patch is active, the connection is broken to pulse the line, otherwise the digit is ignored. Patch audio is muted during dialing and when carrier is present."
      },
      "date": 1363023481148
    },
    {
      "type": "edit",
      "id": "6a7583bf1d34a5e7",
      "item": {
        "type": "html",
        "id": "6a7583bf1d34a5e7",
        "text": "<i>Task Dial-Pulser — The patch is connected according to the patch activity flag. Digits are removed from the digit queue one second after the first digit appears. If the patch is active, the connection is broken to pulse the line, otherwise the digit is ignored. Patch audio is muted during dialing and when carrier is present."
      },
      "date": 1421017031249
    },
    {
      "type": "edit",
      "id": "ba922b7c62428f70",
      "item": {
        "type": "paragraph",
        "id": "ba922b7c62428f70",
        "text": "I remember distinctly hanging out in the university library coding while a friend in Tallahassee worked his day job. I started exploring the 6800's software interrupt (SWI) instruction. I discovered that a handler coded up nicely."
      },
      "date": 1640557919698
    },
    {
      "type": "fork",
      "site": "code.fed.wiki.org",
      "date": 1676864943794
    }
  ]
}