{
  "title": "Count Matches and Mismatches",
  "story": [
    {
      "type": "paragraph",
      "id": "eb20850bc4845640",
      "text": "A growing organization behaves much like any other living thing as a bundle of metabolic processes that work well enough to sustain it day to day. We can sample these processes but we can't expect to know them completely."
    },
    {
      "type": "paragraph",
      "id": "383ad12fac4c7d0e",
      "text": "As observers we will select an area of interest, focus our attention on processes present, assess the clarity of view, and pass judgement upon what we find."
    },
    {
      "type": "paragraph",
      "id": "e67444362fb893f6",
      "text": "Ultimately our judgements will lead to actions in the best interest of the organization. But before then we must become competent observers."
    },
    {
      "type": "paragraph",
      "id": "520c485621a171ab",
      "text": "Say we want to understand service ownership."
    },
    {
      "type": "paragraph",
      "id": "5744d28c55072f41",
      "text": "How many services do we have?"
    },
    {
      "type": "code",
      "id": "1e47844fe75e49f2",
      "text": "match (s:SERVICE)\nreturn count(s)"
    },
    {
      "type": "paragraph",
      "id": "e6e5a6e8f5610e5d",
      "text": "How many services do each team own?"
    },
    {
      "type": "code",
      "id": "3e03f8d2e0f5211c",
      "text": "match (s:SERVICE)<-[:OWNS]-(t:TEAM)\nreturn t.team, count(s)"
    },
    {
      "type": "paragraph",
      "id": "d19bbf0a81f9804a",
      "text": "How many services don't have owners?"
    },
    {
      "type": "code",
      "id": "f99493c482c89787",
      "text": "match (s:SERVICE)\nwhere not (s)<-[:OWNS]-(x)\nreturn count(s)"
    },
    {
      "type": "paragraph",
      "id": "c34533ddd6419210",
      "text": "How important are the services, owned or otherwise?"
    },
    {
      "type": "code",
      "id": "b00531d178366709",
      "text": "match (s:SERVICE)\noptional match (s)<-[:OWNS]-(t:TEAM)\noptional match (s)-[:DEPENDS]->(u:SERVICE)\noptional match (s)<-[:DEPENDS]-(d:SERVICE)\nreturn\n  s.name as service,\n  t.name as team,\n  count(u) as upstream,\n  count(d) as downstream\norder by downstream desc"
    },
    {
      "type": "paragraph",
      "id": "7627a670f4a0683e",
      "text": "We're using dependents as a measure of importance. We can look further up and down the dependency tree with a hop-count annotation on the relation."
    },
    {
      "type": "code",
      "id": "af145c043b3138e5",
      "text": "optional match (s)<-[:DEPENDS*1..3]-(d:SERVICE)"
    },
    {
      "type": "paragraph",
      "id": "84149026763821da",
      "text": "This will lead to questions like, why does one service have so many more dependencies, or, why do so many services have no dependencies?"
    },
    {
      "type": "paragraph",
      "id": "aa371049abdf6b09",
      "text": "But the better question is, why do a few services with many dependencies not have a clearly recorded owner? Did we fail to make a match? Did someone fail to register as owner? Maybe a reorganization is in progress or dropped something in the last reorg?"
    },
    {
      "type": "paragraph",
      "id": "3e97f93b8917b86b",
      "text": "These are all good questions to answer before some service stops working."
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "Count Matches and Mismatches",
        "story": []
      },
      "date": 1508606000611
    },
    {
      "item": {
        "type": "factory",
        "id": "eb20850bc4845640"
      },
      "id": "eb20850bc4845640",
      "type": "add",
      "date": 1508606144399
    },
    {
      "type": "edit",
      "id": "eb20850bc4845640",
      "item": {
        "type": "paragraph",
        "id": "eb20850bc4845640",
        "text": "A growing organization behaves much like any other living thing as a bundle of metabolic processes that work well enough to sustain it day to day. We can sample these processes but we can't expect to know them completely."
      },
      "date": 1508606358329
    },
    {
      "type": "add",
      "id": "383ad12fac4c7d0e",
      "item": {
        "type": "paragraph",
        "id": "383ad12fac4c7d0e",
        "text": "As observers we will select an area of interest, focus our attention on processes present, assess the clarity of view, and pass judgement upon what we find."
      },
      "after": "eb20850bc4845640",
      "date": 1508606923854
    },
    {
      "type": "add",
      "id": "e67444362fb893f6",
      "item": {
        "type": "paragraph",
        "id": "e67444362fb893f6",
        "text": "Ultimately our judgements will lead to actions in the best interest of the organization. But before then we must become competent observers."
      },
      "after": "383ad12fac4c7d0e",
      "date": 1508607019656
    },
    {
      "type": "add",
      "id": "520c485621a171ab",
      "item": {
        "type": "paragraph",
        "id": "520c485621a171ab",
        "text": "Say we want to understand service ownership."
      },
      "after": "e67444362fb893f6",
      "date": 1508607293268
    },
    {
      "type": "add",
      "id": "5744d28c55072f41",
      "item": {
        "type": "paragraph",
        "id": "5744d28c55072f41",
        "text": "How many services do we have?"
      },
      "after": "520c485621a171ab",
      "date": 1508607308369
    },
    {
      "item": {
        "type": "factory",
        "id": "1e47844fe75e49f2"
      },
      "id": "1e47844fe75e49f2",
      "type": "add",
      "after": "5744d28c55072f41",
      "date": 1508607312715
    },
    {
      "type": "edit",
      "id": "1e47844fe75e49f2",
      "item": {
        "type": "code",
        "id": "1e47844fe75e49f2",
        "text": "match (s:SERVICE)\nreturn count(s)"
      },
      "date": 1508607337992
    },
    {
      "item": {
        "type": "factory",
        "id": "e6e5a6e8f5610e5d"
      },
      "id": "e6e5a6e8f5610e5d",
      "type": "add",
      "after": "1e47844fe75e49f2",
      "date": 1508607388396
    },
    {
      "type": "edit",
      "id": "e6e5a6e8f5610e5d",
      "item": {
        "type": "paragraph",
        "id": "e6e5a6e8f5610e5d",
        "text": "How many service do each team own?"
      },
      "date": 1508607420397
    },
    {
      "item": {
        "type": "factory",
        "id": "3e03f8d2e0f5211c"
      },
      "id": "3e03f8d2e0f5211c",
      "type": "add",
      "after": "e6e5a6e8f5610e5d",
      "date": 1508607423107
    },
    {
      "type": "edit",
      "id": "3e03f8d2e0f5211c",
      "item": {
        "type": "code",
        "id": "3e03f8d2e0f5211c",
        "text": "match (s:SERVICE)<-[:OWNS]-(t:TEAM)\nreturn t.team, count(s)"
      },
      "date": 1508607494412
    },
    {
      "item": {
        "type": "factory",
        "id": "d19bbf0a81f9804a"
      },
      "id": "d19bbf0a81f9804a",
      "type": "add",
      "after": "3e03f8d2e0f5211c",
      "date": 1508607517566
    },
    {
      "type": "edit",
      "id": "d19bbf0a81f9804a",
      "item": {
        "type": "paragraph",
        "id": "d19bbf0a81f9804a",
        "text": "How many services don't have owners?"
      },
      "date": 1508607541564
    },
    {
      "item": {
        "type": "factory",
        "id": "c1eeac1749b0fed7"
      },
      "id": "c1eeac1749b0fed7",
      "type": "add",
      "after": "d19bbf0a81f9804a",
      "date": 1508607543911
    },
    {
      "type": "edit",
      "id": "c1eeac1749b0fed7",
      "item": {
        "type": "paragraph",
        "id": "c1eeac1749b0fed7",
        "text": "match (s:SERVICE)<-[:OWNS]-(x)"
      },
      "date": 1508607586736
    },
    {
      "type": "remove",
      "id": "c1eeac1749b0fed7",
      "date": 1508607594935
    },
    {
      "item": {
        "type": "factory",
        "id": "f99493c482c89787"
      },
      "id": "f99493c482c89787",
      "type": "add",
      "after": "d19bbf0a81f9804a",
      "date": 1508607596705
    },
    {
      "type": "edit",
      "id": "f99493c482c89787",
      "item": {
        "type": "code",
        "id": "f99493c482c89787",
        "text": "match (s:SERVICE)\nwhere not (s)<-[:OWNS]-(x)"
      },
      "date": 1508607649131
    },
    {
      "type": "edit",
      "id": "f99493c482c89787",
      "item": {
        "type": "code",
        "id": "f99493c482c89787",
        "text": "match (s:SERVICE)\nwhere not (s)<-[:OWNS]-(x)\nreturn count(s)"
      },
      "date": 1508607671591
    },
    {
      "type": "edit",
      "id": "e6e5a6e8f5610e5d",
      "item": {
        "type": "paragraph",
        "id": "e6e5a6e8f5610e5d",
        "text": "How many services do each team own?"
      },
      "date": 1508607684869
    },
    {
      "item": {
        "type": "factory",
        "id": "c34533ddd6419210"
      },
      "id": "c34533ddd6419210",
      "type": "add",
      "after": "f99493c482c89787",
      "date": 1508607762230
    },
    {
      "type": "edit",
      "id": "c34533ddd6419210",
      "item": {
        "type": "paragraph",
        "id": "c34533ddd6419210",
        "text": "How important are the services, owned or otherwise?"
      },
      "date": 1508607791201
    },
    {
      "item": {
        "type": "factory",
        "id": "b00531d178366709"
      },
      "id": "b00531d178366709",
      "type": "add",
      "after": "c34533ddd6419210",
      "date": 1508607793789
    },
    {
      "type": "edit",
      "id": "b00531d178366709",
      "item": {
        "type": "code",
        "id": "b00531d178366709",
        "text": "match (s:SERVICE)\noptional match (s)<-[:OWNS]-(t:TEAM)\noptional match (s)-[:DEPENDS]->(u:SERVICE)\noptional match (s)<-[:DEPENDS]-(d:SERVICE)\nreturn\n  s.name as service,\n  t.name as team,\n  count(u) as upstream,\n  count(d) as downstream\norder by downstream desc"
      },
      "date": 1508608100611
    },
    {
      "item": {
        "type": "factory",
        "id": "7627a670f4a0683e"
      },
      "id": "7627a670f4a0683e",
      "type": "add",
      "after": "b00531d178366709",
      "date": 1508608162524
    },
    {
      "type": "edit",
      "id": "7627a670f4a0683e",
      "item": {
        "type": "paragraph",
        "id": "7627a670f4a0683e",
        "text": "We're using dependents as a measure of importance. We can look further up and down the dependency tree with a depth annotation on the DEPENDS relation."
      },
      "date": 1508608275250
    },
    {
      "item": {
        "type": "factory",
        "id": "af145c043b3138e5"
      },
      "id": "af145c043b3138e5",
      "type": "add",
      "after": "7627a670f4a0683e",
      "date": 1508608279925
    },
    {
      "type": "edit",
      "id": "af145c043b3138e5",
      "item": {
        "type": "code",
        "id": "af145c043b3138e5",
        "text": "optional match (s)<-[:DEPENDS*1..3]-(d:SERVICE)"
      },
      "date": 1508608361546
    },
    {
      "type": "edit",
      "id": "7627a670f4a0683e",
      "item": {
        "type": "paragraph",
        "id": "7627a670f4a0683e",
        "text": "We're using dependents as a measure of importance. We can look further up and down the dependency tree with a hop-count annotation on the DEPENDS relation."
      },
      "date": 1508608548442
    },
    {
      "type": "edit",
      "id": "7627a670f4a0683e",
      "item": {
        "type": "paragraph",
        "id": "7627a670f4a0683e",
        "text": "We're using dependents as a measure of importance. We can look further up and down the dependency tree with a hop-count annotation on the relation."
      },
      "date": 1508608570512
    },
    {
      "item": {
        "type": "factory",
        "id": "84149026763821da"
      },
      "id": "84149026763821da",
      "type": "add",
      "after": "af145c043b3138e5",
      "date": 1508608732201
    },
    {
      "type": "edit",
      "id": "84149026763821da",
      "item": {
        "type": "paragraph",
        "id": "84149026763821da",
        "text": "This will lead to questions like, why does one service have so many more dependencies, or, why do so many services have no dependencies."
      },
      "date": 1508608805019
    },
    {
      "type": "edit",
      "id": "84149026763821da",
      "item": {
        "type": "paragraph",
        "id": "84149026763821da",
        "text": "This will lead to questions like, why does one service have so many more dependencies, or, why do so many services have no dependencies?"
      },
      "date": 1508608844104
    },
    {
      "type": "add",
      "id": "aa371049abdf6b09",
      "item": {
        "type": "paragraph",
        "id": "aa371049abdf6b09",
        "text": "But the better question is, why do a few services with many dependencies not have a clearly recorded owner? Did we fail to make a match? Did someone fail to register as owner? Maybe a reorganization is in progress or dropped something in the last reorg?"
      },
      "after": "84149026763821da",
      "date": 1508609155202
    },
    {
      "type": "add",
      "id": "3e97f93b8917b86b",
      "item": {
        "type": "paragraph",
        "id": "3e97f93b8917b86b",
        "text": "These are all good questions to answer before some service stops working."
      },
      "after": "aa371049abdf6b09",
      "date": 1508609207395
    },
    {
      "type": "fork",
      "site": "ddd.ward.wiki.org",
      "date": 1627974155345
    }
  ]
}