{
  "title": "Lua Language",
  "story": [
    {
      "type": "html",
      "text": "[http://www.lua.org www.lua.org]  is the official homepage, and contains a good overview.",
      "id": "27e186d9e5e4f668f0ef606fccb2bb05"
    },
    {
      "type": "html",
      "text": "\nSee also lua-users wiki: [http://lua-users.org/wiki/ lua-users.org] and the tutorial [http://lua-users.org/wiki/TutorialDirectory lua-users.org].",
      "id": "d16bbc8b9dab7e126a0269204aa64057"
    },
    {
      "type": "html",
      "text": "\nI like Lua for the same reason I like Wiki: it's clean, simple, and light. The authors had a pure vision and <i>left out</i> the right things. Lua is the best extension language I've seen. It has a simple [[Cee Language]] [[Application Programming Interface]], and a simple build process, and simple mechanisms for moving data in and out of the scripting subsystem. I was able to extend my application with Lua in the first day of use. -- [[Ashley Fryer]]",
      "id": "db1754a90b5afde1e5474501f6eeab86"
    },
    {
      "type": "html",
      "text": "\nLua 5 is built on a [[Non Recursive Interpreter]], which allows it to directly support [[Co Routine]]s.",
      "id": "40340d784c22050e1c57fbc8c4ee3180"
    },
    {
      "type": "html",
      "text": "\nLua seems to have found a major killer application in game UI modification. World of Warcraft is the premier example, with a public-facing API for rewriting the interface. Rift, Age of Conan, Lord of the Rings Online, Warhammer Online, Runes of Magic and probably others have followed suit in recent years. Minecraft has an add-on, Computercraft, that allows you to write Lua scripts that interact with the Minecraft virtual world.",
      "id": "738e82270128f38d955438082c7042e6"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "456331ce048ebe2793fdc74d6a510fe4"
    },
    {
      "type": "html",
      "text": "[[Simplified Wrapper And Interface Generator]] (SWIG) can be used to make calls to [[Cee Language]] or [[Cee Plus Plus]] code.",
      "id": "165261900cec807a3a23c5abea11244e"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "456331ce048ebe2793fdc74d6a510fe4"
    },
    {
      "type": "html",
      "text": "\nLua also have a [[Just In Time]] [[Virtual Machine]]: [http://www.luajit.org www.luajit.org] (LuaJIT2 is very fast!)",
      "id": "b5f873e8bfb9e2f7636c37e43d352e14"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "456331ce048ebe2793fdc74d6a510fe4"
    },
    {
      "type": "html",
      "text": "Lua 5.2",
      "id": "6edc464b304849a40b8aaedf93dcc951"
    },
    {
      "type": "html",
      "text": "\nLua 5.2 is (as in Nov 2011) in beta. This release will add (quoting the manual) yieldable pcall and metamethods, new lexical scheme for globals, ephemeron tables, new library for bitwise operations, light C functions, emergency garbage collector, goto statement, and finalizers for tables.",
      "id": "aeaba67516f850b5a3997f75937ea165"
    },
    {
      "type": "html",
      "text": "<i>As of June 2012, Lua 5.2.1 is the current most stable release. Now that setfenv is gone, a lot of people are feeling empty inside, but the capabilities provided by _ENV are intriguing. They do pretty much everything setfenv did, except they lie closer to the code in the language, as opposed to being outsourced to a magic function. Not that Lua didn't work perfectly fine with magic function boxes that flip things about in amusing ways, but now that environments are controlled via a lexically scopable variable, you can make some amusing constructions, provided you know what you're doing... Perhaps that was the goal all along: to make sure we knew what we were doing when we referred to our magic environment-changing box.</i>",
      "id": "160e02b81e40d1baefefa4460511d9fd"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "456331ce048ebe2793fdc74d6a510fe4"
    },
    {
      "type": "html",
      "text": "\nLua 5.1",
      "id": "4ebff735fcd67ce0d9cac9d308df6719"
    },
    {
      "type": "html",
      "text": "\nLua 5.1 was released in 2006 and it is the current stable language version. Quoting the release text, it adds \"a new module system, incremental garbage collection, new mechanism for varargs, new syntax for long strings and comments, mod and length operators, metatables for all types, new configuration scheme via luaconf.h, and a fully reentrant parser\".",
      "id": "81ca428e11a1f851211b9267bb5a07d8"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "456331ce048ebe2793fdc74d6a510fe4"
    },
    {
      "type": "html",
      "text": "\nLua 5.0",
      "id": "402f7c3530fd6010f753d3753bc2022d"
    },
    {
      "type": "html",
      "text": "\nLua 5.0 was released on 11 Apr 2003. The main new features in Lua 5.0 are collaborative multithreading via Lua coroutines, full [[Lexical Scoping]] instead of upvalues, and metatables instead of tags and tag methods. Lua 5.0 also introduces booleans, [[Proper Tail Call]]s, and weak tables. Other features are better support for packages, new API for loading Lua chunks, new error handling protocol, better error messages, and much more. Lua 5.0 is the first version to be released under the new license.",
      "id": "945bb18e6a82b75bf8b56f15b13db52c"
    },
    {
      "type": "html",
      "text": "\nWith Version 5.0, Lua now uses a register-based instead of stack-based [[Virtual Machine]].",
      "id": "747f82b3f927f0674d03acaa6e5c55aa"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "456331ce048ebe2793fdc74d6a510fe4"
    },
    {
      "type": "html",
      "text": "\nFollowing are official announcements about the 4.0 alpha and beta of Lua, sent in the Lua mailing list. I've rearranged them in reverse chronological order.",
      "id": "ab2c45da61ffd8d4d716776ed432d57a"
    },
    {
      "type": "html",
      "text": "\nI'm happy with the usual direction the Lua authors have taken the language in the 4.0 beta - they made it even smaller and faster than before. But the new C API is going to be a problem. I and others where I work invested a significant effort in extending Lua for our application, and now all that code will have to be revisited. It's too bad they couldn't come up with some sort of compatibility macros to make the transition easier, but it just wasn't possible with these changes.",
      "id": "fb0e6be0a096569883220ad405d7ede1"
    },
    {
      "type": "html",
      "text": "\nOh well, such is progress...",
      "id": "46456a82f160a7d28bbd1b1bca91b872"
    },
    {
      "type": "html",
      "text": "-- [[John Passaniti]]",
      "id": "61cf7fda04b66ee2c710bd70cd032a9c"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "456331ce048ebe2793fdc74d6a510fe4"
    },
    {
      "type": "html",
      "text": "\nLua 4.0 (beta) is now available for downloading at",
      "id": "4cde03c77ae3a8e80d1601eb2e50fe6d"
    },
    {
      "type": "html",
      "text": " [http://www.tecgraf.puc-rio.br/lua/ftp/lua-4.0-beta.tar.gz www.tecgraf.puc-rio.br]",
      "id": "4cac246a4189e961f39c4d698b784b97"
    },
    {
      "type": "html",
      "text": " ftp://ftp.tecgraf.puc-rio.br/lua/lua-4.0-beta.tar.gz",
      "id": "f2b98cd13cdfa77942311eb1bd1e1848"
    },
    {
      "type": "html",
      "text": " [http://csg.uwaterloo.ca/lua/ftp/lua-4.0-beta.tar.gz csg.uwaterloo.ca]",
      "id": "27e7183850786e7df3061ab7e696d1c2"
    },
    {
      "type": "html",
      "text": " ftp://csg.uwaterloo.ca/pub/lhf/lua/lua.tar.gz",
      "id": "ad9161237221000e5ec8d2f9c5448edc"
    },
    {
      "type": "html",
      "text": "\nThe other mirrors will be updated soon, hopefully.",
      "id": "f6b095c65996402524ccc900fb977957"
    },
    {
      "type": "html",
      "text": "\nThe distribution includes an updated reference manual in HTML.\nThe [[Post Script]] and PDF versions in the site are still for version 3.2.",
      "id": "57780cebd8a073d276ba26255be166a2"
    },
    {
      "type": "html",
      "text": "\nNew in version 4.0 (beta)",
      "id": "9ffe97bf32ee3f61fb6951804149e25e"
    },
    {
      "type": "html",
      "text": " new API:<br>fully re-entrant, simpler, and more efficient.",
      "id": "6923fe663bd85f6cbfe8a42ee49d54fd"
    },
    {
      "type": "html",
      "text": " new \"break\" and \"for\" statements (both numerical and for tables).",
      "id": "9b7b852bc89c7f9217f4ca0c2040a25c"
    },
    {
      "type": "html",
      "text": " cleaner virtual machine -- at least 20% faster.",
      "id": "d56e9ecd21c18533d9aa8f719643b6c3"
    },
    {
      "type": "html",
      "text": " uniform treatment of globals:<br>globals are now stored in a Lua table.",
      "id": "5bb84ce8d3d2252ff202ffb560423f4b"
    },
    {
      "type": "html",
      "text": " improved error messages.",
      "id": "0cbfb02b22a86e4ac79799dd663b7543"
    },
    {
      "type": "html",
      "text": " no more '$debug':<br>full speed *and* full debug information.",
      "id": "7a59cb5f66bd9e2f93d52bc99d9d5329"
    },
    {
      "type": "html",
      "text": " reduced memory usage.",
      "id": "463ca1e680b6aec157819b6637ff1131"
    },
    {
      "type": "html",
      "text": " non-recursive garbage-collector algorithm.",
      "id": "21a223ee0496fcbbc931569843629011"
    },
    {
      "type": "html",
      "text": " code now compiles unmodified as both ANSI C and C++.",
      "id": "ab626d38c16d568140bcd96991cdd9df"
    },
    {
      "type": "html",
      "text": " improved support for 16-bit machines (we hope).",
      "id": "78a9c957fd0c5ea0cc5b44464787f8c3"
    },
    {
      "type": "html",
      "text": " and more!",
      "id": "be33e1ff8c948e1910218255c856c1f2"
    },
    {
      "type": "html",
      "text": "\nLua 4.0 is a major new version (4.0 beta is a field test; we don't expect\nto make any visible changes from 4.0 beta to 4.0 final).",
      "id": "a088d0748d8a7b2974144db54cc61dd9"
    },
    {
      "type": "html",
      "text": "\nThe language itself changed only a little (\"break\" and \"for\" statements and\nnew semantics for forwarding the return values of functions are the major\nchanges), but the C API and the implementation have changed a lot, with a\nnew, simpler C-Lua protocol, a new, better code generator and a new, faster\nvirtual machine.  Also, the built-in functions are now in the standard\nlibrary, and so Lua's core is even smaller (and faster)!",
      "id": "057ec002ffe9645cb977b5614bab135a"
    },
    {
      "type": "html",
      "text": "\nThose that program only in Lua should quickly adapt to Lua 4.0: many uses of",
      "id": "083e179f6783518ad13848560b853d18"
    },
    {
      "type": "html",
      "text": "\"while\", \"foreach\" and \"foreachvar\" can now be rewritten using \"for\" in a\nmuch cleaner way.  Also, global variables are now stored in an ordinary Lua\ntable, making the treatment of globals and table fields more uniform.",
      "id": "298178a600e87c32d2ef2795a9781f08"
    },
    {
      "type": "html",
      "text": "\nLua programmers will also welcome the improved error messages and the\npresence of full debug information without '$debug' (which paid a speed\npenalty in 3.2). Lua programs now run at full speed *and* errors are now\nreported fully (name of variable or field that caused the error, along with\nline numbers in the stack traceback).",
      "id": "baa78c3e7b4ee370142c4e633ba9904a"
    },
    {
      "type": "html",
      "text": "\nUnfortunately, those that use the C API will have to change their code.\nFirst, all functions now require an explicit Lua state as the first argument,\nbecause the API is now fully re-entrant.\nSecond, the C-Lua protocol has changed to be a simpler, stack-based protocol.\nlua_Objects have vanished and have been replaced by indices into the stack.\nThis new protocol is simpler to use and understand and is more efficient.\nHopefully, doubts about why the stack may overflow (as in a recent posting)\nwill be a thing of the past. :-)",
      "id": "1f872c8a8a7385d0cb77502c87db6226"
    },
    {
      "type": "html",
      "text": "\nAlso, the old API cannot be mapped easily into the new API, and so lua.h no longer contains compatibility macros. We are sorry about this, but we think that this is the time to adapt your C code, once and for all.",
      "id": "344320ad0521c5c2a0cefce804114262"
    },
    {
      "type": "html",
      "text": "\nMoreover, libraries generated by tools such as tolua and the [[Simplified Wrapper And Interface Generator]] will be automatically updated once these tools have been updated to 4.0. tolua should be ready when we release Lua 4.0 (final).",
      "id": "d36f101da1549a0e97a8a6f24f6dd6ea"
    },
    {
      "type": "html",
      "text": "\nPlease report any problems to lua@tecgraf.puc-rio.br.",
      "id": "753e48b78605aa6fe7fbd224ef47e053"
    },
    {
      "type": "html",
      "text": "\nThanks.",
      "id": "322a5cbc3045c5331a7dc57e2b217ca9"
    },
    {
      "type": "html",
      "text": "-- lhf",
      "id": "1cc642184d7d9c45d384c393a9d44ea7"
    },
    {
      "type": "html",
      "text": "\nThe support for reentrancy is a big deal as now Lua can be used concurrently from multiple threads. There was a mutant version of Lua available that also offered reentrancy, but this is now supported by the language designers. Lua was pretty fast before, but now it is noticably faster. -- [[John Passaniti]]",
      "id": "70b1b625164091cf73313e84165170a5"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "456331ce048ebe2793fdc74d6a510fe4"
    },
    {
      "type": "html",
      "text": "<i>Here's a note from one of the Lua developers received today (August 28th, 2000) about the beta release of Lua 4.0.</i>",
      "id": "2ff80bd3ad3a10922a0ecacc2c7734cc"
    },
    {
      "type": "html",
      "text": "\nAbout Lua 4.0:",
      "id": "1e39033ad0e9d99feb21cadead9ba5c4"
    },
    {
      "type": "html",
      "text": "\nThe good news is that we are finishing the last modifications to release a beta version. The bad news is that those are somewhat big modifications. ;-) Mainly, we are redesigning the C API (more about that later).",
      "id": "1653ff8028cda9c88fcb4fdcda9cdd45"
    },
    {
      "type": "html",
      "text": "\nAlthough we will release the next version as beta, we intend it to be as final as possible. But as there are many changes, we prefer to call it beta, and wait a little longer before releasing a final version. But we promise not to change any visible part of Lua from the beta version to the final 4.0 version, unless someone finds something very weird.",
      "id": "abff68b71aaf6cd0b2c52c6f17637c45"
    },
    {
      "type": "html",
      "text": "\nWe hope to release Lua 4.0 beta by mid-September.",
      "id": "63796183a25213d667abd81d815fb299"
    },
    {
      "type": "html",
      "text": "\nThe news in the new version are:",
      "id": "98c5fc0dc990927d824631d473e4ac4e"
    },
    {
      "type": "html",
      "text": " new API:<br>(much) simpler, smaller, and (a little) faster. (more about that later ;-):",
      "id": "91be4f9b116d8fefb355148edb7bc3db"
    },
    {
      "type": "html",
      "text": " table of globals:<br>all globals are now stored in a regular table; you can change that table, so that you change all globals with a single (and fast operation.",
      "id": "acda14f049fdd2cbbdd1ccd689d9681b"
    },
    {
      "type": "html",
      "text": " `for' statement for tables:<br>?for k,v in t do ... end?\t* no more '$debug': full speed *and* full debug information. (Actually, no more pragmas at all.)",
      "id": "515680c7cc1ec98127ef76963d2d84ea"
    },
    {
      "type": "html",
      "text": " improved error messages; examples:",
      "id": "977f45314b35099ee78787b421556dc8"
    },
    {
      "type": "code",
      "text": "  > foo()\n  error: attempt to call global `foo' (a nil value)",
      "id": "91aaf430405f6abb6ae1e32213637f5e"
    },
    {
      "type": "code",
      "text": "  > local a; print(a..1)\n  error: attempt to concat local `a' (a nil value)",
      "id": "668775efef3271e2d25400d8d446141e"
    },
    {
      "type": "html",
      "text": " improved support for 16-bit machines (we hope)",
      "id": "67af49078b10c1a495a6f2c00e8a44f2"
    },
    {
      "type": "html",
      "text": " improved treatment for memory allocation errors",
      "id": "8f7867b326f56d5a763868dd5635cfe7"
    },
    {
      "type": "html",
      "text": " non-recursive garbage-collector algorithm",
      "id": "869a8e585b3fa2a321eb90ba4608de1d"
    },
    {
      "type": "html",
      "text": "\nAbout the new API: the current API between Lua and C is quite simple for simple things, but too much complex for non-trivial tasks. For instance, very few people really understands why/when/how to use beginblock/endblock. So, we are replacing the current design (with two structures lua2C/C2lua) by a simpler one with only one stack. We get rid of beginblock/endblock, lua_Object, and getparam/getresult. All objects are created on the top of the stack. lua_is* and other queries have direct access to any element on the stack. When a C function is called, its parameters are on the stack. When it returns, the results are also on the stack. To separate them, the function returns (in C) the number of results it is returning (in Lua). The auxlib remains mainly unchanged, so for many simple functions the only change is this \"return int\". For instance, the `sin' function in mathlib now will be",
      "id": "2aa435ca0d34d6a6bb0ec19d0ae0efd6"
    },
    {
      "type": "code",
      "text": "  static int math_sin (lua_State *L) {\n  lua_pushnumber(L, sin(TORAD(luaL_check_number(L, 1))));\n  return 1;  /* <<<< Tells Lua it is returning one result */\n  }",
      "id": "0545f6ea2161b3c8aec984816f2e909d"
    },
    {
      "type": "html",
      "text": "\nAs we said, this new API is much simpler to explain, it is much easier to implement, and it is faster and smaller. Although it is not difficult to change (by hand) a program with the old API to the new one, we are afraid we won't be able to provide a \"compatibility module\" that simulates the old API over the new one.",
      "id": "9dd1930067c6963f13bbc5747a1265fa"
    },
    {
      "type": "html",
      "text": "\nWe feel that most C libraries are either small or are generated automatically with tools like [[Simplified Wrapper And Interface Generator]] for Lua and tolua. We intend to update tolua as soon as possible to generate code for 4.0, and we are willing to help the writers of others tools to adapt their code, if necessary.",
      "id": "9779067dd1598d34ef0f48857329cb7f"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "456331ce048ebe2793fdc74d6a510fe4"
    },
    {
      "type": "html",
      "text": "Related:",
      "id": "b58f41d0bdb7701ffaaae6d739fbced3"
    },
    {
      "type": "html",
      "text": " [[Lua Users Wiki]]",
      "id": "0a41fd495959e2da0a5e5d4b4a57e112"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "456331ce048ebe2793fdc74d6a510fe4"
    },
    {
      "type": "html",
      "text": "\nDiscussion moved to [[Lua Language Discussion]]. See also [[To Lua Description]].",
      "id": "7815a95d578f29ec6c69a0ab6f58b484"
    },
    {
      "type": "html",
      "text": "<hr>",
      "id": "456331ce048ebe2793fdc74d6a510fe4"
    },
    {
      "type": "html",
      "text": "[[Category Programming Language]] [[Meta Language]]",
      "id": "a3d02cc70c127ba5a15b9a68e1e4fbcc"
    },
    {
      "type": "html",
      "text": "See original on  [http://c2.com/cgi/wiki?LuaLanguage c2.com]",
      "id": "097bf623c80f97d5b4c64ee53b18be2c"
    }
  ],
  "journal": [
    {
      "date": 1391258631000,
      "id": "0e7c4bb576975ee92606d720ceb2ef8b",
      "type": "create",
      "item": {
        "title": "Lua Language",
        "story": [
          {
            "type": "html",
            "text": "[http://www.lua.org www.lua.org]  is the official homepage, and contains a good overview.",
            "id": "27e186d9e5e4f668f0ef606fccb2bb05"
          },
          {
            "type": "html",
            "text": "\nSee also lua-users wiki: [http://lua-users.org/wiki/ lua-users.org] and the tutorial [http://lua-users.org/wiki/TutorialDirectory lua-users.org].",
            "id": "d16bbc8b9dab7e126a0269204aa64057"
          },
          {
            "type": "html",
            "text": "\nI like Lua for the same reason I like Wiki: it's clean, simple, and light. The authors had a pure vision and <i>left out</i> the right things. Lua is the best extension language I've seen. It has a simple [[Cee Language]] [[Application Programming Interface]], and a simple build process, and simple mechanisms for moving data in and out of the scripting subsystem. I was able to extend my application with Lua in the first day of use. -- [[Ashley Fryer]]",
            "id": "db1754a90b5afde1e5474501f6eeab86"
          },
          {
            "type": "html",
            "text": "\nLua 5 is built on a [[Non Recursive Interpreter]], which allows it to directly support [[Co Routine]]s.",
            "id": "40340d784c22050e1c57fbc8c4ee3180"
          },
          {
            "type": "html",
            "text": "\nLua seems to have found a major killer application in game UI modification. World of Warcraft is the premier example, with a public-facing API for rewriting the interface. Rift, Age of Conan, Lord of the Rings Online, Warhammer Online, Runes of Magic and probably others have followed suit in recent years. Minecraft has an add-on, Computercraft, that allows you to write Lua scripts that interact with the Minecraft virtual world.",
            "id": "738e82270128f38d955438082c7042e6"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "456331ce048ebe2793fdc74d6a510fe4"
          },
          {
            "type": "html",
            "text": "[[Simplified Wrapper And Interface Generator]] (SWIG) can be used to make calls to [[Cee Language]] or [[Cee Plus Plus]] code.",
            "id": "165261900cec807a3a23c5abea11244e"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "456331ce048ebe2793fdc74d6a510fe4"
          },
          {
            "type": "html",
            "text": "\nLua also have a [[Just In Time]] [[Virtual Machine]]: [http://www.luajit.org www.luajit.org] (LuaJIT2 is very fast!)",
            "id": "b5f873e8bfb9e2f7636c37e43d352e14"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "456331ce048ebe2793fdc74d6a510fe4"
          },
          {
            "type": "html",
            "text": "Lua 5.2",
            "id": "6edc464b304849a40b8aaedf93dcc951"
          },
          {
            "type": "html",
            "text": "\nLua 5.2 is (as in Nov 2011) in beta. This release will add (quoting the manual) yieldable pcall and metamethods, new lexical scheme for globals, ephemeron tables, new library for bitwise operations, light C functions, emergency garbage collector, goto statement, and finalizers for tables.",
            "id": "aeaba67516f850b5a3997f75937ea165"
          },
          {
            "type": "html",
            "text": "<i>As of June 2012, Lua 5.2.1 is the current most stable release. Now that setfenv is gone, a lot of people are feeling empty inside, but the capabilities provided by _ENV are intriguing. They do pretty much everything setfenv did, except they lie closer to the code in the language, as opposed to being outsourced to a magic function. Not that Lua didn't work perfectly fine with magic function boxes that flip things about in amusing ways, but now that environments are controlled via a lexically scopable variable, you can make some amusing constructions, provided you know what you're doing... Perhaps that was the goal all along: to make sure we knew what we were doing when we referred to our magic environment-changing box.</i>",
            "id": "160e02b81e40d1baefefa4460511d9fd"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "456331ce048ebe2793fdc74d6a510fe4"
          },
          {
            "type": "html",
            "text": "\nLua 5.1",
            "id": "4ebff735fcd67ce0d9cac9d308df6719"
          },
          {
            "type": "html",
            "text": "\nLua 5.1 was released in 2006 and it is the current stable language version. Quoting the release text, it adds \"a new module system, incremental garbage collection, new mechanism for varargs, new syntax for long strings and comments, mod and length operators, metatables for all types, new configuration scheme via luaconf.h, and a fully reentrant parser\".",
            "id": "81ca428e11a1f851211b9267bb5a07d8"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "456331ce048ebe2793fdc74d6a510fe4"
          },
          {
            "type": "html",
            "text": "\nLua 5.0",
            "id": "402f7c3530fd6010f753d3753bc2022d"
          },
          {
            "type": "html",
            "text": "\nLua 5.0 was released on 11 Apr 2003. The main new features in Lua 5.0 are collaborative multithreading via Lua coroutines, full [[Lexical Scoping]] instead of upvalues, and metatables instead of tags and tag methods. Lua 5.0 also introduces booleans, [[Proper Tail Call]]s, and weak tables. Other features are better support for packages, new API for loading Lua chunks, new error handling protocol, better error messages, and much more. Lua 5.0 is the first version to be released under the new license.",
            "id": "945bb18e6a82b75bf8b56f15b13db52c"
          },
          {
            "type": "html",
            "text": "\nWith Version 5.0, Lua now uses a register-based instead of stack-based [[Virtual Machine]].",
            "id": "747f82b3f927f0674d03acaa6e5c55aa"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "456331ce048ebe2793fdc74d6a510fe4"
          },
          {
            "type": "html",
            "text": "\nFollowing are official announcements about the 4.0 alpha and beta of Lua, sent in the Lua mailing list. I've rearranged them in reverse chronological order.",
            "id": "ab2c45da61ffd8d4d716776ed432d57a"
          },
          {
            "type": "html",
            "text": "\nI'm happy with the usual direction the Lua authors have taken the language in the 4.0 beta - they made it even smaller and faster than before. But the new C API is going to be a problem. I and others where I work invested a significant effort in extending Lua for our application, and now all that code will have to be revisited. It's too bad they couldn't come up with some sort of compatibility macros to make the transition easier, but it just wasn't possible with these changes.",
            "id": "fb0e6be0a096569883220ad405d7ede1"
          },
          {
            "type": "html",
            "text": "\nOh well, such is progress...",
            "id": "46456a82f160a7d28bbd1b1bca91b872"
          },
          {
            "type": "html",
            "text": "-- [[John Passaniti]]",
            "id": "61cf7fda04b66ee2c710bd70cd032a9c"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "456331ce048ebe2793fdc74d6a510fe4"
          },
          {
            "type": "html",
            "text": "\nLua 4.0 (beta) is now available for downloading at",
            "id": "4cde03c77ae3a8e80d1601eb2e50fe6d"
          },
          {
            "type": "html",
            "text": " [http://www.tecgraf.puc-rio.br/lua/ftp/lua-4.0-beta.tar.gz www.tecgraf.puc-rio.br]",
            "id": "4cac246a4189e961f39c4d698b784b97"
          },
          {
            "type": "html",
            "text": " ftp://ftp.tecgraf.puc-rio.br/lua/lua-4.0-beta.tar.gz",
            "id": "f2b98cd13cdfa77942311eb1bd1e1848"
          },
          {
            "type": "html",
            "text": " [http://csg.uwaterloo.ca/lua/ftp/lua-4.0-beta.tar.gz csg.uwaterloo.ca]",
            "id": "27e7183850786e7df3061ab7e696d1c2"
          },
          {
            "type": "html",
            "text": " ftp://csg.uwaterloo.ca/pub/lhf/lua/lua.tar.gz",
            "id": "ad9161237221000e5ec8d2f9c5448edc"
          },
          {
            "type": "html",
            "text": "\nThe other mirrors will be updated soon, hopefully.",
            "id": "f6b095c65996402524ccc900fb977957"
          },
          {
            "type": "html",
            "text": "\nThe distribution includes an updated reference manual in HTML.\nThe [[Post Script]] and PDF versions in the site are still for version 3.2.",
            "id": "57780cebd8a073d276ba26255be166a2"
          },
          {
            "type": "html",
            "text": "\nNew in version 4.0 (beta)",
            "id": "9ffe97bf32ee3f61fb6951804149e25e"
          },
          {
            "type": "html",
            "text": " new API:<br>fully re-entrant, simpler, and more efficient.",
            "id": "6923fe663bd85f6cbfe8a42ee49d54fd"
          },
          {
            "type": "html",
            "text": " new \"break\" and \"for\" statements (both numerical and for tables).",
            "id": "9b7b852bc89c7f9217f4ca0c2040a25c"
          },
          {
            "type": "html",
            "text": " cleaner virtual machine -- at least 20% faster.",
            "id": "d56e9ecd21c18533d9aa8f719643b6c3"
          },
          {
            "type": "html",
            "text": " uniform treatment of globals:<br>globals are now stored in a Lua table.",
            "id": "5bb84ce8d3d2252ff202ffb560423f4b"
          },
          {
            "type": "html",
            "text": " improved error messages.",
            "id": "0cbfb02b22a86e4ac79799dd663b7543"
          },
          {
            "type": "html",
            "text": " no more '$debug':<br>full speed *and* full debug information.",
            "id": "7a59cb5f66bd9e2f93d52bc99d9d5329"
          },
          {
            "type": "html",
            "text": " reduced memory usage.",
            "id": "463ca1e680b6aec157819b6637ff1131"
          },
          {
            "type": "html",
            "text": " non-recursive garbage-collector algorithm.",
            "id": "21a223ee0496fcbbc931569843629011"
          },
          {
            "type": "html",
            "text": " code now compiles unmodified as both ANSI C and C++.",
            "id": "ab626d38c16d568140bcd96991cdd9df"
          },
          {
            "type": "html",
            "text": " improved support for 16-bit machines (we hope).",
            "id": "78a9c957fd0c5ea0cc5b44464787f8c3"
          },
          {
            "type": "html",
            "text": " and more!",
            "id": "be33e1ff8c948e1910218255c856c1f2"
          },
          {
            "type": "html",
            "text": "\nLua 4.0 is a major new version (4.0 beta is a field test; we don't expect\nto make any visible changes from 4.0 beta to 4.0 final).",
            "id": "a088d0748d8a7b2974144db54cc61dd9"
          },
          {
            "type": "html",
            "text": "\nThe language itself changed only a little (\"break\" and \"for\" statements and\nnew semantics for forwarding the return values of functions are the major\nchanges), but the C API and the implementation have changed a lot, with a\nnew, simpler C-Lua protocol, a new, better code generator and a new, faster\nvirtual machine.  Also, the built-in functions are now in the standard\nlibrary, and so Lua's core is even smaller (and faster)!",
            "id": "057ec002ffe9645cb977b5614bab135a"
          },
          {
            "type": "html",
            "text": "\nThose that program only in Lua should quickly adapt to Lua 4.0: many uses of",
            "id": "083e179f6783518ad13848560b853d18"
          },
          {
            "type": "html",
            "text": "\"while\", \"foreach\" and \"foreachvar\" can now be rewritten using \"for\" in a\nmuch cleaner way.  Also, global variables are now stored in an ordinary Lua\ntable, making the treatment of globals and table fields more uniform.",
            "id": "298178a600e87c32d2ef2795a9781f08"
          },
          {
            "type": "html",
            "text": "\nLua programmers will also welcome the improved error messages and the\npresence of full debug information without '$debug' (which paid a speed\npenalty in 3.2). Lua programs now run at full speed *and* errors are now\nreported fully (name of variable or field that caused the error, along with\nline numbers in the stack traceback).",
            "id": "baa78c3e7b4ee370142c4e633ba9904a"
          },
          {
            "type": "html",
            "text": "\nUnfortunately, those that use the C API will have to change their code.\nFirst, all functions now require an explicit Lua state as the first argument,\nbecause the API is now fully re-entrant.\nSecond, the C-Lua protocol has changed to be a simpler, stack-based protocol.\nlua_Objects have vanished and have been replaced by indices into the stack.\nThis new protocol is simpler to use and understand and is more efficient.\nHopefully, doubts about why the stack may overflow (as in a recent posting)\nwill be a thing of the past. :-)",
            "id": "1f872c8a8a7385d0cb77502c87db6226"
          },
          {
            "type": "html",
            "text": "\nAlso, the old API cannot be mapped easily into the new API, and so lua.h no longer contains compatibility macros. We are sorry about this, but we think that this is the time to adapt your C code, once and for all.",
            "id": "344320ad0521c5c2a0cefce804114262"
          },
          {
            "type": "html",
            "text": "\nMoreover, libraries generated by tools such as tolua and the [[Simplified Wrapper And Interface Generator]] will be automatically updated once these tools have been updated to 4.0. tolua should be ready when we release Lua 4.0 (final).",
            "id": "d36f101da1549a0e97a8a6f24f6dd6ea"
          },
          {
            "type": "html",
            "text": "\nPlease report any problems to lua@tecgraf.puc-rio.br.",
            "id": "753e48b78605aa6fe7fbd224ef47e053"
          },
          {
            "type": "html",
            "text": "\nThanks.",
            "id": "322a5cbc3045c5331a7dc57e2b217ca9"
          },
          {
            "type": "html",
            "text": "-- lhf",
            "id": "1cc642184d7d9c45d384c393a9d44ea7"
          },
          {
            "type": "html",
            "text": "\nThe support for reentrancy is a big deal as now Lua can be used concurrently from multiple threads. There was a mutant version of Lua available that also offered reentrancy, but this is now supported by the language designers. Lua was pretty fast before, but now it is noticably faster. -- [[John Passaniti]]",
            "id": "70b1b625164091cf73313e84165170a5"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "456331ce048ebe2793fdc74d6a510fe4"
          },
          {
            "type": "html",
            "text": "<i>Here's a note from one of the Lua developers received today (August 28th, 2000) about the beta release of Lua 4.0.</i>",
            "id": "2ff80bd3ad3a10922a0ecacc2c7734cc"
          },
          {
            "type": "html",
            "text": "\nAbout Lua 4.0:",
            "id": "1e39033ad0e9d99feb21cadead9ba5c4"
          },
          {
            "type": "html",
            "text": "\nThe good news is that we are finishing the last modifications to release a beta version. The bad news is that those are somewhat big modifications. ;-) Mainly, we are redesigning the C API (more about that later).",
            "id": "1653ff8028cda9c88fcb4fdcda9cdd45"
          },
          {
            "type": "html",
            "text": "\nAlthough we will release the next version as beta, we intend it to be as final as possible. But as there are many changes, we prefer to call it beta, and wait a little longer before releasing a final version. But we promise not to change any visible part of Lua from the beta version to the final 4.0 version, unless someone finds something very weird.",
            "id": "abff68b71aaf6cd0b2c52c6f17637c45"
          },
          {
            "type": "html",
            "text": "\nWe hope to release Lua 4.0 beta by mid-September.",
            "id": "63796183a25213d667abd81d815fb299"
          },
          {
            "type": "html",
            "text": "\nThe news in the new version are:",
            "id": "98c5fc0dc990927d824631d473e4ac4e"
          },
          {
            "type": "html",
            "text": " new API:<br>(much) simpler, smaller, and (a little) faster. (more about that later ;-):",
            "id": "91be4f9b116d8fefb355148edb7bc3db"
          },
          {
            "type": "html",
            "text": " table of globals:<br>all globals are now stored in a regular table; you can change that table, so that you change all globals with a single (and fast operation.",
            "id": "acda14f049fdd2cbbdd1ccd689d9681b"
          },
          {
            "type": "html",
            "text": " `for' statement for tables:<br>?for k,v in t do ... end?\t* no more '$debug': full speed *and* full debug information. (Actually, no more pragmas at all.)",
            "id": "515680c7cc1ec98127ef76963d2d84ea"
          },
          {
            "type": "html",
            "text": " improved error messages; examples:",
            "id": "977f45314b35099ee78787b421556dc8"
          },
          {
            "type": "code",
            "text": "  > foo()\n  error: attempt to call global `foo' (a nil value)",
            "id": "91aaf430405f6abb6ae1e32213637f5e"
          },
          {
            "type": "code",
            "text": "  > local a; print(a..1)\n  error: attempt to concat local `a' (a nil value)",
            "id": "668775efef3271e2d25400d8d446141e"
          },
          {
            "type": "html",
            "text": " improved support for 16-bit machines (we hope)",
            "id": "67af49078b10c1a495a6f2c00e8a44f2"
          },
          {
            "type": "html",
            "text": " improved treatment for memory allocation errors",
            "id": "8f7867b326f56d5a763868dd5635cfe7"
          },
          {
            "type": "html",
            "text": " non-recursive garbage-collector algorithm",
            "id": "869a8e585b3fa2a321eb90ba4608de1d"
          },
          {
            "type": "html",
            "text": "\nAbout the new API: the current API between Lua and C is quite simple for simple things, but too much complex for non-trivial tasks. For instance, very few people really understands why/when/how to use beginblock/endblock. So, we are replacing the current design (with two structures lua2C/C2lua) by a simpler one with only one stack. We get rid of beginblock/endblock, lua_Object, and getparam/getresult. All objects are created on the top of the stack. lua_is* and other queries have direct access to any element on the stack. When a C function is called, its parameters are on the stack. When it returns, the results are also on the stack. To separate them, the function returns (in C) the number of results it is returning (in Lua). The auxlib remains mainly unchanged, so for many simple functions the only change is this \"return int\". For instance, the `sin' function in mathlib now will be",
            "id": "2aa435ca0d34d6a6bb0ec19d0ae0efd6"
          },
          {
            "type": "code",
            "text": "  static int math_sin (lua_State *L) {\n  lua_pushnumber(L, sin(TORAD(luaL_check_number(L, 1))));\n  return 1;  /* <<<< Tells Lua it is returning one result */\n  }",
            "id": "0545f6ea2161b3c8aec984816f2e909d"
          },
          {
            "type": "html",
            "text": "\nAs we said, this new API is much simpler to explain, it is much easier to implement, and it is faster and smaller. Although it is not difficult to change (by hand) a program with the old API to the new one, we are afraid we won't be able to provide a \"compatibility module\" that simulates the old API over the new one.",
            "id": "9dd1930067c6963f13bbc5747a1265fa"
          },
          {
            "type": "html",
            "text": "\nWe feel that most C libraries are either small or are generated automatically with tools like [[Simplified Wrapper And Interface Generator]] for Lua and tolua. We intend to update tolua as soon as possible to generate code for 4.0, and we are willing to help the writers of others tools to adapt their code, if necessary.",
            "id": "9779067dd1598d34ef0f48857329cb7f"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "456331ce048ebe2793fdc74d6a510fe4"
          },
          {
            "type": "html",
            "text": "Related:",
            "id": "b58f41d0bdb7701ffaaae6d739fbced3"
          },
          {
            "type": "html",
            "text": " [[Lua Users Wiki]]",
            "id": "0a41fd495959e2da0a5e5d4b4a57e112"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "456331ce048ebe2793fdc74d6a510fe4"
          },
          {
            "type": "html",
            "text": "\nDiscussion moved to [[Lua Language Discussion]]. See also [[To Lua Description]].",
            "id": "7815a95d578f29ec6c69a0ab6f58b484"
          },
          {
            "type": "html",
            "text": "<hr>",
            "id": "456331ce048ebe2793fdc74d6a510fe4"
          },
          {
            "type": "html",
            "text": "[[Category Programming Language]] [[Meta Language]]",
            "id": "a3d02cc70c127ba5a15b9a68e1e4fbcc"
          },
          {
            "type": "html",
            "text": "See original on  [http://c2.com/cgi/wiki?LuaLanguage c2.com]",
            "id": "097bf623c80f97d5b4c64ee53b18be2c"
          }
        ]
      }
    },
    {
      "type": "fork",
      "site": "sfw.c2.com",
      "date": 1708024250665
    }
  ]
}