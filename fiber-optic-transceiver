{
  "title": "Fiber Optic Transceiver",
  "story": [
    {
      "type": "image",
      "id": "b1c759db9a2e7909",
      "text": "Kenneth Finnegan",
      "size": "thumbnail",
      "width": 183,
      "height": 183,
      "url": "/assets/plugins/image/00eb919dff344b978a88fbbe0d1799e1.jpg"
    },
    {
      "type": "paragraph",
      "id": "3a6b455a0798cbde",
      "text": "Required reading if you do any networking at any speed. The thread is full of fantastic pictures and brilliant explanations. [https://mastodon.radio/@mahtin@mastodon.cloud/111658621940589896 boost]"
    },
    {
      "type": "paragraph",
      "id": "ae011308f112d678",
      "text": "One of my nice friends at Hurricane Electric gave me a dead 100G-LR4 optic to tear apart for your entertainment so lets dig into it. \n [https://social.afront.org/@kwf/109492743645650432 post]"
    },
    {
      "type": "paragraph",
      "id": "28328496a6a90076",
      "text": "100G-LR4 is a QSFP28 optic that runs over a duplex pair of single mode fiber, so it takes 4 lanes of 25G from the switch, modulates 4 different colors of light, and combines them together over a single strand to the other end up to 10km away."
    },
    {
      "type": "html",
      "id": "f803ed91a5d32a0a",
      "text": "<p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/747/768/709/737/small/cfdd9e585293f37f.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/747/768/709/737/original/cfdd9e585293f37f.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/747/768/709/737/small/cfdd9e585293f37f.png 554w\" alt=\"End view of the optical duplex LC connector on the QSFP\" title=\"End view of the optical duplex LC connector on the QSFP\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>First comes off the ejection bail. I guess we're committed now since that was rather destructive.Two tiny screws get us into the case. The grey putty stuff is thermal gap filler, which couples each part that puts off heat to the case for cooling.Think of it like thermal paste, but it's designed to be thick and span a gap instead of just be a thin film.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/753/339/482/959/small/ebf820b4b83c8388.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/753/339/482/959/original/ebf820b4b83c8388.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/753/339/482/959/small/ebf820b4b83c8388.png 554w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/755/421/054/630/small/a2908ce3dea7a2de.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/755/421/054/630/original/a2908ce3dea7a2de.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/755/421/054/630/small/a2908ce3dea7a2de.png 554w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>Lifting the electrical assembly out of the other half of the metal case, we can start pointing out the major points of interest.TOSA/ROSA - transmit/ receive optical sub assemblies are where the laser magic happen.The retimers help 4x25G get to the switch via the QSFP connector</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/762/225/618/490/small/ea1b571847bca457.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/762/225/618/490/original/ea1b571847bca457.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/762/225/618/490/small/ea1b571847bca457.png 554w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/763/592/507/948/small/5d01d89d4251da14.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/763/592/507/948/original/5d01d89d4251da14.png 1135w, https://social.afront.org/system/media_attachments/files/109/492/763/592/507/948/small/5d01d89d4251da14.png 593w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>The TOSA and ROSA both need to handle four wavelengths of light moving 25Gbps each, so they're actually connected to the PCB with two layers of ribbon cables. One of the ribbons is just for the 4x25Gbps data channels, and the other is for power, biasing, etc, not high speed stuff to run the OSA parts.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/773/591/097/703/small/0f6b866118472fe9.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/773/591/097/703/original/0f6b866118472fe9.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/773/591/097/703/small/0f6b866118472fe9.png 554w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>Looking on the other side of the whole assembly, the largest IC in the middle (the silver one)  is the microcontroller that talks to the switch over an I2C bus to report telemetry and ID information, and pretty much everything else is voltage regulation for taking the 3.3V from the switch and regulating it down to lower voltages to drive the lasers.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/781/247/411/287/small/995702dcb5787700.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/781/247/411/287/original/995702dcb5787700.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/781/247/411/287/small/995702dcb5787700.png 554w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>And that microcontroller that runs the whole show is... a Cortex M3! An STM32F103C6 with 32kB of flash, 10kB of SRAM, and can run at up to 72MHz.Meaning that this optic has more compute power than many early home computers.You'll note that the ST microcontroller is silver, as are a few other ICs on this optic. This is actually a cost saving measure called \"flip chip\" packaging, where they don't waste the expense of the black plastic packaging and solder the silicon die straight down onto the board like it was a QFN. Absolutely wild.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/789/535/292/969/small/96b61475db06a11d.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/789/535/292/969/original/96b61475db06a11d.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/789/535/292/969/small/96b61475db06a11d.png 554w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/790/186/997/662/small/0a13e95f73fcb9fe.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/790/186/997/662/original/0a13e95f73fcb9fe.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/790/186/997/662/small/0a13e95f73fcb9fe.png 554w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>While it's fun to think about malware on the ARM core in these, the data path is WAY faster than the Cortex M3 can handle. It's entirely an out-of-band manager of the electronics with no idea of what is going on in the Ethernet link itself.That being said, some newer optics really DO have interactions in the data path. The most notable is the speed-changing optics which allow modern Ethernet switches (which only support 10G/25G/50G on their front panel ports) to still link up with a 1G Ethernet peer. The optic does the 10:1 speed change and implements clause 37 autoneg entirely inside the optic.Granted, the firmware on optics actually *IS* field writable. I've coordinated with an optics vendor in the past to help a customer apply a firmware patch to 10,000 optics installed in Arista switches in the field by issuing the right magic sequence of write commands over the I2C bus from EOS.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/807/799/609/729/small/bc8fcb4c86d6c9cd.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/807/799/609/729/original/bc8fcb4c86d6c9cd.png 1191w, https://social.afront.org/system/media_attachments/files/109/492/807/799/609/729/small/bc8fcb4c86d6c9cd.png 854w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>Remember how I said the rest of the parts were mostly voltage regulation?Voltage regulators usually need some kind of inductance... so just saying... prime cute coil of wire opportunity.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/826/884/033/119/small/1d85e6d5667e20f8.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/826/884/033/119/original/1d85e6d5667e20f8.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/826/884/033/119/small/1d85e6d5667e20f8.png 554w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/827/607/589/422/small/3264119739a90054.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/827/607/589/422/original/3264119739a90054.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/827/607/589/422/small/3264119739a90054.png 555w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>So this is where things get REAL ugly... we break out the Dremel and cut the lid off the TOSA (Transmit Optical Sub Assembly) to expose the yummy optical bits inside it.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/874/750/661/588/small/e3ed4592bed6cc9e.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/874/750/661/588/original/e3ed4592bed6cc9e.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/874/750/661/588/small/e3ed4592bed6cc9e.png 554w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>Remember that while there's four different waves for the four 25Gbps streams, 100G-LR4 runs over a single duplex pair of fibers, so all four optical signals need to make it out a single strand of fiber, so... PRISMS.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/901/287/562/002/small/8541e45da2923e4a.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/901/287/562/002/original/8541e45da2923e4a.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/901/287/562/002/small/8541e45da2923e4a.png 554w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/901/583/079/007/small/3091dea7c585c66e.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/901/583/079/007/original/3091dea7c585c66e.png 1659w, https://social.afront.org/system/media_attachments/files/109/492/901/583/079/007/small/3091dea7c585c66e.png 675w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>The colors are all way out in the infrared, so don't put too much stock in the colors I use in the picture, but hopefully you get the point about how the prisms are used as optical combiners.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/916/500/212/129/small/66897178d70d62d1.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/916/500/212/129/original/66897178d70d62d1.png 1232w, https://social.afront.org/system/media_attachments/files/109/492/916/500/212/129/small/66897178d70d62d1.png 740w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>The keen eye will also notice that some of the Dremel debris from me cutting open the TOSA is... stuck to this cube and fuzzy... like it's magnetic...And it it. That is a tiny magnet in the middle of the optical path, but why?Physics talk. Remember that the transmitters here are lasers, which mean that the four lasers on the right are each their own resonant cavity, which leaks a fraction of the light to be useful. But if there was some kind of partial reflection out in the fiber somewhere, this could cause problems and destabilize these lasers, so we would like some way to let light OUT of the TOSA without letting any reflected light back into the lasers to cause problems, so we make an optical one-way valve...MORE PHYSICS TALK: Light is a perpendicular E-M field, so if you used a vertical polarizer, and then passed the light through a magnetic field to rotate the polarization 45 degrees to line up with a //// diagonal polarizing filter on the other side of the magnet...Think about the reverse path. //// polarizing filter, 45 degree rotation, horizontal light hitting a vertical polarizing filtering. BLOCKED.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/920/666/166/239/small/f84029881255679e.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/920/666/166/239/original/f84029881255679e.png 1149w, https://social.afront.org/system/media_attachments/files/109/492/920/666/166/239/small/f84029881255679e.png 650w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>Putting the TOSA under my microscope, we can start to see some more of the finer details.This is rotated from the last photos.I'm not convinced whether the two missing lenses in the middle broke off before I got it, broke off while I was hacking my way into the package, or were just never there. A mystery for the ages.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/991/378/825/132/small/a55c119666b75ec4.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/991/378/825/132/original/a55c119666b75ec4.png 1924w, https://social.afront.org/system/media_attachments/files/109/492/991/378/825/132/small/a55c119666b75ec4.png 641w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>For one thing, we see a tiny square and two bond wires landing on the platform holding the lasers and the first stage of the optics.This is a silicon diode. Fun diode fact: the junction voltage of a diode changes with temperature in a very predictable and consistent way, so it's very common for temperature sensors to measure the junction voltage of a diode or base of a transistor.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/009/179/901/095/small/9f5d8ada959de600.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/009/179/901/095/original/9f5d8ada959de600.png 960w, https://social.afront.org/system/media_attachments/files/109/493/009/179/901/095/small/9f5d8ada959de600.png 448w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>And a temperature sensor would imply some kind of temperature control, and this actually makes a lot of sense, because the four lasers are all different colors, but only SLIGHTLY different colors.Each of the four lasers are only 4.5nm apart in wavelength, so the temperature really matters to keep them in their channel, so there's a peltier cooler underneath the platform holding the lasers and first optical stage so that the optic can electrically heat or cool the lasers to keep them at the right temperature! https://en.wikipedia.org/wiki/Thermoelectric_cooling</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/056/345/309/490/small/88a8efe5e014c7d7.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/056/345/309/490/original/88a8efe5e014c7d7.png 930w, https://social.afront.org/system/media_attachments/files/109/493/056/345/309/490/small/88a8efe5e014c7d7.png 449w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>The ROSA is somewhat less interesting. The right half seems to be a giant prism and I wasn't able to get it apart to any useful degree.The glassy fractures on it are from me trying to pry it out.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/109/696/121/703/small/e89172a0c30394b8.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/109/696/121/703/original/e89172a0c30394b8.png 1966w, https://social.afront.org/system/media_attachments/files/109/493/109/696/121/703/small/e89172a0c30394b8.png 655w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>The four receive diodes on the left of the ROSA are facing up, which is perpendicular from the light coming in from the right, so the final stage of the ROSA optics were glued as a bridge with four little lenses and a right angle PRISM!</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/116/813/072/387/small/f977708d22a424a6.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/116/813/072/387/original/f977708d22a424a6.png 1247w, https://social.afront.org/system/media_attachments/files/109/493/116/813/072/387/small/f977708d22a424a6.png 415w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/117/571/536/745/small/23ff06917f8ded92.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/117/571/536/745/original/23ff06917f8ded92.png 1247w, https://social.afront.org/system/media_attachments/files/109/493/117/571/536/745/small/23ff06917f8ded92.png 415w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>So lastly, here are some more photos of the PCB that runs from the QSFP edge connector to the ribbon cables attached to the ROSA and TOSA.   /finThanks for reading. For those new here, I have a Liberapay which I'm using to fund the #MicroMirror project where I'm trying to fix Linux/free software distribution to users. https://liberapay.com/phirephly/</p><p><img width=100% draggable=\"false\" class=\"emojione\" alt=\"🧵\" title=\":thread:\" src=\"/emoji/1f9f5.svg\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/122/167/535/572/small/894dc5c1b7852f7c.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/122/167/535/572/original/894dc5c1b7852f7c.png 1925w, https://social.afront.org/system/media_attachments/files/109/493/122/167/535/572/small/894dc5c1b7852f7c.png 642w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/122/768/094/207/small/7bf0305f585d8b43.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/122/768/094/207/original/7bf0305f585d8b43.png 1923w, https://social.afront.org/system/media_attachments/files/109/493/122/768/094/207/small/7bf0305f585d8b43.png 640w\" lang=\"en\" sizes=\"247px\"></p>\n\n"
    },
    {
      "type": "paragraph",
      "id": "4ed0d4de971fd113",
      "text": "Text and images extracted from Mastodon thread using code in the browser's debugger window. This then cleaned up a bit with global replace commands in the programming text editor."
    },
    {
      "type": "code",
      "id": "0147aefb1933d342",
      "text": "copy([...document.querySelectorAll('.status')].map(s => `<p>${s.getAttribute('aria-label')}</p><p>${[...s.querySelectorAll('img')].map(i => i.outerHTML).join(\"<br>\")}`).join(\"<hr>\\n\")) "
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "Fiber Optic Transceiver",
        "story": []
      },
      "date": 1703810438270
    },
    {
      "id": "3a6b455a0798cbde",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "3a6b455a0798cbde",
        "text": "Required reading if you do any networking at any speed. The thread is full of fantastic pictures and brilliant explanations. [https://social.afront.org/@kwf/109492743645650432 post]"
      },
      "attribution": {
        "page": "Fiber Optic Tranciever"
      },
      "date": 1703810476336
    },
    {
      "id": "0147aefb1933d342",
      "type": "add",
      "item": {
        "type": "code",
        "id": "0147aefb1933d342",
        "text": "copy([...document.querySelectorAll('.status')].map(s => `<p>${s.getAttribute('aria-label')}</p><p>${[...s.querySelectorAll('img')].map(i => i.outerHTML).join(\"<br>\")}`).join(\"<hr>\\n\")) "
      },
      "after": "3a6b455a0798cbde",
      "attribution": {
        "page": "Fiber Optic Tranciever"
      },
      "date": 1703810482626
    },
    {
      "id": "f803ed91a5d32a0a",
      "type": "add",
      "item": {
        "type": "html",
        "id": "f803ed91a5d32a0a",
        "text": "<p>100G-LR4 is a QSFP28 optic that runs over a duplex pair of single mode fiber, so it takes 4 lanes of 25G from the switch, modulates 4 different colors of light, and combines them together over a single strand to the other end up to 10km away.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/747/768/709/737/small/cfdd9e585293f37f.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/747/768/709/737/original/cfdd9e585293f37f.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/747/768/709/737/small/cfdd9e585293f37f.png 554w\" alt=\"End view of the optical duplex LC connector on the QSFP\" title=\"End view of the optical duplex LC connector on the QSFP\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>First comes off the ejection bail. I guess we're committed now since that was rather destructive.Two tiny screws get us into the case. The grey putty stuff is thermal gap filler, which couples each part that puts off heat to the case for cooling.Think of it like thermal paste, but it's designed to be thick and span a gap instead of just be a thin film.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/753/339/482/959/small/ebf820b4b83c8388.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/753/339/482/959/original/ebf820b4b83c8388.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/753/339/482/959/small/ebf820b4b83c8388.png 554w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/755/421/054/630/small/a2908ce3dea7a2de.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/755/421/054/630/original/a2908ce3dea7a2de.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/755/421/054/630/small/a2908ce3dea7a2de.png 554w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>Lifting the electrical assembly out of the other half of the metal case, we can start pointing out the major points of interest.TOSA/ROSA - transmit/ receive optical sub assemblies are where the laser magic happen.The retimers help 4x25G get to the switch via the QSFP connector</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/762/225/618/490/small/ea1b571847bca457.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/762/225/618/490/original/ea1b571847bca457.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/762/225/618/490/small/ea1b571847bca457.png 554w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/763/592/507/948/small/5d01d89d4251da14.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/763/592/507/948/original/5d01d89d4251da14.png 1135w, https://social.afront.org/system/media_attachments/files/109/492/763/592/507/948/small/5d01d89d4251da14.png 593w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>The TOSA and ROSA both need to handle four wavelengths of light moving 25Gbps each, so they're actually connected to the PCB with two layers of ribbon cables. One of the ribbons is just for the 4x25Gbps data channels, and the other is for power, biasing, etc, not high speed stuff to run the OSA parts.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/773/591/097/703/small/0f6b866118472fe9.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/773/591/097/703/original/0f6b866118472fe9.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/773/591/097/703/small/0f6b866118472fe9.png 554w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>Looking on the other side of the whole assembly, the largest IC in the middle (the silver one)  is the microcontroller that talks to the switch over an I2C bus to report telemetry and ID information, and pretty much everything else is voltage regulation for taking the 3.3V from the switch and regulating it down to lower voltages to drive the lasers.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/781/247/411/287/small/995702dcb5787700.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/781/247/411/287/original/995702dcb5787700.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/781/247/411/287/small/995702dcb5787700.png 554w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>And that microcontroller that runs the whole show is... a Cortex M3! An STM32F103C6 with 32kB of flash, 10kB of SRAM, and can run at up to 72MHz.Meaning that this optic has more compute power than many early home computers.You'll note that the ST microcontroller is silver, as are a few other ICs on this optic. This is actually a cost saving measure called \"flip chip\" packaging, where they don't waste the expense of the black plastic packaging and solder the silicon die straight down onto the board like it was a QFN. Absolutely wild.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/789/535/292/969/small/96b61475db06a11d.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/789/535/292/969/original/96b61475db06a11d.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/789/535/292/969/small/96b61475db06a11d.png 554w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/790/186/997/662/small/0a13e95f73fcb9fe.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/790/186/997/662/original/0a13e95f73fcb9fe.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/790/186/997/662/small/0a13e95f73fcb9fe.png 554w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>While it's fun to think about malware on the ARM core in these, the data path is WAY faster than the Cortex M3 can handle. It's entirely an out-of-band manager of the electronics with no idea of what is going on in the Ethernet link itself.That being said, some newer optics really DO have interactions in the data path. The most notable is the speed-changing optics which allow modern Ethernet switches (which only support 10G/25G/50G on their front panel ports) to still link up with a 1G Ethernet peer. The optic does the 10:1 speed change and implements clause 37 autoneg entirely inside the optic.Granted, the firmware on optics actually *IS* field writable. I've coordinated with an optics vendor in the past to help a customer apply a firmware patch to 10,000 optics installed in Arista switches in the field by issuing the right magic sequence of write commands over the I2C bus from EOS.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/807/799/609/729/small/bc8fcb4c86d6c9cd.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/807/799/609/729/original/bc8fcb4c86d6c9cd.png 1191w, https://social.afront.org/system/media_attachments/files/109/492/807/799/609/729/small/bc8fcb4c86d6c9cd.png 854w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>Remember how I said the rest of the parts were mostly voltage regulation?Voltage regulators usually need some kind of inductance... so just saying... prime cute coil of wire opportunity.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/826/884/033/119/small/1d85e6d5667e20f8.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/826/884/033/119/original/1d85e6d5667e20f8.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/826/884/033/119/small/1d85e6d5667e20f8.png 554w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/827/607/589/422/small/3264119739a90054.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/827/607/589/422/original/3264119739a90054.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/827/607/589/422/small/3264119739a90054.png 555w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>So this is where things get REAL ugly... we break out the Dremel and cut the lid off the TOSA (Transmit Optical Sub Assembly) to expose the yummy optical bits inside it.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/874/750/661/588/small/e3ed4592bed6cc9e.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/874/750/661/588/original/e3ed4592bed6cc9e.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/874/750/661/588/small/e3ed4592bed6cc9e.png 554w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>Remember that while there's four different waves for the four 25Gbps streams, 100G-LR4 runs over a single duplex pair of fibers, so all four optical signals need to make it out a single strand of fiber, so... PRISMS.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/901/287/562/002/small/8541e45da2923e4a.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/901/287/562/002/original/8541e45da2923e4a.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/901/287/562/002/small/8541e45da2923e4a.png 554w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/901/583/079/007/small/3091dea7c585c66e.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/901/583/079/007/original/3091dea7c585c66e.png 1659w, https://social.afront.org/system/media_attachments/files/109/492/901/583/079/007/small/3091dea7c585c66e.png 675w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>The colors are all way out in the infrared, so don't put too much stock in the colors I use in the picture, but hopefully you get the point about how the prisms are used as optical combiners.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/916/500/212/129/small/66897178d70d62d1.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/916/500/212/129/original/66897178d70d62d1.png 1232w, https://social.afront.org/system/media_attachments/files/109/492/916/500/212/129/small/66897178d70d62d1.png 740w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>The keen eye will also notice that some of the Dremel debris from me cutting open the TOSA is... stuck to this cube and fuzzy... like it's magnetic...And it it. That is a tiny magnet in the middle of the optical path, but why?Physics talk. Remember that the transmitters here are lasers, which mean that the four lasers on the right are each their own resonant cavity, which leaks a fraction of the light to be useful. But if there was some kind of partial reflection out in the fiber somewhere, this could cause problems and destabilize these lasers, so we would like some way to let light OUT of the TOSA without letting any reflected light back into the lasers to cause problems, so we make an optical one-way valve...MORE PHYSICS TALK: Light is a perpendicular E-M field, so if you used a vertical polarizer, and then passed the light through a magnetic field to rotate the polarization 45 degrees to line up with a //// diagonal polarizing filter on the other side of the magnet...Think about the reverse path. //// polarizing filter, 45 degree rotation, horizontal light hitting a vertical polarizing filtering. BLOCKED.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/920/666/166/239/small/f84029881255679e.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/920/666/166/239/original/f84029881255679e.png 1149w, https://social.afront.org/system/media_attachments/files/109/492/920/666/166/239/small/f84029881255679e.png 650w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>Putting the TOSA under my microscope, we can start to see some more of the finer details.This is rotated from the last photos.I'm not convinced whether the two missing lenses in the middle broke off before I got it, broke off while I was hacking my way into the package, or were just never there. A mystery for the ages.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/991/378/825/132/small/a55c119666b75ec4.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/991/378/825/132/original/a55c119666b75ec4.png 1924w, https://social.afront.org/system/media_attachments/files/109/492/991/378/825/132/small/a55c119666b75ec4.png 641w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>For one thing, we see a tiny square and two bond wires landing on the platform holding the lasers and the first stage of the optics.This is a silicon diode. Fun diode fact: the junction voltage of a diode changes with temperature in a very predictable and consistent way, so it's very common for temperature sensors to measure the junction voltage of a diode or base of a transistor.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/009/179/901/095/small/9f5d8ada959de600.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/009/179/901/095/original/9f5d8ada959de600.png 960w, https://social.afront.org/system/media_attachments/files/109/493/009/179/901/095/small/9f5d8ada959de600.png 448w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>And a temperature sensor would imply some kind of temperature control, and this actually makes a lot of sense, because the four lasers are all different colors, but only SLIGHTLY different colors.Each of the four lasers are only 4.5nm apart in wavelength, so the temperature really matters to keep them in their channel, so there's a peltier cooler underneath the platform holding the lasers and first optical stage so that the optic can electrically heat or cool the lasers to keep them at the right temperature! https://en.wikipedia.org/wiki/Thermoelectric_cooling</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/056/345/309/490/small/88a8efe5e014c7d7.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/056/345/309/490/original/88a8efe5e014c7d7.png 930w, https://social.afront.org/system/media_attachments/files/109/493/056/345/309/490/small/88a8efe5e014c7d7.png 449w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>The ROSA is somewhat less interesting. The right half seems to be a giant prism and I wasn't able to get it apart to any useful degree.The glassy fractures on it are from me trying to pry it out.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/109/696/121/703/small/e89172a0c30394b8.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/109/696/121/703/original/e89172a0c30394b8.png 1966w, https://social.afront.org/system/media_attachments/files/109/493/109/696/121/703/small/e89172a0c30394b8.png 655w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>The four receive diodes on the left of the ROSA are facing up, which is perpendicular from the light coming in from the right, so the final stage of the ROSA optics were glued as a bridge with four little lenses and a right angle PRISM!</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/116/813/072/387/small/f977708d22a424a6.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/116/813/072/387/original/f977708d22a424a6.png 1247w, https://social.afront.org/system/media_attachments/files/109/493/116/813/072/387/small/f977708d22a424a6.png 415w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/117/571/536/745/small/23ff06917f8ded92.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/117/571/536/745/original/23ff06917f8ded92.png 1247w, https://social.afront.org/system/media_attachments/files/109/493/117/571/536/745/small/23ff06917f8ded92.png 415w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>So lastly, here are some more photos of the PCB that runs from the QSFP edge connector to the ribbon cables attached to the ROSA and TOSA.   /finThanks for reading. For those new here, I have a Liberapay which I'm using to fund the #MicroMirror project where I'm trying to fix Linux/free software distribution to users. https://liberapay.com/phirephly/</p><p><img width=100% draggable=\"false\" class=\"emojione\" alt=\"🧵\" title=\":thread:\" src=\"/emoji/1f9f5.svg\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/122/167/535/572/small/894dc5c1b7852f7c.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/122/167/535/572/original/894dc5c1b7852f7c.png 1925w, https://social.afront.org/system/media_attachments/files/109/493/122/167/535/572/small/894dc5c1b7852f7c.png 642w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/122/768/094/207/small/7bf0305f585d8b43.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/122/768/094/207/original/7bf0305f585d8b43.png 1923w, https://social.afront.org/system/media_attachments/files/109/493/122/768/094/207/small/7bf0305f585d8b43.png 640w\" lang=\"en\" sizes=\"247px\"></p>\n\n"
      },
      "after": "0147aefb1933d342",
      "attribution": {
        "page": "Fiber Optic Tranciever"
      },
      "date": 1703810485554
    },
    {
      "type": "add",
      "id": "b1c759db9a2e7909",
      "item": {
        "type": "factory",
        "id": "b1c759db9a2e7909",
        "text": " "
      },
      "after": "3a6b455a0798cbde",
      "date": 1703810875471
    },
    {
      "type": "edit",
      "id": "b1c759db9a2e7909",
      "item": {
        "type": "image",
        "id": "b1c759db9a2e7909",
        "text": "Uploaded image",
        "size": "thumbnail",
        "width": 183,
        "height": 183,
        "url": "/assets/plugins/image/00eb919dff344b978a88fbbe0d1799e1.jpg"
      },
      "date": 1703810887815
    },
    {
      "type": "edit",
      "id": "b1c759db9a2e7909",
      "item": {
        "type": "image",
        "id": "b1c759db9a2e7909",
        "text": "Kenneth Finnegan",
        "size": "thumbnail",
        "width": 183,
        "height": 183,
        "url": "/assets/plugins/image/00eb919dff344b978a88fbbe0d1799e1.jpg"
      },
      "date": 1703810927298
    },
    {
      "id": "b1c759db9a2e7909",
      "type": "move",
      "order": [
        "b1c759db9a2e7909",
        "3a6b455a0798cbde",
        "0147aefb1933d342",
        "f803ed91a5d32a0a"
      ],
      "date": 1703810934426
    },
    {
      "type": "edit",
      "id": "f803ed91a5d32a0a",
      "item": {
        "type": "html",
        "id": "f803ed91a5d32a0a",
        "text": "<p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/747/768/709/737/small/cfdd9e585293f37f.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/747/768/709/737/original/cfdd9e585293f37f.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/747/768/709/737/small/cfdd9e585293f37f.png 554w\" alt=\"End view of the optical duplex LC connector on the QSFP\" title=\"End view of the optical duplex LC connector on the QSFP\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>First comes off the ejection bail. I guess we're committed now since that was rather destructive.Two tiny screws get us into the case. The grey putty stuff is thermal gap filler, which couples each part that puts off heat to the case for cooling.Think of it like thermal paste, but it's designed to be thick and span a gap instead of just be a thin film.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/753/339/482/959/small/ebf820b4b83c8388.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/753/339/482/959/original/ebf820b4b83c8388.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/753/339/482/959/small/ebf820b4b83c8388.png 554w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/755/421/054/630/small/a2908ce3dea7a2de.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/755/421/054/630/original/a2908ce3dea7a2de.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/755/421/054/630/small/a2908ce3dea7a2de.png 554w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>Lifting the electrical assembly out of the other half of the metal case, we can start pointing out the major points of interest.TOSA/ROSA - transmit/ receive optical sub assemblies are where the laser magic happen.The retimers help 4x25G get to the switch via the QSFP connector</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/762/225/618/490/small/ea1b571847bca457.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/762/225/618/490/original/ea1b571847bca457.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/762/225/618/490/small/ea1b571847bca457.png 554w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/763/592/507/948/small/5d01d89d4251da14.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/763/592/507/948/original/5d01d89d4251da14.png 1135w, https://social.afront.org/system/media_attachments/files/109/492/763/592/507/948/small/5d01d89d4251da14.png 593w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>The TOSA and ROSA both need to handle four wavelengths of light moving 25Gbps each, so they're actually connected to the PCB with two layers of ribbon cables. One of the ribbons is just for the 4x25Gbps data channels, and the other is for power, biasing, etc, not high speed stuff to run the OSA parts.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/773/591/097/703/small/0f6b866118472fe9.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/773/591/097/703/original/0f6b866118472fe9.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/773/591/097/703/small/0f6b866118472fe9.png 554w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>Looking on the other side of the whole assembly, the largest IC in the middle (the silver one)  is the microcontroller that talks to the switch over an I2C bus to report telemetry and ID information, and pretty much everything else is voltage regulation for taking the 3.3V from the switch and regulating it down to lower voltages to drive the lasers.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/781/247/411/287/small/995702dcb5787700.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/781/247/411/287/original/995702dcb5787700.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/781/247/411/287/small/995702dcb5787700.png 554w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>And that microcontroller that runs the whole show is... a Cortex M3! An STM32F103C6 with 32kB of flash, 10kB of SRAM, and can run at up to 72MHz.Meaning that this optic has more compute power than many early home computers.You'll note that the ST microcontroller is silver, as are a few other ICs on this optic. This is actually a cost saving measure called \"flip chip\" packaging, where they don't waste the expense of the black plastic packaging and solder the silicon die straight down onto the board like it was a QFN. Absolutely wild.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/789/535/292/969/small/96b61475db06a11d.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/789/535/292/969/original/96b61475db06a11d.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/789/535/292/969/small/96b61475db06a11d.png 554w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/790/186/997/662/small/0a13e95f73fcb9fe.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/790/186/997/662/original/0a13e95f73fcb9fe.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/790/186/997/662/small/0a13e95f73fcb9fe.png 554w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>While it's fun to think about malware on the ARM core in these, the data path is WAY faster than the Cortex M3 can handle. It's entirely an out-of-band manager of the electronics with no idea of what is going on in the Ethernet link itself.That being said, some newer optics really DO have interactions in the data path. The most notable is the speed-changing optics which allow modern Ethernet switches (which only support 10G/25G/50G on their front panel ports) to still link up with a 1G Ethernet peer. The optic does the 10:1 speed change and implements clause 37 autoneg entirely inside the optic.Granted, the firmware on optics actually *IS* field writable. I've coordinated with an optics vendor in the past to help a customer apply a firmware patch to 10,000 optics installed in Arista switches in the field by issuing the right magic sequence of write commands over the I2C bus from EOS.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/807/799/609/729/small/bc8fcb4c86d6c9cd.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/807/799/609/729/original/bc8fcb4c86d6c9cd.png 1191w, https://social.afront.org/system/media_attachments/files/109/492/807/799/609/729/small/bc8fcb4c86d6c9cd.png 854w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>Remember how I said the rest of the parts were mostly voltage regulation?Voltage regulators usually need some kind of inductance... so just saying... prime cute coil of wire opportunity.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/826/884/033/119/small/1d85e6d5667e20f8.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/826/884/033/119/original/1d85e6d5667e20f8.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/826/884/033/119/small/1d85e6d5667e20f8.png 554w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/827/607/589/422/small/3264119739a90054.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/827/607/589/422/original/3264119739a90054.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/827/607/589/422/small/3264119739a90054.png 555w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>So this is where things get REAL ugly... we break out the Dremel and cut the lid off the TOSA (Transmit Optical Sub Assembly) to expose the yummy optical bits inside it.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/874/750/661/588/small/e3ed4592bed6cc9e.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/874/750/661/588/original/e3ed4592bed6cc9e.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/874/750/661/588/small/e3ed4592bed6cc9e.png 554w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>Remember that while there's four different waves for the four 25Gbps streams, 100G-LR4 runs over a single duplex pair of fibers, so all four optical signals need to make it out a single strand of fiber, so... PRISMS.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/901/287/562/002/small/8541e45da2923e4a.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/901/287/562/002/original/8541e45da2923e4a.png 1663w, https://social.afront.org/system/media_attachments/files/109/492/901/287/562/002/small/8541e45da2923e4a.png 554w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/901/583/079/007/small/3091dea7c585c66e.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/901/583/079/007/original/3091dea7c585c66e.png 1659w, https://social.afront.org/system/media_attachments/files/109/492/901/583/079/007/small/3091dea7c585c66e.png 675w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>The colors are all way out in the infrared, so don't put too much stock in the colors I use in the picture, but hopefully you get the point about how the prisms are used as optical combiners.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/916/500/212/129/small/66897178d70d62d1.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/916/500/212/129/original/66897178d70d62d1.png 1232w, https://social.afront.org/system/media_attachments/files/109/492/916/500/212/129/small/66897178d70d62d1.png 740w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>The keen eye will also notice that some of the Dremel debris from me cutting open the TOSA is... stuck to this cube and fuzzy... like it's magnetic...And it it. That is a tiny magnet in the middle of the optical path, but why?Physics talk. Remember that the transmitters here are lasers, which mean that the four lasers on the right are each their own resonant cavity, which leaks a fraction of the light to be useful. But if there was some kind of partial reflection out in the fiber somewhere, this could cause problems and destabilize these lasers, so we would like some way to let light OUT of the TOSA without letting any reflected light back into the lasers to cause problems, so we make an optical one-way valve...MORE PHYSICS TALK: Light is a perpendicular E-M field, so if you used a vertical polarizer, and then passed the light through a magnetic field to rotate the polarization 45 degrees to line up with a //// diagonal polarizing filter on the other side of the magnet...Think about the reverse path. //// polarizing filter, 45 degree rotation, horizontal light hitting a vertical polarizing filtering. BLOCKED.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/920/666/166/239/small/f84029881255679e.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/920/666/166/239/original/f84029881255679e.png 1149w, https://social.afront.org/system/media_attachments/files/109/492/920/666/166/239/small/f84029881255679e.png 650w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>Putting the TOSA under my microscope, we can start to see some more of the finer details.This is rotated from the last photos.I'm not convinced whether the two missing lenses in the middle broke off before I got it, broke off while I was hacking my way into the package, or were just never there. A mystery for the ages.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/492/991/378/825/132/small/a55c119666b75ec4.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/492/991/378/825/132/original/a55c119666b75ec4.png 1924w, https://social.afront.org/system/media_attachments/files/109/492/991/378/825/132/small/a55c119666b75ec4.png 641w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>For one thing, we see a tiny square and two bond wires landing on the platform holding the lasers and the first stage of the optics.This is a silicon diode. Fun diode fact: the junction voltage of a diode changes with temperature in a very predictable and consistent way, so it's very common for temperature sensors to measure the junction voltage of a diode or base of a transistor.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/009/179/901/095/small/9f5d8ada959de600.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/009/179/901/095/original/9f5d8ada959de600.png 960w, https://social.afront.org/system/media_attachments/files/109/493/009/179/901/095/small/9f5d8ada959de600.png 448w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>And a temperature sensor would imply some kind of temperature control, and this actually makes a lot of sense, because the four lasers are all different colors, but only SLIGHTLY different colors.Each of the four lasers are only 4.5nm apart in wavelength, so the temperature really matters to keep them in their channel, so there's a peltier cooler underneath the platform holding the lasers and first optical stage so that the optic can electrically heat or cool the lasers to keep them at the right temperature! https://en.wikipedia.org/wiki/Thermoelectric_cooling</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/056/345/309/490/small/88a8efe5e014c7d7.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/056/345/309/490/original/88a8efe5e014c7d7.png 930w, https://social.afront.org/system/media_attachments/files/109/493/056/345/309/490/small/88a8efe5e014c7d7.png 449w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>The ROSA is somewhat less interesting. The right half seems to be a giant prism and I wasn't able to get it apart to any useful degree.The glassy fractures on it are from me trying to pry it out.</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/109/696/121/703/small/e89172a0c30394b8.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/109/696/121/703/original/e89172a0c30394b8.png 1966w, https://social.afront.org/system/media_attachments/files/109/493/109/696/121/703/small/e89172a0c30394b8.png 655w\" lang=\"en\" sizes=\"494px\"></p>\n\n<p>The four receive diodes on the left of the ROSA are facing up, which is perpendicular from the light coming in from the right, so the final stage of the ROSA optics were glued as a bridge with four little lenses and a right angle PRISM!</p><p><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/116/813/072/387/small/f977708d22a424a6.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/116/813/072/387/original/f977708d22a424a6.png 1247w, https://social.afront.org/system/media_attachments/files/109/493/116/813/072/387/small/f977708d22a424a6.png 415w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/117/571/536/745/small/23ff06917f8ded92.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/117/571/536/745/original/23ff06917f8ded92.png 1247w, https://social.afront.org/system/media_attachments/files/109/493/117/571/536/745/small/23ff06917f8ded92.png 415w\" lang=\"en\" sizes=\"247px\"></p>\n\n<p>So lastly, here are some more photos of the PCB that runs from the QSFP edge connector to the ribbon cables attached to the ROSA and TOSA.   /finThanks for reading. For those new here, I have a Liberapay which I'm using to fund the #MicroMirror project where I'm trying to fix Linux/free software distribution to users. https://liberapay.com/phirephly/</p><p><img width=100% draggable=\"false\" class=\"emojione\" alt=\"🧵\" title=\":thread:\" src=\"/emoji/1f9f5.svg\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/122/167/535/572/small/894dc5c1b7852f7c.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/122/167/535/572/original/894dc5c1b7852f7c.png 1925w, https://social.afront.org/system/media_attachments/files/109/493/122/167/535/572/small/894dc5c1b7852f7c.png 642w\" lang=\"en\" sizes=\"247px\"><br><br><img width=100% class=\"letterbox\" src=\"https://social.afront.org/system/media_attachments/files/109/493/122/768/094/207/small/7bf0305f585d8b43.png\" srcset=\"https://social.afront.org/system/media_attachments/files/109/493/122/768/094/207/original/7bf0305f585d8b43.png 1923w, https://social.afront.org/system/media_attachments/files/109/493/122/768/094/207/small/7bf0305f585d8b43.png 640w\" lang=\"en\" sizes=\"247px\"></p>\n\n"
      },
      "date": 1703811015491
    },
    {
      "type": "add",
      "id": "28328496a6a90076",
      "item": {
        "type": "paragraph",
        "id": "28328496a6a90076",
        "text": "100G-LR4 is a QSFP28 optic that runs over a duplex pair of single mode fiber, so it takes 4 lanes of 25G from the switch, modulates 4 different colors of light, and combines them together over a single strand to the other end up to 10km away."
      },
      "after": "3a6b455a0798cbde",
      "date": 1703811036740
    },
    {
      "id": "0147aefb1933d342",
      "type": "move",
      "order": [
        "b1c759db9a2e7909",
        "3a6b455a0798cbde",
        "28328496a6a90076",
        "f803ed91a5d32a0a",
        "0147aefb1933d342"
      ],
      "date": 1703811061498
    },
    {
      "item": {
        "type": "factory",
        "id": "4ed0d4de971fd113"
      },
      "id": "4ed0d4de971fd113",
      "type": "add",
      "after": "0147aefb1933d342",
      "date": 1703811073821
    },
    {
      "type": "edit",
      "id": "4ed0d4de971fd113",
      "item": {
        "type": "paragraph",
        "id": "4ed0d4de971fd113",
        "text": "Text and images extracted from Mastodon thread using code in the browser's debugger window. This then cleaned up a bit with global replace commands in the programming text editor."
      },
      "date": 1703811157832
    },
    {
      "id": "4ed0d4de971fd113",
      "type": "move",
      "order": [
        "b1c759db9a2e7909",
        "3a6b455a0798cbde",
        "28328496a6a90076",
        "f803ed91a5d32a0a",
        "4ed0d4de971fd113",
        "0147aefb1933d342"
      ],
      "date": 1703811160735
    },
    {
      "type": "add",
      "id": "ae011308f112d678",
      "item": {
        "type": "paragraph",
        "id": "ae011308f112d678",
        "text": "One of my nice friends at Hurricane Electric gave me a dead 100G-LR4 optic to tear apart for your entertainment, so for the sake of your entertainment, lets dig into it."
      },
      "after": "3a6b455a0798cbde",
      "date": 1703811284492
    },
    {
      "type": "edit",
      "id": "3a6b455a0798cbde",
      "item": {
        "type": "paragraph",
        "id": "3a6b455a0798cbde",
        "text": "Required reading if you do any networking at any speed. The thread is full of fantastic pictures and brilliant explanations. [https://social.afront.org/@kwf/109492743645650432 post] [https://mastodon.radio/@mahtin@mastodon.cloud/111658621940589896 boost]"
      },
      "date": 1703812205555
    },
    {
      "type": "edit",
      "id": "3a6b455a0798cbde",
      "item": {
        "type": "paragraph",
        "id": "3a6b455a0798cbde",
        "text": "Required reading if you do any networking at any speed. The thread is full of fantastic pictures and brilliant explanations. [https://mastodon.radio/@mahtin@mastodon.cloud/111658621940589896 boost]"
      },
      "date": 1703812224300
    },
    {
      "type": "edit",
      "id": "ae011308f112d678",
      "item": {
        "type": "paragraph",
        "id": "ae011308f112d678",
        "text": "One of my nice friends at Hurricane Electric gave me a dead 100G-LR4 optic to tear apart for your entertainment, so for the sake of your entertainment, lets dig into it. [[https://social.afront.org/@kwf/109492743645650432 post]"
      },
      "date": 1703812236326
    },
    {
      "type": "edit",
      "id": "ae011308f112d678",
      "item": {
        "type": "paragraph",
        "id": "ae011308f112d678",
        "text": "One of my nice friends at Hurricane Electric gave me a dead 100G-LR4 optic to tear apart for your entertainment, so for the sake of your entertainment, lets dig into it. \n [https://social.afront.org/@kwf/109492743645650432 post]"
      },
      "date": 1703812244529
    },
    {
      "type": "edit",
      "id": "ae011308f112d678",
      "item": {
        "type": "paragraph",
        "id": "ae011308f112d678",
        "text": "One of my nice friends at Hurricane Electric gave me a dead 100G-LR4 optic to tear apart for your entertainment so lets dig into it. \n [https://social.afront.org/@kwf/109492743645650432 post]"
      },
      "date": 1703812279726
    },
    {
      "type": "fork",
      "site": "found.ward.fed.wiki",
      "date": 1703824845922
    },
    {
      "type": "fork",
      "site": "localhost:3000",
      "date": 1703943069968
    }
  ]
}