{
  "title": "Download to Upload",
  "story": [
    {
      "type": "paragraph",
      "id": "1cd94a3939962d2d",
      "text": "HTML scripts run within the Frame plugin sandbox can read information from various lineup resources but do not have any mechanism to save results. We recommend scripts offer a button to download results to be then immediately uploaded to an associated Assets folder."
    },
    {
      "type": "paragraph",
      "id": "6de684ff76a53567",
      "text": "This is particularly handy when a computation takes many seconds reading pages and rolling up summary results as a json file to be used elsewhere."
    },
    {
      "type": "markdown",
      "id": "b9cd7629f220c2b0",
      "text": "# Method"
    },
    {
      "type": "paragraph",
      "id": "7317c06b1211a8b3",
      "text": "Write an html page with javascript code within the <script> tag. Include a <div> for summary results and <button> tags for starting computations and then downloading results."
    },
    {
      "type": "html",
      "id": "4c52bb6caf3ffb11",
      "text": "<p>\n<button>preview</button>\n<button>download</button>\n</p>"
    },
    {
      "type": "paragraph",
      "id": "86148a576ece7c90",
      "text": "Use Frame plugin messages to access parameters. Use <script type=module> and await to simplify these interactions."
    },
    {
      "type": "paragraph",
      "id": "b85f493faf15612e",
      "text": "See [[About Frame Integrations]]"
    },
    {
      "type": "paragraph",
      "id": "4aa13e48ee62ff3e",
      "text": "Download computed results using the obscure but well accepted technique of attaching a dataurl to an anchor tag and programmatically clicking it."
    },
    {
      "type": "code",
      "id": "1cdc71bee3ce7bf0",
      "text": "function download(obj, file) {\n  let code = encodeURIComponent(JSON.stringify(obj))\n  let href = \"data:text/json;charset=utf-8,\"+code\n  let anchor = document.createElement('a')\n  anchor.setAttribute(\"href\", href)\n  anchor.setAttribute(\"download\", file)\n  document.body.appendChild(anchor) // for firefox\n  anchor.click()\n  anchor.remove()\n}"
    },
    {
      "type": "markdown",
      "id": "002e49a6f2f384a1",
      "text": "# Examples"
    },
    {
      "type": "paragraph",
      "id": "17c2afd885427784",
      "text": "In the wiki support for the sofi assessment method individuals will compose reports to be rolled up by the administrator once a week."
    },
    {
      "type": "reference",
      "id": "bbd9631228840888",
      "site": "sofi.dojo.fed.wiki",
      "slug": "administrator-assessment",
      "title": "Administrator Assessment",
      "text": "This page is where the administrator reviews and aggregates the assessments of Roster members."
    },
    {
      "type": "paragraph",
      "id": "8b74a1a96e710aca",
      "text": "Many scripts in the trails wiki benefit from having a rolled up summary of trail locations. Revising this json file is now part of the routine of adding new pages."
    },
    {
      "type": "reference",
      "id": "8d811edcffc864a7",
      "site": "trails.ward.asia.wiki.org",
      "slug": "places-detailed",
      "title": "Places Detailed",
      "text": "Scan trail pages for photograph or other notable locations marked on maps. Download revised marker.json to share from associated asset."
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "Download to Upload",
        "story": []
      },
      "date": 1630019798589
    },
    {
      "item": {
        "type": "factory",
        "id": "1cd94a3939962d2d"
      },
      "id": "1cd94a3939962d2d",
      "type": "add",
      "date": 1630019802287
    },
    {
      "type": "edit",
      "id": "1cd94a3939962d2d",
      "item": {
        "type": "paragraph",
        "id": "1cd94a3939962d2d",
        "text": "HTML scripts run within the Frame plugin sandbox can read information from various lineup resources but do not have any mechanism to save results. We recommend they offer a button to download results to be then immediately uploaded to an associated Assets folder."
      },
      "date": 1630020042808
    },
    {
      "type": "edit",
      "id": "1cd94a3939962d2d",
      "item": {
        "type": "paragraph",
        "id": "1cd94a3939962d2d",
        "text": "HTML scripts run within the Frame plugin sandbox can read information from various lineup resources but do not have any mechanism to save results. We recommend scripts offer a button to download results to be then immediately uploaded to an associated Assets folder."
      },
      "date": 1630020063948
    },
    {
      "type": "add",
      "id": "6de684ff76a53567",
      "item": {
        "type": "paragraph",
        "id": "6de684ff76a53567",
        "text": "This is particularly handy when a computation takes many seconds reading pages and rolling up summary results as a json file to be used elsewhere."
      },
      "after": "1cd94a3939962d2d",
      "date": 1630020160660
    },
    {
      "item": {
        "type": "factory",
        "id": "b9cd7629f220c2b0"
      },
      "id": "b9cd7629f220c2b0",
      "type": "add",
      "after": "6de684ff76a53567",
      "date": 1630020171943
    },
    {
      "type": "edit",
      "id": "b9cd7629f220c2b0",
      "item": {
        "type": "markdown",
        "id": "b9cd7629f220c2b0",
        "text": "# Method"
      },
      "date": 1630020213518
    },
    {
      "item": {
        "type": "factory",
        "id": "7317c06b1211a8b3"
      },
      "id": "7317c06b1211a8b3",
      "type": "add",
      "after": "b9cd7629f220c2b0",
      "date": 1630020396118
    },
    {
      "type": "edit",
      "id": "7317c06b1211a8b3",
      "item": {
        "type": "paragraph",
        "id": "7317c06b1211a8b3",
        "text": "Write an html page with javascript code within the <script> tag. Include a <div> for summary results and <button> tags for starting computations and then downloading results."
      },
      "date": 1630020594179
    },
    {
      "type": "add",
      "id": "86148a576ece7c90",
      "item": {
        "type": "paragraph",
        "id": "86148a576ece7c90",
        "text": "Use Frame messaging to interact with the lineup. See [[About Frame Plugin]]"
      },
      "after": "7317c06b1211a8b3",
      "date": 1630020640293
    },
    {
      "type": "edit",
      "id": "86148a576ece7c90",
      "item": {
        "type": "paragraph",
        "id": "86148a576ece7c90",
        "text": "Use Frame messaging to access parameters. See [[About Frame Integrations]]"
      },
      "date": 1630020684742
    },
    {
      "type": "edit",
      "id": "86148a576ece7c90",
      "item": {
        "type": "paragraph",
        "id": "86148a576ece7c90",
        "text": "Use Frame messaging to access parameters."
      },
      "date": 1630020691310
    },
    {
      "type": "add",
      "id": "b85f493faf15612e",
      "item": {
        "type": "paragraph",
        "id": "b85f493faf15612e",
        "text": "See [[About Frame Integrations]]"
      },
      "after": "86148a576ece7c90",
      "date": 1630020695423
    },
    {
      "type": "edit",
      "id": "86148a576ece7c90",
      "item": {
        "type": "paragraph",
        "id": "86148a576ece7c90",
        "text": "Use Frame plugin messages to access parameters. Use <script type=module> and await to simplify these interactions."
      },
      "date": 1630020760712
    },
    {
      "item": {
        "type": "factory",
        "id": "4c52bb6caf3ffb11"
      },
      "id": "4c52bb6caf3ffb11",
      "type": "add",
      "after": "b85f493faf15612e",
      "date": 1630020784926
    },
    {
      "type": "edit",
      "id": "4c52bb6caf3ffb11",
      "item": {
        "type": "html",
        "id": "4c52bb6caf3ffb11",
        "text": "<p>\n<button>preview</button>\n<button>download</button>\n</p>\n<div>\nresult 1<br>\nresult 2\n</div>"
      },
      "date": 1630020880877
    },
    {
      "type": "edit",
      "id": "4c52bb6caf3ffb11",
      "item": {
        "type": "html",
        "id": "4c52bb6caf3ffb11",
        "text": "<p>\n<button>preview</button>\n<button>download</button>\n</p>"
      },
      "date": 1630020891939
    },
    {
      "id": "4c52bb6caf3ffb11",
      "type": "move",
      "order": [
        "1cd94a3939962d2d",
        "6de684ff76a53567",
        "b9cd7629f220c2b0",
        "7317c06b1211a8b3",
        "4c52bb6caf3ffb11",
        "86148a576ece7c90",
        "b85f493faf15612e"
      ],
      "date": 1630020897700
    },
    {
      "type": "add",
      "id": "4aa13e48ee62ff3e",
      "item": {
        "type": "paragraph",
        "id": "4aa13e48ee62ff3e",
        "text": "Download computed results using the obscure but well accepted technique of attaching a dataurl to an anchor tag and programmatically clicking it."
      },
      "after": "b85f493faf15612e",
      "date": 1630021292903
    },
    {
      "item": {
        "type": "factory",
        "id": "1cdc71bee3ce7bf0"
      },
      "id": "1cdc71bee3ce7bf0",
      "type": "add",
      "after": "4aa13e48ee62ff3e",
      "date": 1630021298586
    },
    {
      "type": "edit",
      "id": "1cdc71bee3ce7bf0",
      "item": {
        "type": "code",
        "id": "1cdc71bee3ce7bf0",
        "text": "  function download(string, file) {\n    var data = \"data:text/json;charset=utf-8,\" + encodeURIComponent(string);\n    var anchor = document.createElement('a');\n    anchor.setAttribute(\"href\",     data);\n    anchor.setAttribute(\"download\", file);\n    document.body.appendChild(anchor); // required for firefox\n    anchor.click();\n    anchor.remove();\n  }"
      },
      "date": 1630021306424
    },
    {
      "type": "edit",
      "id": "1cdc71bee3ce7bf0",
      "item": {
        "type": "code",
        "id": "1cdc71bee3ce7bf0",
        "text": "function download(object, file) {\n  let encoded = encodeURIComponent(JSON.stringify(object))\n  let href = \"data:text/json;charset=utf-8,\" + encoded;\n  let anchor = document.createElement('a');\n  anchor.setAttribute(\"href\", href)\n  anchor.setAttribute(\"download\", file);\n  document.body.appendChild(anchor); // for firefox\n  anchor.click();\n  anchor.remove();\n}"
      },
      "date": 1630021588055
    },
    {
      "type": "edit",
      "id": "1cdc71bee3ce7bf0",
      "item": {
        "type": "code",
        "id": "1cdc71bee3ce7bf0",
        "text": "function download(obj, file) {\n  let code = encodeURIComponent(JSON.stringify(obj))\n  let href = \"data:text/json;charset=utf-8,\"+code\n  let anchor = document.createElement('a')\n  anchor.setAttribute(\"href\", href)\n  anchor.setAttribute(\"download\", file)\n  document.body.appendChild(anchor) // for firefox\n  anchor.click()\n  anchor.remove()\n}"
      },
      "date": 1630021669319
    },
    {
      "item": {
        "type": "factory",
        "id": "002e49a6f2f384a1"
      },
      "id": "002e49a6f2f384a1",
      "type": "add",
      "after": "1cdc71bee3ce7bf0",
      "date": 1630021976119
    },
    {
      "type": "edit",
      "id": "002e49a6f2f384a1",
      "item": {
        "type": "markdown",
        "id": "002e49a6f2f384a1",
        "text": "# Examples"
      },
      "date": 1630021989662
    },
    {
      "item": {
        "type": "factory",
        "id": "17c2afd885427784"
      },
      "id": "17c2afd885427784",
      "type": "add",
      "after": "002e49a6f2f384a1",
      "date": 1630022006185
    },
    {
      "type": "edit",
      "id": "17c2afd885427784",
      "item": {
        "type": "paragraph",
        "id": "17c2afd885427784",
        "text": "In the wiki support for the sofi assessment method individuals will compose reports to be rolled up by the administrator once a week."
      },
      "date": 1630022093104
    },
    {
      "item": {
        "type": "factory",
        "id": "bbd9631228840888"
      },
      "id": "bbd9631228840888",
      "type": "add",
      "after": "17c2afd885427784",
      "date": 1630022095236
    },
    {
      "type": "edit",
      "id": "bbd9631228840888",
      "item": {
        "type": "reference",
        "id": "bbd9631228840888",
        "site": "sofi.dojo.fed.wiki",
        "slug": "administrator-assessment",
        "title": "Administrator Assessment",
        "text": "This page is where the administrator reviews and aggregates the assessments of Roster members."
      },
      "date": 1630022097831
    },
    {
      "item": {
        "type": "factory",
        "id": "8b74a1a96e710aca"
      },
      "id": "8b74a1a96e710aca",
      "type": "add",
      "after": "bbd9631228840888",
      "date": 1630022339386
    },
    {
      "type": "edit",
      "id": "8b74a1a96e710aca",
      "item": {
        "type": "paragraph",
        "id": "8b74a1a96e710aca",
        "text": "Many scripts in the trails wiki benefit from having a rolled up summary of trail locations. Revising this json file is now part of the routine of adding new pages."
      },
      "date": 1630022432820
    },
    {
      "item": {
        "type": "factory",
        "id": "8d811edcffc864a7"
      },
      "id": "8d811edcffc864a7",
      "type": "add",
      "after": "8b74a1a96e710aca",
      "date": 1630022436050
    },
    {
      "type": "edit",
      "id": "8d811edcffc864a7",
      "item": {
        "type": "reference",
        "id": "8d811edcffc864a7",
        "site": "trails.ward.asia.wiki.org",
        "slug": "places-detailed",
        "title": "Places Detailed",
        "text": "Scan trail pages for photograph or other notable locations marked on maps."
      },
      "date": 1630022446126
    },
    {
      "type": "edit",
      "id": "8d811edcffc864a7",
      "item": {
        "type": "reference",
        "id": "8d811edcffc864a7",
        "site": "trails.ward.asia.wiki.org",
        "slug": "places-detailed",
        "title": "Places Detailed",
        "text": "Scan trail pages for photograph or other notable locations marked on maps. Download revised marker.json to be share from this Asset."
      },
      "date": 1630022540584
    },
    {
      "type": "edit",
      "id": "8d811edcffc864a7",
      "item": {
        "type": "reference",
        "id": "8d811edcffc864a7",
        "site": "trails.ward.asia.wiki.org",
        "slug": "places-detailed",
        "title": "Places Detailed",
        "text": "Scan trail pages for photograph or other notable locations marked on maps. Download revised marker.json to share from associated Asset."
      },
      "date": 1637165069787
    },
    {
      "type": "edit",
      "id": "8d811edcffc864a7",
      "item": {
        "type": "reference",
        "id": "8d811edcffc864a7",
        "site": "trails.ward.asia.wiki.org",
        "slug": "places-detailed",
        "title": "Places Detailed",
        "text": "Scan trail pages for photograph or other notable locations marked on maps. Download revised marker.json to share from associated asset."
      },
      "date": 1637165083051
    },
    {
      "type": "fork",
      "site": "work.fed.wiki",
      "date": 1650002327938
    }
  ]
}