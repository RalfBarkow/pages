{
  "title": "wiki.nix @wiki.ralfbarkow.ch",
  "story": [
    {
      "type": "reference",
      "id": "6a1ce7260a1c07ab",
      "site": "wiki.ralfbarkow.ch",
      "slug": "wiki-0321",
      "title": "wiki-0.32.1",
      "text": "⇐ [[Wiki Update - August 2023]]. [https://matrix.to/#/!ORfrUEFeWFcHAMLFLr:matrix.org/$169271341716756UYyRE:matrix.org?via=matrix.org&via=matrix.allmende.io&via=chat.weho.st matrix],  [https://goals.pod.rodwell.me/wiki-update---august-2023.html page]"
    },
    {
      "type": "reference",
      "id": "c4167460b5203804",
      "site": "wiki.ralfbarkow.ch",
      "slug": "node2nix",
      "title": "node2nix",
      "text": "Deploy NPM Package Manager (NPM) packages with the Nix package manager."
    },
    {
      "type": "code",
      "id": "6812f7c368ef3f79",
      "text": "node2nix -18"
    },
    {
      "type": "code",
      "id": "cdd47459e6cc4c6c",
      "text": "nix-build -A package"
    },
    {
      "type": "code",
      "id": "7deb71e401f81aae",
      "text": "result -> /nix/store/m3lxz0v7s6xrcqlgr5j4m52h97814isj-wiki-0.32.1/"
    },
    {
      "type": "paragraph",
      "id": "fbdb4809297cc70e",
      "text": "wiki.nix @wiki.ralfbarkow.ch"
    },
    {
      "type": "code",
      "id": "ea21e55d9fac26ad",
      "text": "systemd.services.wiki = {\n    wantedBy = [ \"multi-user.target\" ];\n    after = [ \"network.target\" ];\n    description = \"Federated Wiki (Node.js server version)\";\n    serviceConfig = {\n      Type = \"simple\";\n      User = \"rgb\";\n\n      # /nix/store/ivkarn12ik9ph0wdy8978yaz4ilf55bb-node_wiki-0.27.0\n      # /nix/store/slqw5nwaz3gv8ifgg0xpj5v0qy902c1p-node_wiki-0.28.1\n      # /nix/store/gn0rv30xzh6rn8s9azjww2zdsh7s5x6b-wiki-0.30.0/\n      # /nix/store/9wqk0wkyv2ilrjx76y17y4aqbrfh7spx-wiki-0.31.0/\n      # /nix/store/m3lxz0v7s6xrcqlgr5j4m52h97814isj-wiki-0.32.1/\n\n      ExecStart =\n        \"/nix/store/m3lxz0v7s6xrcqlgr5j4m52h97814isj-wiki-0.32.1/bin/wiki --config /home/rgb/.wiki/config.json\";\n      Restart = \"on-failure\";\n\n    };\n"
    },
    {
      "type": "paragraph",
      "id": "282392924c3ab4f3",
      "text": "ssh root@…"
    },
    {
      "type": "code",
      "id": "ec8808d1c37d0410",
      "text": "nixos-rebuild test"
    },
    {
      "type": "code",
      "id": "f6320d91b7dad27e",
      "text": "systemctl restart wiki"
    },
    {
      "type": "code",
      "id": "5bf0625382c88296",
      "text": "journalctl -r -u wiki"
    },
    {
      "type": "code",
      "id": "32df5ac8b9c4d3fb",
      "text": "nixos-rebuild switch"
    },
    {
      "type": "pagefold",
      "id": "51ac58ab385d0666",
      "text": "~"
    },
    {
      "type": "reference",
      "id": "d232557d2edc6fd4",
      "site": "wiki.ralfbarkow.ch",
      "slug": "wikinix-dreyeckch",
      "title": "wiki.nix @dreyeck.ch",
      "text": "See NixOS manual \"Definition of systemd service units\" [https://nixos.org/manual/nixos/stable/options#opt-systemd.services page], systemd.service [https://www.freedesktop.org/software/systemd/man/systemd.service.html page], and \"Execution environment configuration\" (Paths) [https://www.freedesktop.org/software/systemd/man/systemd.exec.html#Paths page] for details."
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "wiki.nix @wiki.ralfbarkow.ch",
        "story": []
      },
      "date": 1699467036277
    },
    {
      "item": {
        "type": "factory",
        "id": "d232557d2edc6fd4"
      },
      "id": "d232557d2edc6fd4",
      "type": "add",
      "date": 1699467038006
    },
    {
      "type": "edit",
      "id": "d232557d2edc6fd4",
      "item": {
        "type": "reference",
        "id": "d232557d2edc6fd4",
        "site": "wiki.ralfbarkow.ch",
        "slug": "wikinix-dreyeckch",
        "title": "wiki.nix @dreyeck.ch",
        "text": "See NixOS manual \"Definition of systemd service units\" [https://nixos.org/manual/nixos/stable/options#opt-systemd.services page], systemd.service [https://www.freedesktop.org/software/systemd/man/systemd.service.html page], and \"Execution environment configuration\" (Paths) [https://www.freedesktop.org/software/systemd/man/systemd.exec.html#Paths page] for details."
      },
      "date": 1699467040176
    },
    {
      "item": {
        "type": "factory",
        "id": "51ac58ab385d0666"
      },
      "id": "51ac58ab385d0666",
      "type": "add",
      "after": "d232557d2edc6fd4",
      "date": 1699467044007
    },
    {
      "type": "edit",
      "id": "51ac58ab385d0666",
      "item": {
        "type": "pagefold",
        "id": "51ac58ab385d0666",
        "text": "~"
      },
      "date": 1699467048297
    },
    {
      "id": "51ac58ab385d0666",
      "type": "move",
      "order": [
        "51ac58ab385d0666",
        "d232557d2edc6fd4"
      ],
      "date": 1699467051549
    },
    {
      "item": {
        "type": "factory",
        "id": "6a1ce7260a1c07ab"
      },
      "id": "6a1ce7260a1c07ab",
      "type": "add",
      "after": "d232557d2edc6fd4",
      "date": 1699467095051
    },
    {
      "type": "edit",
      "id": "6a1ce7260a1c07ab",
      "item": {
        "type": "reference",
        "id": "6a1ce7260a1c07ab",
        "site": "wiki.ralfbarkow.ch",
        "slug": "wiki-0321",
        "title": "wiki-0.32.1",
        "text": "⇐ [[Wiki Update - August 2023]]. [https://matrix.to/#/!ORfrUEFeWFcHAMLFLr:matrix.org/$169271341716756UYyRE:matrix.org?via=matrix.org&via=matrix.allmende.io&via=chat.weho.st matrix],  [https://goals.pod.rodwell.me/wiki-update---august-2023.html page]"
      },
      "date": 1699467098342
    },
    {
      "id": "6a1ce7260a1c07ab",
      "type": "move",
      "order": [
        "6a1ce7260a1c07ab",
        "51ac58ab385d0666",
        "d232557d2edc6fd4"
      ],
      "date": 1699467100301
    },
    {
      "id": "7deb71e401f81aae",
      "type": "add",
      "item": {
        "type": "code",
        "id": "7deb71e401f81aae",
        "text": "result -> /nix/store/2hqk7zi1qmajlfhvblllxdfx5vadk8dn-wiki-0.32.1/"
      },
      "after": "6a1ce7260a1c07ab",
      "attribution": {
        "page": "wiki-0.32.1"
      },
      "date": 1699467107730
    },
    {
      "item": {
        "type": "paragraph",
        "id": "abf30d99015c889b",
        "text": ""
      },
      "id": "abf30d99015c889b",
      "type": "add",
      "after": "d232557d2edc6fd4",
      "date": 1699467222365
    },
    {
      "type": "remove",
      "id": "abf30d99015c889b",
      "date": 1699467223710
    },
    {
      "item": {
        "type": "code",
        "id": "ea21e55d9fac26ad",
        "text": "systemd.services.wiki = {\n    wantedBy = [ \"multi-user.target\" ];\n    after = [ \"network.target\" ];\n    description = \"Federated Wiki (Node.js server version)\";\n    serviceConfig = {\n      Type = \"simple\";\n      User = \"rgb\";\n\n      # /nix/store/ivkarn12ik9ph0wdy8978yaz4ilf55bb-node_wiki-0.27.0\n      # /nix/store/slqw5nwaz3gv8ifgg0xpj5v0qy902c1p-node_wiki-0.28.1\n      # /nix/store/gn0rv30xzh6rn8s9azjww2zdsh7s5x6b-wiki-0.30.0/\n      # /nix/store/9wqk0wkyv2ilrjx76y17y4aqbrfh7spx-wiki-0.31.0/\n      # /nix/store/2hqk7zi1qmajlfhvblllxdfx5vadk8dn-wiki-0.32.1/\n\n      ExecStart =\n        \"/nix/store/2hqk7zi1qmajlfhvblllxdfx5vadk8dn-wiki-0.32.1/bin/wiki --config /home/rgb/.wiki/config.json\";\n      Restart = \"on-failure\";\n\n    };"
      },
      "id": "ea21e55d9fac26ad",
      "type": "add",
      "after": "d232557d2edc6fd4",
      "date": 1699467224805
    },
    {
      "type": "edit",
      "id": "ea21e55d9fac26ad",
      "item": {
        "type": "code",
        "id": "ea21e55d9fac26ad",
        "text": "systemd.services.wiki = {\n    wantedBy = [ \"multi-user.target\" ];\n    after = [ \"network.target\" ];\n    description = \"Federated Wiki (Node.js server version)\";\n    serviceConfig = {\n      Type = \"simple\";\n      User = \"rgb\";\n\n      # /nix/store/ivkarn12ik9ph0wdy8978yaz4ilf55bb-node_wiki-0.27.0\n      # /nix/store/slqw5nwaz3gv8ifgg0xpj5v0qy902c1p-node_wiki-0.28.1\n      # /nix/store/gn0rv30xzh6rn8s9azjww2zdsh7s5x6b-wiki-0.30.0/\n      # /nix/store/9wqk0wkyv2ilrjx76y17y4aqbrfh7spx-wiki-0.31.0/\n      # /nix/store/2hqk7zi1qmajlfhvblllxdfx5vadk8dn-wiki-0.32.1/\n\n      ExecStart =\n        \"/nix/store/2hqk7zi1qmajlfhvblllxdfx5vadk8dn-wiki-0.32.1/bin/wiki --config /home/rgb/.wiki/config.json\";\n      Restart = \"on-failure\";\n\n    };"
      },
      "date": 1699467227215
    },
    {
      "id": "ea21e55d9fac26ad",
      "type": "move",
      "order": [
        "6a1ce7260a1c07ab",
        "7deb71e401f81aae",
        "ea21e55d9fac26ad",
        "51ac58ab385d0666",
        "d232557d2edc6fd4"
      ],
      "date": 1699467229411
    },
    {
      "item": {
        "type": "paragraph",
        "id": "fbdb4809297cc70e",
        "text": "wiki.nix @wiki.ralfbarkow.ch"
      },
      "id": "fbdb4809297cc70e",
      "type": "add",
      "after": "d232557d2edc6fd4",
      "date": 1699467233551
    },
    {
      "id": "fbdb4809297cc70e",
      "type": "move",
      "order": [
        "6a1ce7260a1c07ab",
        "7deb71e401f81aae",
        "fbdb4809297cc70e",
        "ea21e55d9fac26ad",
        "51ac58ab385d0666",
        "d232557d2edc6fd4"
      ],
      "date": 1699467236250
    },
    {
      "type": "edit",
      "id": "fbdb4809297cc70e",
      "item": {
        "type": "paragraph",
        "id": "fbdb4809297cc70e",
        "text": "wiki.nix @wiki.ralfbarkow.ch"
      },
      "date": 1699467248412
    },
    {
      "item": {
        "type": "paragraph",
        "id": "282392924c3ab4f3",
        "text": "ssh root@…"
      },
      "id": "282392924c3ab4f3",
      "type": "add",
      "after": "d232557d2edc6fd4",
      "date": 1699467309280
    },
    {
      "type": "edit",
      "id": "282392924c3ab4f3",
      "item": {
        "type": "paragraph",
        "id": "282392924c3ab4f3",
        "text": "ssh root@…"
      },
      "date": 1699467321324
    },
    {
      "id": "282392924c3ab4f3",
      "type": "move",
      "order": [
        "6a1ce7260a1c07ab",
        "7deb71e401f81aae",
        "fbdb4809297cc70e",
        "ea21e55d9fac26ad",
        "282392924c3ab4f3",
        "51ac58ab385d0666",
        "d232557d2edc6fd4"
      ],
      "date": 1699467324424
    },
    {
      "item": {
        "type": "paragraph",
        "id": "cecb1bf570cb0e3f",
        "text": ""
      },
      "id": "cecb1bf570cb0e3f",
      "type": "add",
      "after": "d232557d2edc6fd4",
      "date": 1699467349179
    },
    {
      "type": "remove",
      "id": "cecb1bf570cb0e3f",
      "date": 1699467350750
    },
    {
      "item": {
        "type": "code",
        "id": "ec8808d1c37d0410",
        "text": "nixos-rebuild test"
      },
      "id": "ec8808d1c37d0410",
      "type": "add",
      "after": "d232557d2edc6fd4",
      "date": 1699467352265
    },
    {
      "type": "edit",
      "id": "ec8808d1c37d0410",
      "item": {
        "type": "code",
        "id": "ec8808d1c37d0410",
        "text": "nixos-rebuild test"
      },
      "date": 1699467354230
    },
    {
      "id": "ec8808d1c37d0410",
      "type": "move",
      "order": [
        "6a1ce7260a1c07ab",
        "7deb71e401f81aae",
        "fbdb4809297cc70e",
        "ea21e55d9fac26ad",
        "282392924c3ab4f3",
        "ec8808d1c37d0410",
        "51ac58ab385d0666",
        "d232557d2edc6fd4"
      ],
      "date": 1699467356046
    },
    {
      "item": {
        "type": "code",
        "id": "f6320d91b7dad27e",
        "text": "systemctl restart wiki"
      },
      "id": "f6320d91b7dad27e",
      "type": "add",
      "after": "d232557d2edc6fd4",
      "date": 1699467363891
    },
    {
      "type": "edit",
      "id": "f6320d91b7dad27e",
      "item": {
        "type": "code",
        "id": "f6320d91b7dad27e",
        "text": "systemctl restart wiki"
      },
      "date": 1699467365948
    },
    {
      "id": "f6320d91b7dad27e",
      "type": "move",
      "order": [
        "6a1ce7260a1c07ab",
        "7deb71e401f81aae",
        "fbdb4809297cc70e",
        "ea21e55d9fac26ad",
        "282392924c3ab4f3",
        "ec8808d1c37d0410",
        "f6320d91b7dad27e",
        "51ac58ab385d0666",
        "d232557d2edc6fd4"
      ],
      "date": 1699467367460
    },
    {
      "item": {
        "type": "paragraph",
        "id": "34e03e35c0b95a4d"
      },
      "id": "34e03e35c0b95a4d",
      "type": "add",
      "after": "d232557d2edc6fd4",
      "date": 1699467381536,
      "error": {
        "type": "error",
        "msg": "",
        "response": "Forbidden"
      }
    },
    {
      "type": "remove",
      "id": "34e03e35c0b95a4d",
      "date": 1699467382761,
      "error": {
        "type": "error",
        "msg": "",
        "response": "Forbidden"
      }
    },
    {
      "item": {
        "type": "factory",
        "id": "5bf0625382c88296"
      },
      "id": "5bf0625382c88296",
      "type": "add",
      "after": "d232557d2edc6fd4",
      "date": 1699467384380,
      "error": {
        "type": "error",
        "msg": "",
        "response": "Forbidden"
      }
    },
    {
      "type": "edit",
      "id": "5bf0625382c88296",
      "item": {
        "type": "code",
        "id": "5bf0625382c88296",
        "text": "journalctl -r -u wiki"
      },
      "date": 1699467386906,
      "error": {
        "type": "error",
        "msg": "",
        "response": "Forbidden"
      }
    },
    {
      "id": "5bf0625382c88296",
      "type": "move",
      "order": [
        "6a1ce7260a1c07ab",
        "7deb71e401f81aae",
        "fbdb4809297cc70e",
        "ea21e55d9fac26ad",
        "282392924c3ab4f3",
        "ec8808d1c37d0410",
        "f6320d91b7dad27e",
        "5bf0625382c88296",
        "51ac58ab385d0666",
        "d232557d2edc6fd4"
      ],
      "date": 1699467389271,
      "error": {
        "type": "error",
        "msg": "",
        "response": "Forbidden"
      }
    },
    {
      "type": "fork",
      "date": 1699467396547,
      "error": {
        "type": "error",
        "msg": "",
        "response": "Forbidden"
      }
    },
    {
      "type": "fork",
      "date": 1699467456269
    },
    {
      "item": {
        "type": "factory",
        "id": "6812f7c368ef3f79"
      },
      "id": "6812f7c368ef3f79",
      "type": "add",
      "after": "d232557d2edc6fd4",
      "date": 1699467978321
    },
    {
      "type": "edit",
      "id": "6812f7c368ef3f79",
      "item": {
        "type": "code",
        "id": "6812f7c368ef3f79",
        "text": "node2nix -18"
      },
      "date": 1699467980423
    },
    {
      "id": "6812f7c368ef3f79",
      "type": "move",
      "order": [
        "6a1ce7260a1c07ab",
        "6812f7c368ef3f79",
        "7deb71e401f81aae",
        "fbdb4809297cc70e",
        "ea21e55d9fac26ad",
        "282392924c3ab4f3",
        "ec8808d1c37d0410",
        "f6320d91b7dad27e",
        "5bf0625382c88296",
        "51ac58ab385d0666",
        "d232557d2edc6fd4"
      ],
      "date": 1699467984065
    },
    {
      "item": {
        "type": "factory",
        "id": "c4167460b5203804"
      },
      "id": "c4167460b5203804",
      "type": "add",
      "after": "d232557d2edc6fd4",
      "date": 1699468000927
    },
    {
      "type": "edit",
      "id": "c4167460b5203804",
      "item": {
        "type": "reference",
        "id": "c4167460b5203804",
        "site": "wiki.ralfbarkow.ch",
        "slug": "node2nix",
        "title": "node2nix",
        "text": "Deploy NPM Package Manager (NPM) packages with the Nix package manager."
      },
      "date": 1699468002977
    },
    {
      "id": "c4167460b5203804",
      "type": "move",
      "order": [
        "6a1ce7260a1c07ab",
        "c4167460b5203804",
        "6812f7c368ef3f79",
        "7deb71e401f81aae",
        "fbdb4809297cc70e",
        "ea21e55d9fac26ad",
        "282392924c3ab4f3",
        "ec8808d1c37d0410",
        "f6320d91b7dad27e",
        "5bf0625382c88296",
        "51ac58ab385d0666",
        "d232557d2edc6fd4"
      ],
      "date": 1699468005606
    },
    {
      "item": {
        "type": "factory",
        "id": "cdd47459e6cc4c6c"
      },
      "id": "cdd47459e6cc4c6c",
      "type": "add",
      "after": "d232557d2edc6fd4",
      "date": 1699468025599
    },
    {
      "type": "edit",
      "id": "cdd47459e6cc4c6c",
      "item": {
        "type": "code",
        "id": "cdd47459e6cc4c6c",
        "text": "nix-build -A package"
      },
      "date": 1699468027398
    },
    {
      "id": "cdd47459e6cc4c6c",
      "type": "move",
      "order": [
        "6a1ce7260a1c07ab",
        "c4167460b5203804",
        "6812f7c368ef3f79",
        "cdd47459e6cc4c6c",
        "7deb71e401f81aae",
        "fbdb4809297cc70e",
        "ea21e55d9fac26ad",
        "282392924c3ab4f3",
        "ec8808d1c37d0410",
        "f6320d91b7dad27e",
        "5bf0625382c88296",
        "51ac58ab385d0666",
        "d232557d2edc6fd4"
      ],
      "date": 1699468030460
    },
    {
      "type": "edit",
      "id": "7deb71e401f81aae",
      "item": {
        "type": "code",
        "id": "7deb71e401f81aae",
        "text": "result -> /nix/store/m3lxz0v7s6xrcqlgr5j4m52h97814isj-wiki-0.32.1/"
      },
      "date": 1699468096772
    },
    {
      "type": "edit",
      "id": "ea21e55d9fac26ad",
      "item": {
        "type": "code",
        "id": "ea21e55d9fac26ad",
        "text": "systemd.services.wiki = {\n    wantedBy = [ \"multi-user.target\" ];\n    after = [ \"network.target\" ];\n    description = \"Federated Wiki (Node.js server version)\";\n    serviceConfig = {\n      Type = \"simple\";\n      User = \"rgb\";\n\n      # /nix/store/ivkarn12ik9ph0wdy8978yaz4ilf55bb-node_wiki-0.27.0\n      # /nix/store/slqw5nwaz3gv8ifgg0xpj5v0qy902c1p-node_wiki-0.28.1\n      # /nix/store/gn0rv30xzh6rn8s9azjww2zdsh7s5x6b-wiki-0.30.0/\n      # /nix/store/9wqk0wkyv2ilrjx76y17y4aqbrfh7spx-wiki-0.31.0/\n      # /nix/store/m3lxz0v7s6xrcqlgr5j4m52h97814isj-wiki-0.32.1/\n\n      ExecStart =\n        \"/nix/store/m3lxz0v7s6xrcqlgr5j4m52h97814isj-wiki-0.32.1/bin/wiki --config /home/rgb/.wiki/config.json\";\n      Restart = \"on-failure\";\n\n    };\n"
      },
      "date": 1699468159907
    },
    {
      "item": {
        "type": "factory",
        "id": "32df5ac8b9c4d3fb"
      },
      "id": "32df5ac8b9c4d3fb",
      "type": "add",
      "after": "d232557d2edc6fd4",
      "date": 1699469017686
    },
    {
      "type": "edit",
      "id": "32df5ac8b9c4d3fb",
      "item": {
        "type": "code",
        "id": "32df5ac8b9c4d3fb",
        "text": "nixos-rebuild switch"
      },
      "date": 1699469022255
    },
    {
      "id": "32df5ac8b9c4d3fb",
      "type": "move",
      "order": [
        "6a1ce7260a1c07ab",
        "c4167460b5203804",
        "6812f7c368ef3f79",
        "cdd47459e6cc4c6c",
        "7deb71e401f81aae",
        "fbdb4809297cc70e",
        "ea21e55d9fac26ad",
        "282392924c3ab4f3",
        "ec8808d1c37d0410",
        "f6320d91b7dad27e",
        "5bf0625382c88296",
        "32df5ac8b9c4d3fb",
        "51ac58ab385d0666",
        "d232557d2edc6fd4"
      ],
      "date": 1699469024346
    }
  ]
}