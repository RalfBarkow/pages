{
  "title": "Closed farm",
  "story": [
    {
      "type": "paragraph",
      "id": "3da7bc4059459085",
      "text": "Most wiki farms are open. This is for flexibility, and ease of setup. But with a little work they don't have to be."
    },
    {
      "type": "paragraph",
      "id": "5d5e128ba3e1c736",
      "text": "The main thing you need to create a closed farm is a list of wiki names, and the email addresses of the people that should own them."
    },
    {
      "type": "paragraph",
      "id": "901da6a6e550d167",
      "text": "The first step is to make sure only the right traffic can reach them. This should be done on the server using a reverse proxy. One easy way to set this up is to use [[nginx]] like you would for a virtual host setup. You can then direct only the domain names you want at your server."
    },
    {
      "type": "paragraph",
      "id": "4a6a8816b9ab65e7",
      "text": ""
    },
    {
      "type": "paragraph",
      "id": "593cabf9190e22ef",
      "text": "Would a list of approved farm host names be a good feature to add? <-- I think so. So I proposed a way to add it. -- forage.ward.fed.wiki.org"
    },
    {
      "type": "pagefold",
      "id": "dc54eb22a2407cee",
      "text": "Mozilla discontinued \"Persona\" authentication service "
    },
    {
      "type": "markdown",
      "id": "b50805f77c21927c",
      "text": "~~Then you have to create the persona.identity file for each wiki, so that they can't be claimed by anyone else. […]~~"
    },
    {
      "type": "markdown",
      "id": "7b24fa7fc2652738",
      "text": "**Note**: [https://wiki.mozilla.org/Identity/Persona_Shutdown_Guidelines_for_Reliers Identity/Persona Shutdown Guidelines for Reliers]\n"
    },
    {
      "type": "markdown",
      "id": "18e0eadbf5b039b7",
      "text": "See [[Mozilla Persona]]"
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "Closed farm",
        "story": []
      },
      "date": 1418797159231
    },
    {
      "item": {
        "type": "factory",
        "id": "3da7bc4059459085"
      },
      "id": "3da7bc4059459085",
      "type": "add",
      "date": 1418797168568
    },
    {
      "type": "edit",
      "id": "3da7bc4059459085",
      "item": {
        "type": "paragraph",
        "id": "3da7bc4059459085",
        "text": "Most wiki farms are open. This is for flexibility, and ease of setup. But with a little work they don't have to be."
      },
      "date": 1418797222620
    },
    {
      "item": {
        "type": "paragraph",
        "id": "5d5e128ba3e1c736",
        "text": ""
      },
      "id": "5d5e128ba3e1c736",
      "type": "add",
      "after": "3da7bc4059459085",
      "date": 1418797222626
    },
    {
      "type": "edit",
      "id": "5d5e128ba3e1c736",
      "item": {
        "type": "paragraph",
        "id": "5d5e128ba3e1c736",
        "text": "The main thing you need to create a closed farm is a list of wiki names, and the email addresses of the people that should own them."
      },
      "date": 1418797309203
    },
    {
      "item": {
        "type": "paragraph",
        "id": "bb07736c55a48a17",
        "text": ""
      },
      "id": "bb07736c55a48a17",
      "type": "add",
      "after": "5d5e128ba3e1c736",
      "date": 1418797309206
    },
    {
      "type": "remove",
      "id": "bb07736c55a48a17",
      "date": 1418797310640
    },
    {
      "item": {
        "type": "paragraph",
        "id": "901da6a6e550d167",
        "text": ""
      },
      "id": "901da6a6e550d167",
      "type": "add",
      "after": "5d5e128ba3e1c736",
      "date": 1418797363360
    },
    {
      "type": "edit",
      "id": "901da6a6e550d167",
      "item": {
        "type": "paragraph",
        "id": "901da6a6e550d167",
        "text": "The first step is to make sure only the right traffic can reach them. This should be done on the server using a reverse proxy. One easy way to set this up is to use nginx like you would for a virtual host setup. You can then direct only the domain names you want at your server."
      },
      "date": 1418797594994
    },
    {
      "item": {
        "type": "paragraph",
        "id": "4a6a8816b9ab65e7",
        "text": ""
      },
      "id": "4a6a8816b9ab65e7",
      "type": "add",
      "after": "901da6a6e550d167",
      "date": 1418797594999
    },
    {
      "item": {
        "type": "paragraph",
        "id": "2936a239761454b6",
        "text": ""
      },
      "id": "2936a239761454b6",
      "type": "add",
      "after": "4a6a8816b9ab65e7",
      "date": 1418797606448
    },
    {
      "type": "edit",
      "id": "2936a239761454b6",
      "item": {
        "type": "paragraph",
        "id": "2936a239761454b6",
        "text": "Then you have to create the persona.i"
      },
      "date": 1418797676448
    },
    {
      "item": {
        "type": "paragraph",
        "id": "422054c62194630e",
        "text": ""
      },
      "id": "422054c62194630e",
      "type": "add",
      "after": "2936a239761454b6",
      "date": 1418797702576
    },
    {
      "type": "edit",
      "id": "2936a239761454b6",
      "item": {
        "type": "paragraph",
        "id": "2936a239761454b6",
        "text": "Then you have to create the persona.identity file for each wiki, so that they can't be claimed by anyone else."
      },
      "date": 1418797702573
    },
    {
      "type": "remove",
      "id": "422054c62194630e",
      "date": 1418797703831
    },
    {
      "item": {
        "type": "paragraph",
        "id": "8c97852cbfbee38f",
        "text": ""
      },
      "id": "8c97852cbfbee38f",
      "type": "add",
      "after": "2936a239761454b6",
      "date": 1418797724002
    },
    {
      "item": {
        "type": "factory",
        "id": "2b7ee1546c2932f0"
      },
      "id": "2b7ee1546c2932f0",
      "type": "add",
      "after": "8c97852cbfbee38f",
      "date": 1418797750833
    },
    {
      "type": "edit",
      "id": "8c97852cbfbee38f",
      "item": {
        "type": "paragraph",
        "id": "8c97852cbfbee38f",
        "text": "To do this for my own wiki I would do this:"
      },
      "date": 1418797757499
    },
    {
      "type": "remove",
      "id": "2b7ee1546c2932f0",
      "date": 1418797759198
    },
    {
      "item": {
        "type": "factory",
        "id": "2cfe892d6813ea38"
      },
      "id": "2cfe892d6813ea38",
      "type": "add",
      "after": "8c97852cbfbee38f",
      "date": 1418797773200
    },
    {
      "type": "edit",
      "id": "2cfe892d6813ea38",
      "item": {
        "type": "code",
        "id": "2cfe892d6813ea38",
        "text": " mkdir -p 198.211.103.94/status"
      },
      "date": 1418797780451
    },
    {
      "type": "edit",
      "id": "2cfe892d6813ea38",
      "item": {
        "type": "code",
        "id": "2cfe892d6813ea38",
        "text": " mkdir -p 198.211.103.94/status\nprintf 'nick.niemeir@gmail.com' > 198.211.103.94/status/persona.identity"
      },
      "date": 1418797802548
    },
    {
      "type": "edit",
      "id": "8c97852cbfbee38f",
      "item": {
        "type": "paragraph",
        "id": "8c97852cbfbee38f",
        "text": "To do this for my own wiki, starting in the wiki db directory, I would do this:"
      },
      "date": 1418797827660
    },
    {
      "item": {
        "type": "paragraph",
        "id": "593cabf9190e22ef",
        "text": ""
      },
      "id": "593cabf9190e22ef",
      "type": "add",
      "after": "4a6a8816b9ab65e7",
      "date": 1418797886346
    },
    {
      "type": "edit",
      "id": "593cabf9190e22ef",
      "item": {
        "type": "paragraph",
        "id": "593cabf9190e22ef",
        "text": "Would this be a "
      },
      "date": 1418797900936
    },
    {
      "type": "edit",
      "id": "593cabf9190e22ef",
      "item": {
        "type": "paragraph",
        "id": "593cabf9190e22ef",
        "text": "Would a list of approved farm host names be a good feature to add?"
      },
      "date": 1418797944790
    },
    {
      "type": "edit",
      "id": "2cfe892d6813ea38",
      "item": {
        "type": "code",
        "id": "2cfe892d6813ea38",
        "text": " mkdir -p ramble.nrn.io/status\nprintf 'nick.niemeir@gmail.com' > ramble.nrn.io/status/persona.identity"
      },
      "date": 1418797975641
    },
    {
      "type": "edit",
      "id": "2cfe892d6813ea38",
      "item": {
        "type": "code",
        "id": "2cfe892d6813ea38",
        "text": "mkdir -p ramble.nrn.io/status\n\nprintf 'nick.niemeir@gmail.com' > ramble.nrn.io/status/persona.identity"
      },
      "date": 1418803550288
    },
    {
      "item": {
        "type": "factory",
        "id": "d62cd4b874b0d48a"
      },
      "id": "d62cd4b874b0d48a",
      "type": "add",
      "after": "2cfe892d6813ea38",
      "date": 1418804387254
    },
    {
      "type": "edit",
      "id": "d62cd4b874b0d48a",
      "item": {
        "type": "paragraph",
        "id": "d62cd4b874b0d48a",
        "text": "If you had a newline separated list of student usernames, in the wiki db directory, and wanted to create wiki's with their user names, only able to be claimed by 'studentusername@school.edu' you could do this:"
      },
      "date": 1418804500925
    },
    {
      "item": {
        "type": "factory",
        "id": "47efa2abc3397b72"
      },
      "id": "47efa2abc3397b72",
      "type": "add",
      "after": "d62cd4b874b0d48a",
      "date": 1418804513692
    },
    {
      "type": "edit",
      "id": "47efa2abc3397b72",
      "item": {
        "type": "code",
        "id": "47efa2abc3397b72",
        "text": "for i in `cat ./list`; do mkdir -p $i/status && printf \"$i\"@school.edu > $i/status/persona.identity;done"
      },
      "date": 1418804528060
    },
    {
      "type": "edit",
      "id": "593cabf9190e22ef",
      "item": {
        "type": "paragraph",
        "id": "593cabf9190e22ef",
        "text": "Would a list of approved farm host names be a good feature to add? <-- I think so. Proposed a way to add it."
      },
      "date": 1418804614121
    },
    {
      "type": "edit",
      "id": "593cabf9190e22ef",
      "item": {
        "type": "paragraph",
        "id": "593cabf9190e22ef",
        "text": "Would a list of approved farm host names be a good feature to add? <-- I think so. So I proposed a way to add it."
      },
      "date": 1418804631295
    },
    {
      "type": "fork",
      "site": "ramble.nrn.io",
      "date": 1418838701359
    },
    {
      "type": "fork",
      "site": "forage.ward.fed.wiki.org",
      "date": 1548787726614
    },
    {
      "type": "add",
      "item": {
        "id": "76cc01879fc91a88",
        "type": "reference",
        "site": "ward.fed.wiki.org",
        "slug": "farm-scripts",
        "title": "Farm Scripts",
        "text": "An operator of a wiki farm may assume responsibilities that are not directly supported by mechanisms in the server. However, with flat-file storage, simple scripts can automate tasks for dozens or even hundreds of sites."
      },
      "after": "47efa2abc3397b72",
      "id": "76cc01879fc91a88",
      "date": 1548787734161
    },
    {
      "type": "add",
      "item": {
        "id": "db86de7575de50da",
        "type": "reference",
        "site": "admin.asia.wiki.org",
        "slug": "dns-wildcard",
        "title": "DNS Wildcard",
        "text": "The internet's domain name system (dns) allows for * to represent all possible subdomains of a given domain name. We use wildcard dns records to direct all subdomains of fed.wiki.org to a single server, a wiki farm."
      },
      "after": "76cc01879fc91a88",
      "id": "db86de7575de50da",
      "date": 1548787737237
    },
    {
      "type": "add",
      "item": {
        "id": "dff0497f285799ce",
        "type": "reference",
        "site": "journal.hapgood.net",
        "slug": "my-burning-question-about-wiki-farms",
        "title": "My burning question about wiki farms",
        "text": "Update: Nick Niemeir (@nickniemeir) was kind enough to offer a response to issue two, in [[Closed farm]]"
      },
      "after": "47efa2abc3397b72",
      "id": "dff0497f285799ce",
      "date": 1548787742232
    },
    {
      "type": "add",
      "item": {
        "id": "55b38b9891672307",
        "type": "reference",
        "site": "hack.platform.earth",
        "slug": "fedwiki-farm-admin",
        "title": "Fedwiki Farm Admin",
        "text": "A first look at the code for managing wiki farms and creating group working practices such as legal entities, community currencies and collaborations around commons…- [https://vimeo.com/261095206 vimeo.com]"
      },
      "after": "47efa2abc3397b72",
      "id": "55b38b9891672307",
      "date": 1548787760493
    },
    {
      "type": "remove",
      "id": "55b38b9891672307",
      "date": 1548787857993
    },
    {
      "type": "remove",
      "id": "76cc01879fc91a88",
      "date": 1548787862313
    },
    {
      "type": "remove",
      "id": "db86de7575de50da",
      "date": 1548787868811
    },
    {
      "type": "remove",
      "id": "dff0497f285799ce",
      "date": 1548787871048
    },
    {
      "type": "fork",
      "site": "fedwiki.org",
      "date": 1628807355808
    },
    {
      "type": "edit",
      "id": "901da6a6e550d167",
      "item": {
        "type": "paragraph",
        "id": "901da6a6e550d167",
        "text": "The first step is to make sure only the right traffic can reach them. This should be done on the server using a reverse proxy. One easy way to set this up is to use [[nginx]] like you would for a virtual host setup. You can then direct only the domain names you want at your server."
      },
      "date": 1628807380390
    },
    {
      "type": "edit",
      "id": "593cabf9190e22ef",
      "item": {
        "type": "paragraph",
        "id": "593cabf9190e22ef",
        "text": "Would a list of approved farm host names be a good feature to add? <-- I think so. So I proposed a way to add it. -- forage.ward.fed.wiki.org"
      },
      "date": 1630474538727
    },
    {
      "type": "add",
      "id": "962174fc2ed82ad2",
      "item": {
        "type": "paragraph",
        "id": "962174fc2ed82ad2",
        "text": "**Note**: "
      },
      "after": "2936a239761454b6",
      "date": 1630474572753
    },
    {
      "type": "fork",
      "date": 1630474608006
    },
    {
      "item": {
        "type": "factory",
        "id": "7b24fa7fc2652738"
      },
      "id": "7b24fa7fc2652738",
      "type": "add",
      "after": "47efa2abc3397b72",
      "date": 1630474610384
    },
    {
      "type": "edit",
      "id": "7b24fa7fc2652738",
      "item": {
        "type": "markdown",
        "id": "7b24fa7fc2652738",
        "text": "**Note**: https://wiki.mozilla.org/Identity/Persona_Shutdown_Guidelines_for_Reliers"
      },
      "date": 1630474620911
    },
    {
      "id": "7b24fa7fc2652738",
      "type": "move",
      "order": [
        "3da7bc4059459085",
        "5d5e128ba3e1c736",
        "901da6a6e550d167",
        "4a6a8816b9ab65e7",
        "593cabf9190e22ef",
        "2936a239761454b6",
        "7b24fa7fc2652738",
        "962174fc2ed82ad2",
        "8c97852cbfbee38f",
        "2cfe892d6813ea38",
        "d62cd4b874b0d48a",
        "47efa2abc3397b72"
      ],
      "date": 1630474625597
    },
    {
      "type": "remove",
      "id": "962174fc2ed82ad2",
      "date": 1630474630187
    },
    {
      "type": "remove",
      "id": "8c97852cbfbee38f",
      "date": 1630474634642
    },
    {
      "type": "remove",
      "id": "2cfe892d6813ea38",
      "date": 1630474637647
    },
    {
      "type": "remove",
      "id": "d62cd4b874b0d48a",
      "date": 1630474640462
    },
    {
      "type": "remove",
      "id": "47efa2abc3397b72",
      "date": 1630474642765
    },
    {
      "type": "edit",
      "id": "7b24fa7fc2652738",
      "item": {
        "type": "markdown",
        "id": "7b24fa7fc2652738",
        "text": "**Note**: [https://wiki.mozilla.org/Identity/Persona_Shutdown_Guidelines_for_Reliers Identity/Persona Shutdown Guidelines for Reliers]"
      },
      "date": 1630474658704
    },
    {
      "type": "edit",
      "id": "2936a239761454b6",
      "item": {
        "type": "paragraph",
        "id": "2936a239761454b6",
        "text": "--Then you have to create the persona.identity file for each wiki, so that they can't be claimed by anyone else.--"
      },
      "date": 1630474678847
    },
    {
      "item": {
        "type": "factory",
        "id": "b50805f77c21927c"
      },
      "id": "b50805f77c21927c",
      "type": "add",
      "after": "7b24fa7fc2652738",
      "date": 1630474682121
    },
    {
      "type": "edit",
      "id": "b50805f77c21927c",
      "item": {
        "type": "markdown",
        "id": "b50805f77c21927c",
        "text": "--"
      },
      "date": 1630474686575
    },
    {
      "type": "remove",
      "id": "2936a239761454b6",
      "date": 1630474689373
    },
    {
      "type": "edit",
      "id": "b50805f77c21927c",
      "item": {
        "type": "markdown",
        "id": "b50805f77c21927c",
        "text": "--Then you have to create the persona.identity file for each wiki, so that they can't be claimed by anyone else.--"
      },
      "date": 1630474695062
    },
    {
      "type": "edit",
      "id": "b50805f77c21927c",
      "item": {
        "type": "markdown",
        "id": "b50805f77c21927c",
        "text": "~~Then you have to create the persona.identity file for each wiki, so that they can't be claimed by anyone else.~~"
      },
      "date": 1630474708523
    },
    {
      "id": "b50805f77c21927c",
      "type": "move",
      "order": [
        "3da7bc4059459085",
        "5d5e128ba3e1c736",
        "901da6a6e550d167",
        "4a6a8816b9ab65e7",
        "593cabf9190e22ef",
        "b50805f77c21927c",
        "7b24fa7fc2652738"
      ],
      "date": 1630474710511
    },
    {
      "type": "edit",
      "id": "b50805f77c21927c",
      "item": {
        "type": "markdown",
        "id": "b50805f77c21927c",
        "text": "~~Then you have to create the persona.identity file for each wiki, so that they can't be claimed by anyone else. […]~~"
      },
      "date": 1630474731230
    },
    {
      "item": {
        "type": "factory",
        "id": "dc54eb22a2407cee"
      },
      "id": "dc54eb22a2407cee",
      "type": "add",
      "after": "7b24fa7fc2652738",
      "date": 1630474768041
    },
    {
      "type": "edit",
      "id": "dc54eb22a2407cee",
      "item": {
        "type": "pagefold",
        "id": "dc54eb22a2407cee",
        "text": "Mozilla discontinued \"Persona\" authentication service "
      },
      "date": 1630474771299
    },
    {
      "id": "dc54eb22a2407cee",
      "type": "move",
      "order": [
        "3da7bc4059459085",
        "5d5e128ba3e1c736",
        "901da6a6e550d167",
        "4a6a8816b9ab65e7",
        "593cabf9190e22ef",
        "dc54eb22a2407cee",
        "b50805f77c21927c",
        "7b24fa7fc2652738"
      ],
      "date": 1630474775119
    },
    {
      "type": "edit",
      "id": "593cabf9190e22ef",
      "item": {
        "type": "paragraph",
        "id": "593cabf9190e22ef",
        "text": "Would a list of approved farm host names be a good feature to add? <-- I think so. So I proposed a way to add it. -- fedwiki.org"
      },
      "date": 1630474905372
    },
    {
      "type": "edit",
      "id": "593cabf9190e22ef",
      "item": {
        "type": "paragraph",
        "id": "593cabf9190e22ef",
        "text": "Would a list of approved farm host names be a good feature to add? <-- I think so. So I proposed a way to add it. -- forage.ward.fed.wiki.org"
      },
      "date": 1630474947501
    },
    {
      "type": "edit",
      "id": "7b24fa7fc2652738",
      "item": {
        "type": "markdown",
        "id": "7b24fa7fc2652738",
        "text": "**Note**: [https://wiki.mozilla.org/Identity/Persona_Shutdown_Guidelines_for_Reliers Identity/Persona Shutdown Guidelines for Reliers]\n"
      },
      "date": 1630475138601
    },
    {
      "type": "add",
      "id": "18e0eadbf5b039b7",
      "item": {
        "type": "markdown",
        "id": "18e0eadbf5b039b7",
        "text": "See [[Mozilla Persona]]"
      },
      "after": "7b24fa7fc2652738",
      "date": 1630475150403
    }
  ]
}