{
  "title": "Managing Diagram Metadata",
  "story": [
    {
      "type": "paragraph",
      "id": "6d22213055ad1bdb",
      "text": "Our system manages two kinds of files, images and metadata. These are traditionaly kept in source control and updated by editing in the diagram viewer, downloading updates, and checking them in from the command line."
    },
    {
      "type": "markdown",
      "id": "7cdd4fd852aa13f4",
      "text": "# Batch"
    },
    {
      "type": "paragraph",
      "id": "741bdb8f8d742db2",
      "text": "For this wiki hosted version we use asset folders and rollup the overall index by logging into the server and running the update script there."
    },
    {
      "type": "code",
      "id": "4000bf4c9a8d28c9",
      "text": "cd .wiki/simnet.ward.asia.wiki.org\ncd assets/pages/diagrams-as-base-model\ndeno run --allow-read=. indexer.js > new.json\nmv new.json index.json"
    },
    {
      "type": "paragraph",
      "id": "d3ad6e239c729372",
      "text": "The indexer reports changes it has found."
    },
    {
      "type": "html",
      "id": "f0ff05af7938b5e6",
      "text": "<pre>\nnew { team: \"trail-maps\" }\nnew { team: \"trail-maps\", diagram: \"thprd-trail-map\" }\n</pre>"
    },
    {
      "type": "paragraph",
      "id": "035dd6d0ea23e96b",
      "text": "The cautious administrator double-check before installing the new index.json."
    },
    {
      "type": "code",
      "id": "200e31869c051cd3",
      "text": "diff index.json new.json"
    },
    {
      "type": "html",
      "id": "c1e2d13fe4f42958",
      "text": "<pre>\n\n>     \"trail-maps\": {\n>       \"thprd-trail-map\": {\n>         \"extension\": \"jpg\",\n>         \"things\": [],\n>         \"types\": []\n</pre>"
    },
    {
      "type": "markdown",
      "id": "11db6e3af711c9d4",
      "text": "# Online"
    },
    {
      "type": "paragraph",
      "id": "2b67b4947c5c516f",
      "text": "Our approach to metadata integration allows for any individual team to add or update content in the aggregation. We exploit that by providing an indexer that can run with access to one team's assets."
    },
    {
      "type": "assets",
      "id": "ca92fc731f53d02b",
      "text": "pages/diagrams-as-base-model"
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "Managing Diagram Metadata",
        "story": []
      },
      "date": 1628615769698
    },
    {
      "item": {
        "type": "factory",
        "id": "6d22213055ad1bdb"
      },
      "id": "6d22213055ad1bdb",
      "type": "add",
      "date": 1628615776913
    },
    {
      "type": "edit",
      "id": "6d22213055ad1bdb",
      "item": {
        "type": "paragraph",
        "id": "6d22213055ad1bdb",
        "text": "Our system manages two kinds of files, images and metadata. These are traditionaly kept in source control and updated by editing in the diagram viewer, downloading updates, and checking them in from the command line."
      },
      "date": 1628615917403
    },
    {
      "type": "add",
      "id": "741bdb8f8d742db2",
      "item": {
        "type": "paragraph",
        "id": "741bdb8f8d742db2",
        "text": "For this wiki hosted version we use asset folders and rollup the overall index by logging into the server and running the update script there."
      },
      "after": "6d22213055ad1bdb",
      "date": 1628615977466
    },
    {
      "item": {
        "type": "factory",
        "id": "4000bf4c9a8d28c9"
      },
      "id": "4000bf4c9a8d28c9",
      "type": "add",
      "after": "741bdb8f8d742db2",
      "date": 1628616069915
    },
    {
      "type": "edit",
      "id": "4000bf4c9a8d28c9",
      "item": {
        "type": "code",
        "id": "4000bf4c9a8d28c9",
        "text": "(cd docs; deno run --allow-read=. ../scripts/indexer.js > new.json && mv new.json index.json)"
      },
      "date": 1628616124716
    },
    {
      "type": "edit",
      "id": "4000bf4c9a8d28c9",
      "item": {
        "type": "code",
        "id": "4000bf4c9a8d28c9",
        "text": "cd .wiki/simnet.ward.asia.wiki.org/assets/pages/diagrams-as-base-model/\ndeno run --allow-read=. indexer.js > new.json\nmv new.json index.json"
      },
      "date": 1628616444214
    },
    {
      "type": "edit",
      "id": "4000bf4c9a8d28c9",
      "item": {
        "type": "code",
        "id": "4000bf4c9a8d28c9",
        "text": "cd .wiki/simnet.ward.asia.wiki.org\ncd assets/pages/diagrams-as-base-model\ndeno run --allow-read=. indexer.js > new.json\nmv new.json index.json"
      },
      "date": 1628616472741
    },
    {
      "item": {
        "type": "factory",
        "id": "f0ff05af7938b5e6"
      },
      "id": "f0ff05af7938b5e6",
      "type": "add",
      "after": "4000bf4c9a8d28c9",
      "date": 1628616522642
    },
    {
      "type": "edit",
      "id": "f0ff05af7938b5e6",
      "item": {
        "type": "html",
        "id": "f0ff05af7938b5e6",
        "text": "<pre>\nnew { team: \"trail-maps\" }\nnew { team: \"trail-maps\", diagram: \"thprd-trail-map\" }\n</pre>"
      },
      "date": 1628616559091
    },
    {
      "type": "add",
      "id": "d3ad6e239c729372",
      "item": {
        "type": "paragraph",
        "id": "d3ad6e239c729372",
        "text": "The indexer reports changes it has found."
      },
      "after": "741bdb8f8d742db2",
      "date": 1628616586548
    },
    {
      "id": "d3ad6e239c729372",
      "type": "move",
      "order": [
        "6d22213055ad1bdb",
        "741bdb8f8d742db2",
        "4000bf4c9a8d28c9",
        "d3ad6e239c729372",
        "f0ff05af7938b5e6"
      ],
      "date": 1628616588890
    },
    {
      "item": {
        "type": "factory",
        "id": "035dd6d0ea23e96b"
      },
      "id": "035dd6d0ea23e96b",
      "type": "add",
      "after": "f0ff05af7938b5e6",
      "date": 1628616649021
    },
    {
      "type": "edit",
      "id": "035dd6d0ea23e96b",
      "item": {
        "type": "paragraph",
        "id": "035dd6d0ea23e96b",
        "text": "The cautious administrator can double-check."
      },
      "date": 1628616671446
    },
    {
      "item": {
        "type": "factory",
        "id": "200e31869c051cd3"
      },
      "id": "200e31869c051cd3",
      "type": "add",
      "after": "035dd6d0ea23e96b",
      "date": 1628616675351
    },
    {
      "type": "edit",
      "id": "200e31869c051cd3",
      "item": {
        "type": "code",
        "id": "200e31869c051cd3",
        "text": "diff index.json new.json"
      },
      "date": 1628616679655
    },
    {
      "type": "edit",
      "id": "035dd6d0ea23e96b",
      "item": {
        "type": "paragraph",
        "id": "035dd6d0ea23e96b",
        "text": "The cautious administrator double-check before installing the new index.json."
      },
      "date": 1628616723219
    },
    {
      "item": {
        "type": "factory",
        "id": "c1e2d13fe4f42958"
      },
      "id": "c1e2d13fe4f42958",
      "type": "add",
      "after": "200e31869c051cd3",
      "date": 1628616744111
    },
    {
      "type": "edit",
      "id": "c1e2d13fe4f42958",
      "item": {
        "type": "html",
        "id": "c1e2d13fe4f42958",
        "text": "<pre>\n>       },\n>       \"screen\": {\n>         \"extension\": \"jpg\",\n>         \"things\": [],\n>         \"types\": []\n>       }\n>     },\n>     \"trail-maps\": {\n>       \"thprd-trail-map\": {\n>         \"extension\": \"jpg\",\n>         \"things\": [],\n>         \"types\": []\n</pre>"
      },
      "date": 1628616757053
    },
    {
      "type": "edit",
      "id": "c1e2d13fe4f42958",
      "item": {
        "type": "html",
        "id": "c1e2d13fe4f42958",
        "text": "<pre>\n\n>     \"trail-maps\": {\n>       \"thprd-trail-map\": {\n>         \"extension\": \"jpg\",\n>         \"things\": [],\n>         \"types\": []\n</pre>"
      },
      "date": 1628616787619
    },
    {
      "item": {
        "type": "factory",
        "id": "13d4ee9c3353a246"
      },
      "id": "13d4ee9c3353a246",
      "type": "add",
      "after": "c1e2d13fe4f42958",
      "date": 1628642546121
    },
    {
      "type": "edit",
      "id": "13d4ee9c3353a246",
      "item": {
        "type": "paragraph",
        "id": "13d4ee9c3353a246",
        "text": "See [[Indexer Online]]"
      },
      "date": 1628642563239
    },
    {
      "type": "remove",
      "id": "13d4ee9c3353a246",
      "date": 1628642588545
    },
    {
      "type": "add",
      "id": "7cdd4fd852aa13f4",
      "item": {
        "type": "paragraph",
        "id": "7cdd4fd852aa13f4",
        "text": "# Batch"
      },
      "after": "6d22213055ad1bdb",
      "date": 1628709737860
    },
    {
      "type": "edit",
      "id": "7cdd4fd852aa13f4",
      "item": {
        "type": "markdown",
        "id": "7cdd4fd852aa13f4",
        "text": "# Batch"
      },
      "date": 1628709740580
    },
    {
      "item": {
        "type": "factory",
        "id": "11db6e3af711c9d4"
      },
      "id": "11db6e3af711c9d4",
      "type": "add",
      "after": "c1e2d13fe4f42958",
      "date": 1628709755269
    },
    {
      "type": "edit",
      "id": "11db6e3af711c9d4",
      "item": {
        "type": "markdown",
        "id": "11db6e3af711c9d4",
        "text": "# Online"
      },
      "date": 1628709784748
    },
    {
      "item": {
        "type": "factory",
        "id": "2b67b4947c5c516f"
      },
      "id": "2b67b4947c5c516f",
      "type": "add",
      "after": "11db6e3af711c9d4",
      "date": 1628709786941
    },
    {
      "type": "edit",
      "id": "2b67b4947c5c516f",
      "item": {
        "type": "paragraph",
        "id": "2b67b4947c5c516f",
        "text": "Our approach to metadata integration allows for any individual team to add or update content in the aggregation. We exploit that by providing an indexer that can run with access to one team's assets."
      },
      "date": 1628709934031
    },
    {
      "id": "ca92fc731f53d02b",
      "type": "add",
      "item": {
        "type": "assets",
        "id": "ca92fc731f53d02b",
        "text": "pages/diagrams-as-base-model"
      },
      "after": "2b67b4947c5c516f",
      "date": 1628710697303
    },
    {
      "type": "fork",
      "site": "simnet.ward.asia.wiki.org",
      "date": 1628789663556
    }
  ]
}