{
  "title": "Transcript Subject Not Found",
  "story": [
    {
      "type": "paragraph",
      "id": "049d41eb84aab70d",
      "text": "I ([[Sean DeNigris]]) confirmed (see [https://cdn.discordapp.com/attachments/869566842807652453/1162564045874942042/Screenshot_2023-10-13_at_9.25.18_PM.png?ex=653c6523&is=6529f023&hm=7849c046ef6a3fe179763f9c7072e81636f1c6e6fccd9b4e87c652bd80d94838& screenshot]) that the UID of the Lepiter page's subjectModel (e.g. anAuthoredWork) should match the subjectModel's UID. I'm interested in why yours seemed not to. When you have a moment, will you check another transcript's subject and see if it also does not match?"
    },
    {
      "type": "paragraph",
      "id": "dbc25524af182a84",
      "text": "Let's compare the properties of a LlAuthoredWork"
    },
    {
      "type": "image",
      "id": "929c0c49fbae12e3",
      "text": "Properties View of a LlAuthoredWork in my GT Dynabook v0.8.2436",
      "size": "wide",
      "width": 430,
      "height": 141,
      "url": "/assets/plugins/image/7223219b8cd31b5b864df1893860d114.jpg"
    },
    {
      "type": "paragraph",
      "id": "093f6bece1561ee0",
      "text": "The v0.8.2436 property with the name \"license\" vs. the v1.0.171 property with the name \"supportMaterials\" [https://github.com/seandenigris/Dynabook/blob/8dacdbd994085fdc4a6de28e74af52c4c517234c/src/Dynabook-Persistence/DynabookDB.class.st#L51 code]"
    },
    {
      "type": "image",
      "id": "560cf091d6e37a81",
      "text": "The v1.0.171 property with the name \"supportMaterials\"",
      "size": "wide",
      "width": 430,
      "height": 274,
      "url": "/assets/plugins/image/ac16cdd648af11a609fcf9cdea105d82.jpg"
    },
    {
      "type": "paragraph",
      "id": "6c478fe4f5f98fe5",
      "text": "Sean DeNigris via [https://discord.com/channels/@me/869566842807652453/1162762397795229748 discord]\nI think the properties issue is okay as long as you didn’t lose any license data that you explicitly set. Can you check another work with a transcript and see if the uid matches? Since the link is bidirectional, we should be able to write a simple script that fixes the referenced uids. "
    },
    {
      "type": "paragraph",
      "id": "7199d680ddbf9c47",
      "text": "We intend to set the uid of a a DbObjectUIDReference for example to link the subjectModelReference of QuTranscript Page: \"Apparatus\" [https://discord.com/channels/@me/869566842807652453/1162783668725620878 discord]"
    },
    {
      "type": "paragraph",
      "id": "1b45427c5bc2b7b0",
      "text": "Page -> type -> subjectModelRefence -> uid should be the uid of its AuthoredWork (e.g. Apparatus) [https://discord.com/channels/@me/869566842807652453/1162786541010161684 discord]"
    },
    {
      "type": "code",
      "id": "23777da28180406d",
      "text": "  […]\n\"pageType\" : {\n\t\"__type\" : \"quTranscriptPage\",\n\t\"subjectModelReference\" : {\n\t\t\"__type\" : \"dbObjectUIDReference\",\n\t\t\"uid\" : {\n\t\t\t\"__type\" : \"uuid\",\n\t\t\t\"uuid\" : \"283f8a47-7599-0d00-8331-5802052a8839\"\n\t\t},\n\t\t\"collectionGetter\" : \"works\",\n\t\t\"sourceClassName\" : \"LlLibrary\",\n\t\t\"sourceGetter\" : \"uniqueInstance\"\n\t}\n  […]"
    },
    {
      "type": "image",
      "id": "d65af4c5fb5921bc",
      "text": "Receiver of \"transcript\" is nil.",
      "size": "wide",
      "width": 430,
      "height": 177,
      "url": "/assets/plugins/image/f4c4bb50480a78209ee7e225df39ee06.jpg"
    },
    {
      "type": "code",
      "id": "b0e3068aab3ef9c1",
      "text": "LeDatabasesRegistry defaultLogicalDatabase reload"
    },
    {
      "type": "paragraph",
      "id": "1878d9e59e908784",
      "text": "[…]"
    },
    {
      "type": "paragraph",
      "id": "cfb74ba35483e335",
      "text": "Sean DeNigris via [https://discord.com/channels/@me/869566842807652453/1162843922519838902 discord]\nThat’s what I suspected. On first access through ensureUID a new one gets assigned. Here will be the key: is the Lepiter page ID in the transcript of the work correct? If so, it’s easy to restore the other side of the link."
    },
    {
      "type": "paragraph",
      "id": "9fb931f23077661c",
      "text": "1. About how many transcripts do you have? Maybe we can restore them manually"
    },
    {
      "type": "paragraph",
      "id": "d484073eaab9fa02",
      "text": "2. Can you confirm the UIDs are okay in the image you’re porting from?"
    },
    {
      "type": "paragraph",
      "id": "f36846eec61ec404",
      "text": "pageID is nil"
    },
    {
      "type": "paragraph",
      "id": "503ac00d803850ed",
      "text": "It seems like your properties dictionaries were wiped out. Do any of the properties of these affected objects have meaningful values, i.e. non-nil and non-empty?"
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "Transcript Subject Not Found",
        "story": []
      },
      "date": 1697340065061
    },
    {
      "id": "049d41eb84aab70d",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "049d41eb84aab70d",
        "text": "I ([[Sean DeNigris]]) confirmed (see [https://cdn.discordapp.com/attachments/869566842807652453/1162564045874942042/Screenshot_2023-10-13_at_9.25.18_PM.png?ex=653c6523&is=6529f023&hm=7849c046ef6a3fe179763f9c7072e81636f1c6e6fccd9b4e87c652bd80d94838& screenshot]) that the UID of the Lepiter page's subjectModel (e.g. anAuthoredWork) should match the subjectModel's UID. I'm interested in why yours seemed not to. When you have a moment, will you check another transcript's subject and see if it also does not match?"
      },
      "attribution": {
        "page": "BaselineOfRalfsDynabook"
      },
      "date": 1697340100515
    },
    {
      "id": "dbc25524af182a84",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "dbc25524af182a84",
        "text": "Let's compare the properties of a LlAuthoredWork"
      },
      "after": "049d41eb84aab70d",
      "attribution": {
        "page": "BaselineOfRalfsDynabook"
      },
      "date": 1697340106837
    },
    {
      "id": "929c0c49fbae12e3",
      "type": "add",
      "item": {
        "type": "image",
        "id": "929c0c49fbae12e3",
        "text": "Properties View of a LlAuthoredWork in my GT Dynabook v0.8.2436",
        "size": "wide",
        "width": 430,
        "height": 141,
        "url": "/assets/plugins/image/7223219b8cd31b5b864df1893860d114.jpg"
      },
      "after": "dbc25524af182a84",
      "attribution": {
        "page": "BaselineOfRalfsDynabook"
      },
      "date": 1697340117166
    },
    {
      "id": "093f6bece1561ee0",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "093f6bece1561ee0",
        "text": "The v0.8.2436 property with the name \"license\" vs. the v1.0.171 property with the name \"supportMaterials\" [https://github.com/seandenigris/Dynabook/blob/8dacdbd994085fdc4a6de28e74af52c4c517234c/src/Dynabook-Persistence/DynabookDB.class.st#L51 code]"
      },
      "after": "929c0c49fbae12e3",
      "attribution": {
        "page": "BaselineOfRalfsDynabook"
      },
      "date": 1697340121668
    },
    {
      "id": "560cf091d6e37a81",
      "type": "add",
      "item": {
        "type": "image",
        "id": "560cf091d6e37a81",
        "text": "The v1.0.171 property with the name \"supportMaterials\"",
        "size": "wide",
        "width": 430,
        "height": 274,
        "url": "/assets/plugins/image/ac16cdd648af11a609fcf9cdea105d82.jpg"
      },
      "after": "093f6bece1561ee0",
      "attribution": {
        "page": "BaselineOfRalfsDynabook"
      },
      "date": 1697340125334
    },
    {
      "id": "6c478fe4f5f98fe5",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "6c478fe4f5f98fe5",
        "text": "Sean DeNigris via [https://discord.com/channels/@me/869566842807652453/1162762397795229748 discord]\nI think the properties issue is okay as long as you didn’t lose any license data that you explicitly set. Can you check another work with a transcript and see if the uid matches? Since the link is bidirectional, we should be able to write a simple script that fixes the referenced uids. "
      },
      "after": "560cf091d6e37a81",
      "attribution": {
        "page": "BaselineOfRalfsDynabook"
      },
      "date": 1697340135226
    },
    {
      "id": "7199d680ddbf9c47",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "7199d680ddbf9c47",
        "text": "We intend to set the uid of a a DbObjectUIDReference for example to link the subjectModelReference of QuTranscript Page: \"Apparatus\" [https://discord.com/channels/@me/869566842807652453/1162783668725620878 discord]"
      },
      "after": "6c478fe4f5f98fe5",
      "attribution": {
        "page": "BaselineOfRalfsDynabook"
      },
      "date": 1697340147641
    },
    {
      "id": "1b45427c5bc2b7b0",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "1b45427c5bc2b7b0",
        "text": "Page -> type -> subjectModelRefence -> uid should be the uid of its AuthoredWork (e.g. Apparatus) [https://discord.com/channels/@me/869566842807652453/1162786541010161684 discord]"
      },
      "after": "7199d680ddbf9c47",
      "attribution": {
        "page": "BaselineOfRalfsDynabook"
      },
      "date": 1697340151588
    },
    {
      "id": "23777da28180406d",
      "type": "add",
      "item": {
        "type": "code",
        "id": "23777da28180406d",
        "text": "  […]\n\"pageType\" : {\n\t\"__type\" : \"quTranscriptPage\",\n\t\"subjectModelReference\" : {\n\t\t\"__type\" : \"dbObjectUIDReference\",\n\t\t\"uid\" : {\n\t\t\t\"__type\" : \"uuid\",\n\t\t\t\"uuid\" : \"283f8a47-7599-0d00-8331-5802052a8839\"\n\t\t},\n\t\t\"collectionGetter\" : \"works\",\n\t\t\"sourceClassName\" : \"LlLibrary\",\n\t\t\"sourceGetter\" : \"uniqueInstance\"\n\t}\n  […]"
      },
      "after": "1b45427c5bc2b7b0",
      "attribution": {
        "page": "BaselineOfRalfsDynabook"
      },
      "date": 1697340155083
    },
    {
      "id": "d65af4c5fb5921bc",
      "type": "add",
      "item": {
        "type": "image",
        "id": "d65af4c5fb5921bc",
        "text": "Receiver of \"transcript\" is nil.",
        "size": "wide",
        "width": 430,
        "height": 177,
        "url": "/assets/plugins/image/f4c4bb50480a78209ee7e225df39ee06.jpg"
      },
      "after": "23777da28180406d",
      "attribution": {
        "page": "BaselineOfRalfsDynabook"
      },
      "date": 1697340158088
    },
    {
      "id": "b0e3068aab3ef9c1",
      "type": "add",
      "item": {
        "type": "code",
        "id": "b0e3068aab3ef9c1",
        "text": "LeDatabasesRegistry defaultLogicalDatabase reload"
      },
      "after": "d65af4c5fb5921bc",
      "attribution": {
        "page": "BaselineOfRalfsDynabook"
      },
      "date": 1697340163202
    },
    {
      "id": "1878d9e59e908784",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "1878d9e59e908784",
        "text": "[…]"
      },
      "after": "b0e3068aab3ef9c1",
      "attribution": {
        "page": "BaselineOfRalfsDynabook"
      },
      "date": 1697340167557
    },
    {
      "id": "cfb74ba35483e335",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "cfb74ba35483e335",
        "text": "Sean DeNigris via [https://discord.com/channels/@me/869566842807652453/1162843922519838902 discord]\nThat’s what I suspected. On first access through ensureUID a new one gets assigned. Here will be the key: is the Lepiter page ID in the transcript of the work correct? If so, it’s easy to restore the other side of the link."
      },
      "after": "1878d9e59e908784",
      "attribution": {
        "page": "BaselineOfRalfsDynabook"
      },
      "date": 1697340174238
    },
    {
      "id": "9fb931f23077661c",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "9fb931f23077661c",
        "text": "1. About how many transcripts do you have? Maybe we can restore them manually"
      },
      "after": "cfb74ba35483e335",
      "attribution": {
        "page": "BaselineOfRalfsDynabook"
      },
      "date": 1697340179771
    },
    {
      "id": "d484073eaab9fa02",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "d484073eaab9fa02",
        "text": "2. Can you confirm the UIDs are okay in the image you’re porting from?"
      },
      "after": "9fb931f23077661c",
      "attribution": {
        "page": "BaselineOfRalfsDynabook"
      },
      "date": 1697340182781
    },
    {
      "id": "f36846eec61ec404",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "f36846eec61ec404",
        "text": "pageID is nil"
      },
      "after": "d484073eaab9fa02",
      "attribution": {
        "page": "BaselineOfRalfsDynabook"
      },
      "date": 1697340186369
    },
    {
      "id": "503ac00d803850ed",
      "type": "add",
      "item": {
        "type": "paragraph",
        "id": "503ac00d803850ed",
        "text": "It seems like your properties dictionaries were wiped out. Do any of the properties of these affected objects have meaningful values, i.e. non-nil and non-empty?"
      },
      "after": "f36846eec61ec404",
      "attribution": {
        "page": "BaselineOfRalfsDynabook"
      },
      "date": 1697340190303
    }
  ]
}