{
  "title": "Moldable Collection Wrapper",
  "story": [
    {
      "type": "markdown",
      "id": "b28b2b2e99b70f24",
      "text": "**Context:** Within your application domain, you not only have to deal with individual domain objects, but also composite entities (e.g., a book of notebook pages, a website of web pages), and collections of entities (e.g.,the result of query). [https://book.gtoolkit.com/moldable-collection-wrapper-dyquv1bb9krkve76ncq4kyxr7 page]"
    },
    {
      "type": "markdown",
      "id": "5b24d52ad536fe2f",
      "text": "**Problem:** How can you effectively provide custom tools for various kinds of collections of domain entities?"
    },
    {
      "type": "markdown",
      "id": "88d7ad8205d9d3fd",
      "text": "**Forces:** Collections are generic data structures with generic views that are not necessarily informative for your domain.\n\nCollections of domain entities may occur in various forms and contexts, such as the state of a composite object, or the result of a query.\n\nProviding custom views for each of these can be tedious and lead to much duplicated code."
    },
    {
      "type": "markdown",
      "id": "e4b5be3a541f8233",
      "text": "**Solution:** Wrap collections of domain objects in a dedicated group wrapper, and give it dedicated views, actions and searches. In case there are multiple composite entities or collections that should share the same custom tools, factor these out into a common abstract superclass or [[Trait]]."
    },
    {
      "type": "markdown",
      "id": "c26a1386688d66ba",
      "text": "**Steps:** Create a dedicated wrapper for a collection of domain entities. An example is `WebPageGroup`, which wraps a collection web pages."
    },
    {
      "type": "markdown",
      "id": "5d53d7edcdea08b6",
      "text": "Have the collection wrapper use the `TGtGroupWithItems` trait. This trait has an items slot for the wrapped collection, and provides a large number of Collection methods to make the trait user behave like a Collection. "
    },
    {
      "type": "image",
      "id": "47ed57c903001728",
      "text": "WebPageGroup",
      "size": "wide",
      "width": 421,
      "height": 175,
      "url": "/assets/plugins/image/6c0f0e237717c60a8d6ea4b67f2ef564.jpg"
    },
    {
      "type": "markdown",
      "id": "064efcead27e51c8",
      "text": "In case there are other classes that share views, actions and searches with the collection wrapper, consider putting these in a shared trait as well. For example, a website is also a collection of pages. We put the shared views and other behavior in the trait `TWebPageGroup`. The trait users are `AWebsite` and `WebPageGroup`."
    },
    {
      "type": "image",
      "id": "a09237d6b33a6d2b",
      "text": "TWebPageGroup",
      "size": "wide",
      "width": 419,
      "height": 254,
      "url": "/assets/plugins/image/9a157ee933fb4215628c61b5c3f5a16c.jpg"
    },
    {
      "type": "markdown",
      "id": "70af113e69ea393e",
      "text": "Wherever you need to show a collection of these objects, just forward the view to the wrapper to avoid duplicating the view code. See `TWebPageGroup>>#gtReachablePagesFor:`.\n\nIf you have gtSearches, be sure they return the collection wrapper and not the raw collection, using the sendCategory: message, for example, `TWebPageGroup>>#gtSpotterForPageContents:`."
    },
    {
      "type": "markdown",
      "id": "8a3fc204aeffa2d3",
      "text": "**Consequences:** Composite domain objects and collections of domain objects can be molded to support custom tools. Query results can be similarly molded. Wrapped collections can be made plug-compatible with raw collections."
    },
    {
      "type": "markdown",
      "id": "a6ddd9a69e486ba7",
      "text": "**Related patterns:** A collection wrapper is similar to a [[Moldable Data Wrapper]], since it also serves to make raw data moldable. The difference lies in the specifics of making the wrappers behave like collections, and make sure that any collections returned by queries are also wrapped.\n"
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "Moldable Collection Wrapper",
        "story": []
      },
      "date": 1707209184150
    },
    {
      "id": "b28b2b2e99b70f24",
      "type": "add",
      "item": {
        "type": "markdown",
        "id": "b28b2b2e99b70f24",
        "text": "**Context:** Within your application domain, you not only have to deal with individual domain objects, but also composite entities (e.g., a book of notebook pages, a website of web pages), and collections of entities (e.g.,the result of query).\n[https://book.gtoolkit.com/moldable-collection-wrapper-dyquv1bb9krkve76ncq4kyxr7 page]"
      },
      "attribution": {
        "page": "Collection Wrapper"
      },
      "date": 1707209365576
    },
    {
      "type": "edit",
      "id": "b28b2b2e99b70f24",
      "item": {
        "type": "markdown",
        "id": "b28b2b2e99b70f24",
        "text": "**Context:** Within your application domain, you not only have to deal with individual domain objects, but also composite entities (e.g., a book of notebook pages, a website of web pages), and collections of entities (e.g.,the result of query).\n[https://book.gtoolkit.com/moldable-collection-wrapper-dyquv1bb9krkve76ncq4kyxr7 page]"
      },
      "date": 1707209392506
    },
    {
      "type": "edit",
      "id": "b28b2b2e99b70f24",
      "item": {
        "type": "markdown",
        "id": "b28b2b2e99b70f24",
        "text": "**Context:** Within your application domain, you not only have to deal with individual domain objects, but also composite entities (e.g., a book of notebook pages, a website of web pages), and collections of entities (e.g.,the result of query). [https://book.gtoolkit.com/moldable-collection-wrapper-dyquv1bb9krkve76ncq4kyxr7 page]"
      },
      "date": 1707209393556
    },
    {
      "type": "edit",
      "id": "b28b2b2e99b70f24",
      "item": {
        "type": "markdown",
        "id": "b28b2b2e99b70f24",
        "text": "**Context:** Within your application domain, you not only have to deal with individual domain objects, but also composite entities (e.g., a book of notebook pages, a website of web pages), and collections of entities (e.g.,the result of query). [https://book.gtoolkit.com/moldable-collection-wrapper-dyquv1bb9krkve76ncq4kyxr7 page]"
      },
      "date": 1707209410672
    },
    {
      "type": "add",
      "id": "5b24d52ad536fe2f",
      "item": {
        "type": "markdown",
        "id": "5b24d52ad536fe2f",
        "text": "**Problem:** How can you effectively provide custom tools for various kinds of collections of domain entities?"
      },
      "after": "b28b2b2e99b70f24",
      "date": 1707209432510
    },
    {
      "type": "edit",
      "id": "5b24d52ad536fe2f",
      "item": {
        "type": "markdown",
        "id": "5b24d52ad536fe2f",
        "text": "**Problem:** How can you effectively provide custom tools for various kinds of collections of domain entities?"
      },
      "date": 1707209452810
    },
    {
      "type": "add",
      "id": "88d7ad8205d9d3fd",
      "item": {
        "type": "markdown",
        "id": "88d7ad8205d9d3fd",
        "text": "**Forces:** Collections are generic data structures with generic views that are not necessarily informative for your domain.\n\nCollections of domain entities may occur in various forms and contexts, such as the state of a composite object, or the result of a query.\n\nProviding custom views for each of these can be tedious and lead to much duplicated code."
      },
      "after": "5b24d52ad536fe2f",
      "date": 1707209467220
    },
    {
      "type": "edit",
      "id": "88d7ad8205d9d3fd",
      "item": {
        "type": "markdown",
        "id": "88d7ad8205d9d3fd",
        "text": "**Forces:** Collections are generic data structures with generic views that are not necessarily informative for your domain.\n\nCollections of domain entities may occur in various forms and contexts, such as the state of a composite object, or the result of a query.\n\nProviding custom views for each of these can be tedious and lead to much duplicated code."
      },
      "date": 1707209492016
    },
    {
      "type": "add",
      "id": "e4b5be3a541f8233",
      "item": {
        "type": "markdown",
        "id": "e4b5be3a541f8233",
        "text": "**Solution:** Wrap collections of domain objects in a dedicated group wrapper, and give it dedicated views, actions and searches. In case there are multiple composite entities or collections that should share the same custom tools, factor these out into a common abstract superclass or [[Trait]]."
      },
      "after": "88d7ad8205d9d3fd",
      "date": 1707209501806
    },
    {
      "type": "edit",
      "id": "e4b5be3a541f8233",
      "item": {
        "type": "markdown",
        "id": "e4b5be3a541f8233",
        "text": "**Solution:** Wrap collections of domain objects in a dedicated group wrapper, and give it dedicated views, actions and searches. In case there are multiple composite entities or collections that should share the same custom tools, factor these out into a common abstract superclass or [[Trait]]."
      },
      "date": 1707209522973
    },
    {
      "type": "edit",
      "id": "e4b5be3a541f8233",
      "item": {
        "type": "markdown",
        "id": "e4b5be3a541f8233",
        "text": "**Solution:** Wrap collections of domain objects in a dedicated group wrapper, and give it dedicated views, actions and searches. In case there are multiple composite entities or collections that should share the same custom tools, factor these out into a common abstract superclass or [[Trait]]."
      },
      "date": 1707209568737
    },
    {
      "type": "add",
      "id": "c26a1386688d66ba",
      "item": {
        "type": "markdown",
        "id": "c26a1386688d66ba",
        "text": "**Steps:** Create a dedicated wrapper for a collection of domain entities. An example is `WebPageGroup`, which wraps a collection web pages."
      },
      "after": "e4b5be3a541f8233",
      "date": 1707209591657
    },
    {
      "type": "edit",
      "id": "c26a1386688d66ba",
      "item": {
        "type": "markdown",
        "id": "c26a1386688d66ba",
        "text": "**Steps:** Create a dedicated wrapper for a collection of domain entities. An example is `WebPageGroup`, which wraps a collection web pages."
      },
      "date": 1707209661000
    },
    {
      "type": "edit",
      "id": "c26a1386688d66ba",
      "item": {
        "type": "markdown",
        "id": "c26a1386688d66ba",
        "text": "**Steps:** Create a dedicated wrapper for a collection of domain entities. An example is `WebPageGroup`, which wraps a collection web pages."
      },
      "date": 1707209745101
    },
    {
      "id": "47ed57c903001728",
      "type": "move",
      "order": [
        "b28b2b2e99b70f24",
        "5b24d52ad536fe2f",
        "88d7ad8205d9d3fd",
        "e4b5be3a541f8233",
        "c26a1386688d66ba",
        "47ed57c903001728",
        "064efcead27e51c8"
      ],
      "date": 1707209750228,
      "error": {
        "type": "error",
        "msg": "Internal Server Error",
        "response": "Server Ignoring move. Try reload."
      }
    },
    {
      "type": "add",
      "id": "064efcead27e51c8",
      "item": {
        "type": "markdown",
        "id": "064efcead27e51c8",
        "text": "In case there are other classes that share views, actions and searches with the collection wrapper, consider putting these in a shared trait as well. For example, a website is also a collection of pages. We put the shared views and other behavior in the trait TWebPageGroup . The trait users are AWebsite and WebPageGroup .\n\nWherever you need to show a collection of these objects, just forward the view to the wrapper to avoid duplicating the view code. See TWebPageGroup>>#gtReachablePagesFor: .\n\nIf you have gtSearches, be sure they return the collection wrapper and not the raw collection, using the sendCategory: message, for example, TWebPageGroup>>#gtSpotterForPageContents: ."
      },
      "after": "c26a1386688d66ba",
      "date": 1707209745669
    },
    {
      "item": {
        "type": "image",
        "id": "47ed57c903001728",
        "text": "WebPageGroup",
        "size": "wide",
        "width": 421,
        "height": 175,
        "url": "/assets/plugins/image/6c0f0e237717c60a8d6ea4b67f2ef564.jpg"
      },
      "id": "47ed57c903001728",
      "type": "add",
      "after": "064efcead27e51c8",
      "date": 1707209748180
    },
    {
      "type": "edit",
      "id": "47ed57c903001728",
      "item": {
        "type": "image",
        "id": "47ed57c903001728",
        "text": "WebPageGroup",
        "size": "wide",
        "width": 421,
        "height": 175,
        "url": "/assets/plugins/image/6c0f0e237717c60a8d6ea4b67f2ef564.jpg"
      },
      "date": 1707209771108
    },
    {
      "type": "fork",
      "date": 1707209778376
    },
    {
      "type": "fork",
      "date": 1707209811615
    },
    {
      "type": "fork",
      "site": "wiki.ralfbarkow.ch",
      "date": 1707209923215
    },
    {
      "type": "add",
      "id": "5d53d7edcdea08b6",
      "item": {
        "type": "markdown",
        "id": "5d53d7edcdea08b6",
        "text": "Have the collection wrapper use the `TGtGroupWithItems` trait. This trait has an items slot for the wrapped collection, and provides a large number of Collection methods to make the trait user behave like a Collection. "
      },
      "after": "c26a1386688d66ba",
      "date": 1707210042756,
      "error": {
        "type": "error",
        "msg": "Internal Server Error",
        "response": "Server TypeError: Cannot read properties of null (reading 'id')"
      }
    },
    {
      "type": "remove",
      "date": 1707210050270
    },
    {
      "type": "fork",
      "date": 1707210052337
    },
    {
      "id": "47ed57c903001728",
      "type": "move",
      "order": [
        "b28b2b2e99b70f24",
        "5b24d52ad536fe2f",
        "88d7ad8205d9d3fd",
        "e4b5be3a541f8233",
        "c26a1386688d66ba",
        "5d53d7edcdea08b6",
        "47ed57c903001728",
        "064efcead27e51c8"
      ],
      "date": 1707210062080
    },
    {
      "type": "edit",
      "id": "064efcead27e51c8",
      "item": {
        "type": "markdown",
        "id": "064efcead27e51c8",
        "text": "In case there are other classes that share views, actions and searches with the collection wrapper, consider putting these in a shared trait as well. For example, a website is also a collection of pages. We put the shared views and other behavior in the trait `TWebPageGroup`. The trait users are `AWebsite` and `WebPageGroup`."
      },
      "date": 1707210275211
    },
    {
      "type": "add",
      "id": "70af113e69ea393e",
      "item": {
        "type": "markdown",
        "id": "70af113e69ea393e",
        "text": "Wherever you need to show a collection of these objects, just forward the view to the wrapper to avoid duplicating the view code. See TWebPageGroup>>#gtReachablePagesFor: .\n\nIf you have gtSearches, be sure they return the collection wrapper and not the raw collection, using the sendCategory: message, for example, TWebPageGroup>>#gtSpotterForPageContents: ."
      },
      "after": "064efcead27e51c8",
      "date": 1707210276303
    },
    {
      "item": {
        "type": "factory",
        "id": "a09237d6b33a6d2b"
      },
      "id": "a09237d6b33a6d2b",
      "type": "add",
      "after": "70af113e69ea393e",
      "date": 1707210438920
    },
    {
      "id": "a09237d6b33a6d2b",
      "type": "move",
      "order": [
        "b28b2b2e99b70f24",
        "5b24d52ad536fe2f",
        "88d7ad8205d9d3fd",
        "e4b5be3a541f8233",
        "c26a1386688d66ba",
        "5d53d7edcdea08b6",
        "47ed57c903001728",
        "064efcead27e51c8",
        "a09237d6b33a6d2b",
        "70af113e69ea393e"
      ],
      "date": 1707210444770
    },
    {
      "type": "edit",
      "id": "a09237d6b33a6d2b",
      "item": {
        "type": "image",
        "id": "a09237d6b33a6d2b",
        "text": "TWebPageGroup",
        "size": "wide",
        "width": 419,
        "height": 254,
        "url": "/assets/plugins/image/9a157ee933fb4215628c61b5c3f5a16c.jpg"
      },
      "date": 1707210458554
    },
    {
      "item": {
        "type": "factory",
        "id": "8a3fc204aeffa2d3"
      },
      "id": "8a3fc204aeffa2d3",
      "type": "add",
      "after": "70af113e69ea393e",
      "date": 1707210501592
    },
    {
      "type": "edit",
      "id": "8a3fc204aeffa2d3",
      "item": {
        "type": "markdown",
        "id": "8a3fc204aeffa2d3",
        "text": "**Consequences:** Composite domain objects and collections of domain objects can be molded to support custom tools. Query results can be similarly molded. Wrapped collections can be made plug-compatible with raw collections."
      },
      "date": 1707210520015
    },
    {
      "item": {
        "type": "factory",
        "id": "a6ddd9a69e486ba7"
      },
      "id": "a6ddd9a69e486ba7",
      "type": "add",
      "after": "8a3fc204aeffa2d3",
      "date": 1707210530276
    },
    {
      "type": "edit",
      "id": "a6ddd9a69e486ba7",
      "item": {
        "type": "markdown",
        "id": "a6ddd9a69e486ba7",
        "text": "**Related patterns:** A collection wrapper is similar to a Moldable Data Wrapper, since it also serves to make raw data moldable. The difference lies in the specifics of making the wrappers behave like collections, and make sure that any collections returned by queries are also wrapped.\n"
      },
      "date": 1707210540838
    },
    {
      "type": "edit",
      "id": "a6ddd9a69e486ba7",
      "item": {
        "type": "markdown",
        "id": "a6ddd9a69e486ba7",
        "text": "**Related patterns:** A collection wrapper is similar to a [[Moldable Data Wrapper]], since it also serves to make raw data moldable. The difference lies in the specifics of making the wrappers behave like collections, and make sure that any collections returned by queries are also wrapped.\n"
      },
      "date": 1707210550221
    },
    {
      "type": "fork",
      "site": "localhost:3000",
      "date": 1707211013787
    },
    {
      "type": "edit",
      "id": "70af113e69ea393e",
      "item": {
        "type": "markdown",
        "id": "70af113e69ea393e",
        "text": "Wherever you need to show a collection of these objects, just forward the view to the wrapper to avoid duplicating the view code. See `TWebPageGroup>>#gtReachablePagesFor:`.\n\nIf you have gtSearches, be sure they return the collection wrapper and not the raw collection, using the sendCategory: message, for example, `TWebPageGroup>>#gtSpotterForPageContents:`."
      },
      "date": 1707211158943
    }
  ]
}