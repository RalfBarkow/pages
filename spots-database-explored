{
  "title": "Spots Database Explored",
  "story": [
    {
      "type": "paragraph",
      "id": "fa71f690247f9a24",
      "text": "We've collected many months of FT8 traffic in daily log files. Now we wonder what can we do with these in an SQLite3 database. [https://sqlite.org/download.html download] [https://sqlite.org/fiddle/index.html fiddle] [https://sqlite.org/cli.html cli]"
    },
    {
      "type": "paragraph",
      "id": "f9c84159898e57f8",
      "text": "See [[SQLite Internals]]"
    },
    {
      "type": "paragraph",
      "id": "107e38a983593c6d",
      "text": "We choose one day for a large but not huge collection of records. From this we extract fields as csv."
    },
    {
      "type": "code",
      "id": "d32cd5aeb0bfdfed",
      "text": "cat data/2023-10-24 |\\\n jq -r '.[]|.call+\",\"+.time+\",\"+.msg' >data.csv"
    },
    {
      "type": "paragraph",
      "id": "25683b2e818f5206",
      "text": "We create a database, add a table and then import csv."
    },
    {
      "type": "code",
      "id": "0331b6c66a5cc3d6",
      "text": "% sqlite3 spots\ncreate table spots(call text, time text, msg text)\n.import --csv data.csv spots"
    },
    {
      "type": "paragraph",
      "id": "0fcae36d08969c0d",
      "text": "We try a simple query."
    },
    {
      "type": "code",
      "id": "15e54ff433779af0",
      "text": "select * from spots limit 10 "
    },
    {
      "type": "code",
      "id": "e1fac68cae666d9f",
      "text": "NK0V|2023-10-24T00:00:00Z|K4CS NK0V RR73\nK0LWC|2023-10-24T00:00:00Z|CQ K0LWC EN35\nK1RH|2023-10-24T00:00:00Z|WA0TUC K1RH FM19\nVE3CMM|2023-10-24T00:00:00Z|W5XX VE3CMM EN93\nN2WK|2023-10-24T00:00:00Z|K1MCO N2WK FN03\nNG9J|2023-10-24T00:00:00Z|WA0TUC NG9J 73\nK8HLB|2023-10-24T00:00:00Z|CQ K8HLB EN91\nN4OME|2023-10-24T00:00:00Z|IZ8EYN N4OME R-15\nWY6Y|2023-10-24T00:00:00Z|ES5QA WY6Y EM15\nJA9IFF|2023-10-24T00:00:00Z|W8DDS JA9IFF PM95"
    },
    {
      "type": "paragraph",
      "id": "a1ac96452576b71a",
      "text": "Then one that is hard to do in just command line tools."
    },
    {
      "type": "code",
      "id": "c738e2cc3c5bc7e8",
      "text": "sqlite3 spots '\n  select substr(time,11,3),\n  count(*) from spots\n  where msg like \"CQ VOTA %\"\n  group by substr(time,11,3)'"
    },
    {
      "type": "paragraph",
      "id": "f257ce1f41a38ab7",
      "text": "This gives us hour by hour the number of calls looking to work \"volunteers on the air\". [https://vota.arrl.org/index.php arrl]"
    },
    {
      "type": "code",
      "id": "90b88ba296a12207",
      "text": "T00|256\nT01|236\nT02|134\nT03|200\nT04|85\nT05|36\nT06|44\nT07|93\nT08|97\nT09|113\nT10|97\nT11|126\nT12|162\nT13|157\nT14|170\nT15|207\nT16|193\nT17|403\nT18|301\nT19|542\nT20|521\nT21|411\nT22|354\nT23|373"
    },
    {
      "type": "paragraph",
      "id": "65a35307b09f1b01",
      "text": "Times for this query look promising."
    },
    {
      "type": "code",
      "id": "81cb49fc53ac8acb",
      "text": "0.05s user\n0.06s system\n38% cpu\n0.284 total"
    },
    {
      "type": "paragraph",
      "id": "5440f48123777c6b",
      "text": "Files sizes look good too."
    },
    {
      "type": "code",
      "id": "3f7f6f3318d7f2b1",
      "text": "ls -l data.* spots\n-rw-r--r--  2 ward  68062770 Oct 22 17:00 data.json\n-rw-r--r--  1 ward   9263635 Oct 26 18:35 data.csv\n-rw-r--r--  1 ward  10870784 Oct 26 18:41 spots"
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "Spots Database Explored",
        "story": []
      },
      "date": 1698376461264
    },
    {
      "item": {
        "type": "factory",
        "id": "fa71f690247f9a24"
      },
      "id": "fa71f690247f9a24",
      "type": "add",
      "date": 1698376472000
    },
    {
      "type": "edit",
      "id": "fa71f690247f9a24",
      "item": {
        "type": "paragraph",
        "id": "fa71f690247f9a24",
        "text": "We've collected many months of FT8 traffic in daily log files. Now we wonder what can we do with this in a database."
      },
      "date": 1698376531206
    },
    {
      "type": "add",
      "id": "f9c84159898e57f8",
      "item": {
        "type": "paragraph",
        "id": "f9c84159898e57f8",
        "text": "See [[SQLite Internals]]"
      },
      "after": "fa71f690247f9a24",
      "date": 1698376577730
    },
    {
      "item": {
        "type": "factory",
        "id": "107e38a983593c6d"
      },
      "id": "107e38a983593c6d",
      "type": "add",
      "after": "f9c84159898e57f8",
      "date": 1698376599255
    },
    {
      "type": "edit",
      "id": "107e38a983593c6d",
      "item": {
        "type": "paragraph",
        "id": "107e38a983593c6d",
        "text": "We choose one day for a large but not huge collection of records. From this we extract fields as csv records."
      },
      "date": 1698376677165
    },
    {
      "item": {
        "type": "factory",
        "id": "d32cd5aeb0bfdfed"
      },
      "id": "d32cd5aeb0bfdfed",
      "type": "add",
      "after": "107e38a983593c6d",
      "date": 1698376722005
    },
    {
      "type": "edit",
      "id": "d32cd5aeb0bfdfed",
      "item": {
        "type": "factory",
        "id": "d32cd5aeb0bfdfed",
        "text": "cat data/2023-10-24 | jq -r '.[]|.call+\",\"+.time+\",\"+.msg' >data.csv"
      },
      "date": 1698376731896
    },
    {
      "type": "edit",
      "id": "d32cd5aeb0bfdfed",
      "item": {
        "type": "code",
        "id": "d32cd5aeb0bfdfed",
        "text": "cat data/2023-10-24 |\\\n jq -r '.[]|.call+\",\"+.time+\",\"+.msg' >data.csv"
      },
      "date": 1698376744787
    },
    {
      "item": {
        "type": "factory",
        "id": "25683b2e818f5206"
      },
      "id": "25683b2e818f5206",
      "type": "add",
      "after": "d32cd5aeb0bfdfed",
      "date": 1698376821975
    },
    {
      "type": "edit",
      "id": "25683b2e818f5206",
      "item": {
        "type": "paragraph",
        "id": "25683b2e818f5206",
        "text": "We create a database, add a table and then import this file."
      },
      "date": 1698376844586
    },
    {
      "type": "edit",
      "id": "25683b2e818f5206",
      "item": {
        "type": "paragraph",
        "id": "25683b2e818f5206",
        "text": "We create a database, add a table and then import csv."
      },
      "date": 1698376869183
    },
    {
      "item": {
        "type": "factory",
        "id": "0331b6c66a5cc3d6"
      },
      "id": "0331b6c66a5cc3d6",
      "type": "add",
      "after": "25683b2e818f5206",
      "date": 1698376993016
    },
    {
      "type": "edit",
      "id": "0331b6c66a5cc3d6",
      "item": {
        "type": "paragraph",
        "id": "0331b6c66a5cc3d6",
        "text": "% sqlite3 spots"
      },
      "date": 1698377009366
    },
    {
      "type": "edit",
      "id": "0331b6c66a5cc3d6",
      "item": {
        "type": "code",
        "id": "0331b6c66a5cc3d6",
        "text": "% sqlite3 spots\ncreate spots("
      },
      "date": 1698377038018
    },
    {
      "type": "edit",
      "id": "0331b6c66a5cc3d6",
      "item": {
        "type": "code",
        "id": "0331b6c66a5cc3d6",
        "text": "% sqlite3 spots\ncreate table spots(call text, time text, msg text)"
      },
      "date": 1698377075108
    },
    {
      "type": "edit",
      "id": "0331b6c66a5cc3d6",
      "item": {
        "type": "code",
        "id": "0331b6c66a5cc3d6",
        "text": "% sqlite3 spots\ncreate table spots(call text, time text, msg text)\n.import --csv data.csv spots"
      },
      "date": 1698377199516
    },
    {
      "item": {
        "type": "factory",
        "id": "0fcae36d08969c0d"
      },
      "id": "0fcae36d08969c0d",
      "type": "add",
      "after": "0331b6c66a5cc3d6",
      "date": 1698377415779
    },
    {
      "type": "edit",
      "id": "0fcae36d08969c0d",
      "item": {
        "type": "paragraph",
        "id": "0fcae36d08969c0d",
        "text": "We try some simple queries then one that is hard to do in just command line tools."
      },
      "date": 1698377459716
    },
    {
      "item": {
        "type": "factory",
        "id": "c738e2cc3c5bc7e8"
      },
      "id": "c738e2cc3c5bc7e8",
      "type": "add",
      "after": "0fcae36d08969c0d",
      "date": 1698377462304
    },
    {
      "type": "edit",
      "id": "c738e2cc3c5bc7e8",
      "item": {
        "type": "code",
        "id": "c738e2cc3c5bc7e8",
        "text": "sqlite3 spots '\n  select substr(time,11,3),\n  count(*) from spots\n  where msg like \"CQ VOTA %\"\n  group by substr(time,12,2)'"
      },
      "date": 1698377506806
    },
    {
      "item": {
        "type": "factory",
        "id": "90b88ba296a12207"
      },
      "id": "90b88ba296a12207",
      "type": "add",
      "after": "c738e2cc3c5bc7e8",
      "date": 1698377548516
    },
    {
      "type": "edit",
      "id": "90b88ba296a12207",
      "item": {
        "type": "code",
        "id": "90b88ba296a12207",
        "text": "T00|256\nT01|236\nT02|134\nT03|200\nT04|85\nT05|36\nT06|44\nT07|93\nT08|97\nT09|113\nT10|97\nT11|126\nT12|162\nT13|157\nT14|170\nT15|207\nT16|193\nT17|403\nT18|301\nT19|542\nT20|521\nT21|411\nT22|354\nT23|373"
      },
      "date": 1698377569981
    },
    {
      "type": "add",
      "id": "f257ce1f41a38ab7",
      "item": {
        "type": "paragraph",
        "id": "f257ce1f41a38ab7",
        "text": "This gives us hour by hour the number of calls looking to work \"volunteers on the air\"."
      },
      "after": "0fcae36d08969c0d",
      "date": 1698377637175
    },
    {
      "id": "f257ce1f41a38ab7",
      "type": "move",
      "order": [
        "fa71f690247f9a24",
        "f9c84159898e57f8",
        "107e38a983593c6d",
        "d32cd5aeb0bfdfed",
        "25683b2e818f5206",
        "0331b6c66a5cc3d6",
        "0fcae36d08969c0d",
        "c738e2cc3c5bc7e8",
        "f257ce1f41a38ab7",
        "90b88ba296a12207"
      ],
      "date": 1698377639614
    },
    {
      "type": "edit",
      "id": "c738e2cc3c5bc7e8",
      "item": {
        "type": "code",
        "id": "c738e2cc3c5bc7e8",
        "text": "sqlite3 spots '\n  select substr(time,11,3),\n  count(*) from spots\n  where msg like \"CQ VOTA %\"\n  group by substr(time,11,3)'"
      },
      "date": 1698377669020
    },
    {
      "type": "edit",
      "id": "fa71f690247f9a24",
      "item": {
        "type": "paragraph",
        "id": "fa71f690247f9a24",
        "text": "We've collected many months of FT8 traffic in daily log files. Now we wonder what can we do with this in a database. [https://sqlite.org/download.html download]"
      },
      "date": 1698377813710
    },
    {
      "type": "edit",
      "id": "fa71f690247f9a24",
      "item": {
        "type": "paragraph",
        "id": "fa71f690247f9a24",
        "text": "We've collected many months of FT8 traffic in daily log files. Now we wonder what can we do with this in a database. [https://sqlite.org/download.html download] [https://sqlite.org/fiddle/index.html fiddle]"
      },
      "date": 1698377838032
    },
    {
      "type": "edit",
      "id": "fa71f690247f9a24",
      "item": {
        "type": "paragraph",
        "id": "fa71f690247f9a24",
        "text": "We've collected many months of FT8 traffic in daily log files. Now we wonder what can we do with this in a database. [https://sqlite.org/download.html download] [https://sqlite.org/fiddle/index.html fiddle] [https://sqlite.org/cli.html cli]"
      },
      "date": 1698377876239
    },
    {
      "type": "edit",
      "id": "fa71f690247f9a24",
      "item": {
        "type": "paragraph",
        "id": "fa71f690247f9a24",
        "text": "We've collected many months of FT8 traffic in daily log files. Now we wonder what can we do with this in an SQLite3 database. [https://sqlite.org/download.html download] [https://sqlite.org/fiddle/index.html fiddle] [https://sqlite.org/cli.html cli]"
      },
      "date": 1698377908016
    },
    {
      "type": "edit",
      "id": "f257ce1f41a38ab7",
      "item": {
        "type": "paragraph",
        "id": "f257ce1f41a38ab7",
        "text": "This gives us hour by hour the number of calls looking to work \"volunteers on the air\". [https://vota.arrl.org/index.php arrl]"
      },
      "date": 1698377975916
    },
    {
      "item": {
        "type": "factory",
        "id": "65a35307b09f1b01"
      },
      "id": "65a35307b09f1b01",
      "type": "add",
      "after": "90b88ba296a12207",
      "date": 1698378123010
    },
    {
      "type": "edit",
      "id": "65a35307b09f1b01",
      "item": {
        "type": "paragraph",
        "id": "65a35307b09f1b01",
        "text": "Time here looks promising."
      },
      "date": 1698378138188
    },
    {
      "item": {
        "type": "factory",
        "id": "81cb49fc53ac8acb"
      },
      "id": "81cb49fc53ac8acb",
      "type": "add",
      "after": "65a35307b09f1b01",
      "date": 1698378140136
    },
    {
      "type": "edit",
      "id": "81cb49fc53ac8acb",
      "item": {
        "type": "code",
        "id": "81cb49fc53ac8acb",
        "text": "https://vota.arrl.org/index.php"
      },
      "date": 1698378147450
    },
    {
      "type": "edit",
      "id": "81cb49fc53ac8acb",
      "item": {
        "type": "code",
        "id": "81cb49fc53ac8acb",
        "text": "0.05s user\n0.06s system\n38% cpu\n0.284 total"
      },
      "date": 1698378191555
    },
    {
      "type": "edit",
      "id": "65a35307b09f1b01",
      "item": {
        "type": "paragraph",
        "id": "65a35307b09f1b01",
        "text": "Times for this query look promising."
      },
      "date": 1698378219830
    },
    {
      "item": {
        "type": "factory",
        "id": "5440f48123777c6b"
      },
      "id": "5440f48123777c6b",
      "type": "add",
      "after": "81cb49fc53ac8acb",
      "date": 1698378348711
    },
    {
      "type": "edit",
      "id": "5440f48123777c6b",
      "item": {
        "type": "paragraph",
        "id": "5440f48123777c6b",
        "text": "Files sizes look good too."
      },
      "date": 1698378365449
    },
    {
      "item": {
        "type": "factory",
        "id": "3f7f6f3318d7f2b1"
      },
      "id": "3f7f6f3318d7f2b1",
      "type": "add",
      "after": "5440f48123777c6b",
      "date": 1698378370918
    },
    {
      "type": "edit",
      "id": "3f7f6f3318d7f2b1",
      "item": {
        "type": "code",
        "id": "3f7f6f3318d7f2b1",
        "text": "ls -l data.* spots\n-rw-r--r--  1 ward  staff   9263635 Oct 26 18:35 data.csv\n-rw-r--r--  2 ward  staff  68062770 Oct 22 17:00 data.json\n-rw-r--r--  1 ward  staff  10870784 Oct 26 18:41 spots"
      },
      "date": 1698378375781
    },
    {
      "type": "edit",
      "id": "3f7f6f3318d7f2b1",
      "item": {
        "type": "code",
        "id": "3f7f6f3318d7f2b1",
        "text": "ls -l data.* spots\n-rw-r--r--  1 ward   9263635 Oct 26 18:35 data.csv\n-rw-r--r--  2 ward  68062770 Oct 22 17:00 data.json\n-rw-r--r--  1 ward  10870784 Oct 26 18:41 spots"
      },
      "date": 1698378402566
    },
    {
      "type": "edit",
      "id": "3f7f6f3318d7f2b1",
      "item": {
        "type": "code",
        "id": "3f7f6f3318d7f2b1",
        "text": "ls -l data.* spots\n-rw-r--r--  2 ward  68062770 Oct 22 17:00 data.json\n-rw-r--r--  1 ward   9263635 Oct 26 18:35 data.csv\n-rw-r--r--  1 ward  10870784 Oct 26 18:41 spots"
      },
      "date": 1698378447140
    },
    {
      "type": "edit",
      "id": "0fcae36d08969c0d",
      "item": {
        "type": "paragraph",
        "id": "0fcae36d08969c0d",
        "text": "We try some simple queries."
      },
      "date": 1698378555369
    },
    {
      "type": "add",
      "id": "a1ac96452576b71a",
      "item": {
        "type": "paragraph",
        "id": "a1ac96452576b71a",
        "text": "Then one that is hard to do in just command line tools."
      },
      "after": "0fcae36d08969c0d",
      "date": 1698378560729
    },
    {
      "type": "add",
      "id": "15e54ff433779af0",
      "item": {
        "type": "factory",
        "id": "15e54ff433779af0",
        "text": "select * from spots limit 10"
      },
      "after": "0fcae36d08969c0d",
      "date": 1698378598424
    },
    {
      "type": "edit",
      "id": "15e54ff433779af0",
      "item": {
        "type": "code",
        "id": "15e54ff433779af0",
        "text": "select * from spots limit 10 "
      },
      "date": 1698378602814
    },
    {
      "item": {
        "type": "factory",
        "id": "e1fac68cae666d9f"
      },
      "id": "e1fac68cae666d9f",
      "type": "add",
      "after": "3f7f6f3318d7f2b1",
      "date": 1698378628744
    },
    {
      "type": "edit",
      "id": "e1fac68cae666d9f",
      "item": {
        "type": "code",
        "id": "e1fac68cae666d9f",
        "text": "NK0V|2023-10-24T00:00:00Z|K4CS NK0V RR73\nK0LWC|2023-10-24T00:00:00Z|CQ K0LWC EN35\nK1RH|2023-10-24T00:00:00Z|WA0TUC K1RH FM19\nVE3CMM|2023-10-24T00:00:00Z|W5XX VE3CMM EN93\nN2WK|2023-10-24T00:00:00Z|K1MCO N2WK FN03\nNG9J|2023-10-24T00:00:00Z|WA0TUC NG9J 73\nK8HLB|2023-10-24T00:00:00Z|CQ K8HLB EN91\nN4OME|2023-10-24T00:00:00Z|IZ8EYN N4OME R-15\nWY6Y|2023-10-24T00:00:00Z|ES5QA WY6Y EM15\nJA9IFF|2023-10-24T00:00:00Z|W8DDS JA9IFF PM95"
      },
      "date": 1698378632716
    },
    {
      "id": "e1fac68cae666d9f",
      "type": "move",
      "order": [
        "fa71f690247f9a24",
        "f9c84159898e57f8",
        "107e38a983593c6d",
        "d32cd5aeb0bfdfed",
        "25683b2e818f5206",
        "0331b6c66a5cc3d6",
        "0fcae36d08969c0d",
        "15e54ff433779af0",
        "e1fac68cae666d9f",
        "a1ac96452576b71a",
        "c738e2cc3c5bc7e8",
        "f257ce1f41a38ab7",
        "90b88ba296a12207",
        "65a35307b09f1b01",
        "81cb49fc53ac8acb",
        "5440f48123777c6b",
        "3f7f6f3318d7f2b1"
      ],
      "date": 1698378641167
    },
    {
      "type": "edit",
      "id": "0fcae36d08969c0d",
      "item": {
        "type": "paragraph",
        "id": "0fcae36d08969c0d",
        "text": "We try a simple querie."
      },
      "date": 1698378702393
    },
    {
      "type": "edit",
      "id": "107e38a983593c6d",
      "item": {
        "type": "paragraph",
        "id": "107e38a983593c6d",
        "text": "We choose one day for a large but not huge collection of records. From this we extract fields as csv."
      },
      "date": 1698379012251
    },
    {
      "type": "edit",
      "id": "0fcae36d08969c0d",
      "item": {
        "type": "paragraph",
        "id": "0fcae36d08969c0d",
        "text": "We try a simple query."
      },
      "date": 1698379041218
    },
    {
      "type": "edit",
      "id": "fa71f690247f9a24",
      "item": {
        "type": "paragraph",
        "id": "fa71f690247f9a24",
        "text": "We've collected many months of FT8 traffic in daily log files. Now we wonder what can we do with these in an SQLite3 database. [https://sqlite.org/download.html download] [https://sqlite.org/fiddle/index.html fiddle] [https://sqlite.org/cli.html cli]"
      },
      "date": 1698379268108
    },
    {
      "type": "fork",
      "site": "ft8.ward.asia.wiki.org",
      "date": 1698390483427
    }
  ]
}