{
  "title": "Publish HTML",
  "story": [
    {
      "type": "paragraph",
      "id": "55b051f81d6e7918",
      "text": "This HTML source code file is similar to [[Compose HTML]] but with some modifications. It still contains two buttons that trigger the functions \"dopreview(event)\" and \"dodownload(event)\" on click. The script enclosed in <script> tags with type=\"module\" imports two modules: frame and index."
    },
    {
      "type": "paragraph",
      "id": "2a8c63e0584bf3a8",
      "text": "The frame module is imported from 'http://code.fed.wiki/assets/v1/frame.js', and the index module is imported from 'http://code.fed.wiki/assets/v1/index.js'."
    },
    {
      "type": "paragraph",
      "id": "fb01412db7a331a2",
      "text": "The code defines a function called asSlug, which converts a title into a slug format by replacing spaces with hyphens and removing non-alphanumeric characters."
    },
    {
      "type": "paragraph",
      "id": "89e95a25ba14c509",
      "text": "A new function called getPage is defined. It retrieves the current page using the frame module's context function, and then it modifies the page object by adding folds property using the index module's folds function, and assets property using the frame module's assets function. The folds property contains a modified version of the page.story array, and the assets property contains filtered assets based on their slug matching the page's title."
    },
    {
      "type": "paragraph",
      "id": "55d3a58365d4ce40",
      "text": "The dopreview and dodownload functions are modified to use the getPage function to retrieve the page object.\n\n"
    },
    {
      "type": "paragraph",
      "id": "a345f33e85050c5c",
      "text": "The html function generates the HTML structure for the preview or download, but it no longer includes a <h1> element with the page title. Instead, it directly calls the body function passing the page object."
    },
    {
      "type": "paragraph",
      "id": "dd11e0f0a1eb045a",
      "text": "The body function generates the HTML structure for the body of the page. It uses the page.folds object to include different parts of the page's story in the correct order. It maps the elem function over the parts of the story and joins them together."
    },
    {
      "type": "paragraph",
      "id": "a1c7f1042f9bcdab",
      "text": "The summaries function uses the page.assets array to group the assets by periods based on their directory structure. It sorts the periods chronologically and generates HTML summaries for each period with the number of articles and calls the details function to generate HTML for the individual assets."
    },
    {
      "type": "paragraph",
      "id": "5628cefd32e517b5",
      "text": "The details function generates HTML for a list of assets, showing their filenames."
    },
    {
      "type": "paragraph",
      "id": "8e8ea8ecf26b5ea4",
      "text": "The remaining helper functions (elem, escape) are the same as in the previous code example."
    },
    {
      "type": "paragraph",
      "id": "a044a76f0e27f8c1",
      "text": "Overall, this code creates a page with two buttons that allow users to preview and download an index of articles. The preview shows a summary of the articles organized by periods, and the download generates an HTML file with the same index content that can be saved locally."
    }
  ],
  "journal": [
    {
      "type": "create",
      "item": {
        "title": "Publish HTML",
        "story": []
      },
      "date": 1684932317924
    },
    {
      "item": {
        "type": "factory",
        "id": "55b051f81d6e7918"
      },
      "id": "55b051f81d6e7918",
      "type": "add",
      "date": 1684932336989
    },
    {
      "type": "edit",
      "id": "55b051f81d6e7918",
      "item": {
        "type": "paragraph",
        "id": "55b051f81d6e7918",
        "text": "This HTML source code file is similar to the previous one but with some modifications. It still contains two buttons that trigger the functions \"dopreview(event)\" and \"dodownload(event)\" on click. The script enclosed in <script> tags with type=\"module\" imports two modules: frame and index."
      },
      "date": 1684932340168
    },
    {
      "type": "edit",
      "id": "55b051f81d6e7918",
      "item": {
        "type": "paragraph",
        "id": "55b051f81d6e7918",
        "text": "This HTML source code file is similar to [[Compose HTML]] but with some modifications. It still contains two buttons that trigger the functions \"dopreview(event)\" and \"dodownload(event)\" on click. The script enclosed in <script> tags with type=\"module\" imports two modules: frame and index."
      },
      "date": 1684932360604
    },
    {
      "item": {
        "type": "factory",
        "id": "2a8c63e0584bf3a8"
      },
      "id": "2a8c63e0584bf3a8",
      "type": "add",
      "after": "55b051f81d6e7918",
      "date": 1684932390970
    },
    {
      "type": "edit",
      "id": "2a8c63e0584bf3a8",
      "item": {
        "type": "paragraph",
        "id": "2a8c63e0584bf3a8",
        "text": "The frame module is imported from 'http://code.fed.wiki/assets/v1/frame.js', and the index module is imported from 'http://code.fed.wiki/assets/v1/index.js'."
      },
      "date": 1684932392688
    },
    {
      "item": {
        "type": "factory",
        "id": "fb01412db7a331a2"
      },
      "id": "fb01412db7a331a2",
      "type": "add",
      "after": "2a8c63e0584bf3a8",
      "date": 1684932413167
    },
    {
      "type": "edit",
      "id": "fb01412db7a331a2",
      "item": {
        "type": "paragraph",
        "id": "fb01412db7a331a2",
        "text": "The code defines a function called asSlug, which converts a title into a slug format by replacing spaces with hyphens and removing non-alphanumeric characters."
      },
      "date": 1684932414769
    },
    {
      "item": {
        "type": "factory",
        "id": "89e95a25ba14c509"
      },
      "id": "89e95a25ba14c509",
      "type": "add",
      "after": "fb01412db7a331a2",
      "date": 1684932425337
    },
    {
      "type": "edit",
      "id": "89e95a25ba14c509",
      "item": {
        "type": "paragraph",
        "id": "89e95a25ba14c509",
        "text": "A new function called getPage is defined. It retrieves the current page using the frame module's context function, and then it modifies the page object by adding folds property using the index module's folds function, and assets property using the frame module's assets function. The folds property contains a modified version of the page.story array, and the assets property contains filtered assets based on their slug matching the page's title."
      },
      "date": 1684932427186
    },
    {
      "item": {
        "type": "factory",
        "id": "55d3a58365d4ce40"
      },
      "id": "55d3a58365d4ce40",
      "type": "add",
      "after": "89e95a25ba14c509",
      "date": 1684932470675
    },
    {
      "type": "edit",
      "id": "55d3a58365d4ce40",
      "item": {
        "type": "paragraph",
        "id": "55d3a58365d4ce40",
        "text": "he dopreview and dodownload functions are modified to use the getPage function to retrieve the page object.\n\n"
      },
      "date": 1684932472303
    },
    {
      "type": "edit",
      "id": "55d3a58365d4ce40",
      "item": {
        "type": "paragraph",
        "id": "55d3a58365d4ce40",
        "text": "The dopreview and dodownload functions are modified to use the getPage function to retrieve the page object.\n\n"
      },
      "date": 1684932476945
    },
    {
      "item": {
        "type": "factory",
        "id": "a345f33e85050c5c"
      },
      "id": "a345f33e85050c5c",
      "type": "add",
      "after": "55d3a58365d4ce40",
      "date": 1684932498357
    },
    {
      "type": "edit",
      "id": "a345f33e85050c5c",
      "item": {
        "type": "paragraph",
        "id": "a345f33e85050c5c",
        "text": "The html function generates the HTML structure for the preview or download, but it no longer includes a <h1> element with the page title. Instead, it directly calls the body function passing the page object."
      },
      "date": 1684932499917
    },
    {
      "item": {
        "type": "factory",
        "id": "dd11e0f0a1eb045a"
      },
      "id": "dd11e0f0a1eb045a",
      "type": "add",
      "after": "a345f33e85050c5c",
      "date": 1684932521914
    },
    {
      "type": "edit",
      "id": "dd11e0f0a1eb045a",
      "item": {
        "type": "paragraph",
        "id": "dd11e0f0a1eb045a",
        "text": "The body function generates the HTML structure for the body of the page. It uses the page.folds object to include different parts of the page's story in the correct order. It maps the elem function over the parts of the story and joins them together."
      },
      "date": 1684932523453
    },
    {
      "item": {
        "type": "factory",
        "id": "a1c7f1042f9bcdab"
      },
      "id": "a1c7f1042f9bcdab",
      "type": "add",
      "after": "dd11e0f0a1eb045a",
      "date": 1684932543221
    },
    {
      "type": "edit",
      "id": "a1c7f1042f9bcdab",
      "item": {
        "type": "paragraph",
        "id": "a1c7f1042f9bcdab",
        "text": "The summaries function uses the page.assets array to group the assets by periods based on their directory structure. It sorts the periods chronologically and generates HTML summaries for each period with the number of articles and calls the details function to generate HTML for the individual assets."
      },
      "date": 1684932544868
    },
    {
      "item": {
        "type": "factory",
        "id": "5628cefd32e517b5"
      },
      "id": "5628cefd32e517b5",
      "type": "add",
      "after": "a1c7f1042f9bcdab",
      "date": 1684932567082
    },
    {
      "type": "edit",
      "id": "5628cefd32e517b5",
      "item": {
        "type": "paragraph",
        "id": "5628cefd32e517b5",
        "text": "The details function generates HTML for a list of assets, showing their filenames."
      },
      "date": 1684932568735
    },
    {
      "item": {
        "type": "factory",
        "id": "8e8ea8ecf26b5ea4"
      },
      "id": "8e8ea8ecf26b5ea4",
      "type": "add",
      "after": "5628cefd32e517b5",
      "date": 1684932585702
    },
    {
      "type": "edit",
      "id": "8e8ea8ecf26b5ea4",
      "item": {
        "type": "paragraph",
        "id": "8e8ea8ecf26b5ea4",
        "text": "The remaining helper functions (elem, escape) are the same as in the previous code example."
      },
      "date": 1684932587230
    },
    {
      "item": {
        "type": "factory",
        "id": "a044a76f0e27f8c1"
      },
      "id": "a044a76f0e27f8c1",
      "type": "add",
      "after": "8e8ea8ecf26b5ea4",
      "date": 1684932595590
    },
    {
      "type": "edit",
      "id": "a044a76f0e27f8c1",
      "item": {
        "type": "paragraph",
        "id": "a044a76f0e27f8c1",
        "text": "Overall, this code creates a page with two buttons that allow users to preview and download an index of articles. The preview shows a summary of the articles organized by periods, and the download generates an HTML file with the same index content that can be saved locally."
      },
      "date": 1684932597240
    }
  ]
}